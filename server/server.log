2025-06-30 16:58:57,183 - __main__ - INFO - 服务器程序启动。
2025-06-30 16:58:57,183 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 16:58:57,593 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 16:58:57,612 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 16:58:57,620 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 16:58:57,878 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 16:58:57,879 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 16:58:57,880 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 16:58:57,881 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:10:28,820 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:10:28,820 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:10:28,967 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:10:28,995 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:10:29,004 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:10:29,013 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:10:29,013 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:10:29,014 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:10:29,015 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:10:39,607 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3014) 的新连接。
2025-06-30 22:10:39,610 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3014) 启动。
2025-06-30 22:10:39,615 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3014) 的命令: LOGIN
2025-06-30 22:10:39,685 - server - ERROR - SecureChatServer: 处理来自 ('127.0.0.1', 3014) 的客户端请求时出错: Unicode-objects must be encoded before hashing
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 103, in _handle_client
    user_id, public_key = self.db_manager.authenticate_user(username, password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 125, in authenticate_user
    password_hash = hash_password(password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\utils.py", line 10, in hash_password
    return hashlib.sha256(password).hexdigest()
TypeError: Unicode-objects must be encoded before hashing
2025-06-30 22:10:39,717 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 3014) 断开连接。
2025-06-30 22:10:39,718 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3014) 的连接已关闭。
2025-06-30 22:10:50,052 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3030) 的新连接。
2025-06-30 22:10:50,080 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3030) 启动。
2025-06-30 22:10:50,111 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3030) 的命令: LOGIN
2025-06-30 22:10:50,111 - server - ERROR - SecureChatServer: 处理来自 ('127.0.0.1', 3030) 的客户端请求时出错: Unicode-objects must be encoded before hashing
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 103, in _handle_client
    user_id, public_key = self.db_manager.authenticate_user(username, password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 125, in authenticate_user
    password_hash = hash_password(password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\utils.py", line 10, in hash_password
    return hashlib.sha256(password).hexdigest()
TypeError: Unicode-objects must be encoded before hashing
2025-06-30 22:10:50,123 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 3030) 断开连接。
2025-06-30 22:10:50,125 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3030) 的连接已关闭。
2025-06-30 22:11:11,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3058) 的新连接。
2025-06-30 22:11:11,509 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3058) 启动。
2025-06-30 22:11:11,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3058) 的命令: REGISTER
2025-06-30 22:11:11,509 - server - ERROR - SecureChatServer: 处理来自 ('127.0.0.1', 3058) 的客户端请求时出错: Unicode-objects must be encoded before hashing
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 85, in _handle_client
    if self.db_manager.register_user(username, password, public_key):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 97, in register_user
    password_hash = hash_password(password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\utils.py", line 10, in hash_password
    return hashlib.sha256(password).hexdigest()
TypeError: Unicode-objects must be encoded before hashing
2025-06-30 22:11:11,513 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 3058) 断开连接。
2025-06-30 22:11:11,513 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3058) 的连接已关闭。
2025-06-30 22:11:19,625 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3062) 的新连接。
2025-06-30 22:11:19,625 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3062) 启动。
2025-06-30 22:11:19,625 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3062) 的命令: REGISTER
2025-06-30 22:11:19,625 - server - ERROR - SecureChatServer: 处理来自 ('127.0.0.1', 3062) 的客户端请求时出错: Unicode-objects must be encoded before hashing
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 85, in _handle_client
    if self.db_manager.register_user(username, password, public_key):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 97, in register_user
    password_hash = hash_password(password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\utils.py", line 10, in hash_password
    return hashlib.sha256(password).hexdigest()
TypeError: Unicode-objects must be encoded before hashing
2025-06-30 22:11:19,625 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 3062) 断开连接。
2025-06-30 22:11:19,625 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3062) 的连接已关闭。
2025-06-30 22:12:26,047 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:12:26,047 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:12:27,215 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:12:27,236 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:12:27,248 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:12:27,257 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:12:27,257 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:12:27,259 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:12:27,259 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:12:37,414 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3221) 的新连接。
2025-06-30 22:12:37,451 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3221) 启动。
2025-06-30 22:12:37,476 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3221) 的命令: LOGIN
2025-06-30 22:12:37,781 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:12:37,797 - db - INFO - DatabaseManager: 用户 2 在线状态更新成功: 10.21.240.25:3222。
2025-06-30 22:12:37,801 - server - INFO - SecureChatServer: 用户 ztz (ID: 2) 从 ('127.0.0.1', 3221) 登录。
2025-06-30 22:12:37,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3221) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:12:37,811 - db - INFO - DatabaseManager: 已为用户 2 检索到 0 个在线好友信息。
2025-06-30 22:12:37,811 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个在线好友列表。
2025-06-30 22:15:38,302 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 3221) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:15:38,334 - db - INFO - DatabaseManager: 用户 2 在线状态已清除。
2025-06-30 22:15:38,342 - server - INFO - SecureChatServer: 已清理用户 ztz (ID: 2) 的会话并更新离线状态。
2025-06-30 22:15:38,343 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3221) 的连接已关闭。
2025-06-30 22:15:51,585 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3582) 的新连接。
2025-06-30 22:15:51,585 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3582) 启动。
2025-06-30 22:15:51,585 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3582) 的命令: LOGIN
2025-06-30 22:15:51,594 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:15:51,618 - db - INFO - DatabaseManager: 用户 1 在线状态更新成功: 10.21.240.25:3583。
2025-06-30 22:15:51,622 - server - INFO - SecureChatServer: 用户 ddd (ID: 1) 从 ('127.0.0.1', 3582) 登录。
2025-06-30 22:15:51,626 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3582) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:15:51,635 - db - INFO - DatabaseManager: 已为用户 1 检索到 0 个在线好友信息。
2025-06-30 22:15:51,637 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个在线好友列表。
2025-06-30 22:16:54,750 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 3582) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:16:54,759 - db - INFO - DatabaseManager: 用户 1 在线状态已清除。
2025-06-30 22:16:54,761 - server - INFO - SecureChatServer: 已清理用户 ddd (ID: 1) 的会话并更新离线状态。
2025-06-30 22:16:54,761 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3582) 的连接已关闭。
2025-06-30 22:17:12,789 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的新连接。
2025-06-30 22:17:12,791 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3781) 启动。
2025-06-30 22:17:12,792 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: LOGIN
2025-06-30 22:17:12,825 - db - INFO - DatabaseManager: 用户 'syn' 认证成功。
2025-06-30 22:17:12,839 - db - INFO - DatabaseManager: 用户 3 在线状态更新成功: 10.21.240.25:3782。
2025-06-30 22:17:12,839 - server - INFO - SecureChatServer: 用户 syn (ID: 3) 从 ('127.0.0.1', 3781) 登录。
2025-06-30 22:17:12,842 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:17:12,843 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:17:12,851 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:17:14,388 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:17:14,391 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:17:14,393 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:17:14,394 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ALL_FRIENDS
2025-06-30 22:17:14,398 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=3 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:17:14,401 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-06-30 22:17:59,151 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: ADD_FRIEND
2025-06-30 22:17:59,301 - db - INFO - DatabaseManager: 用户 2 添加好友 3 成功。
2025-06-30 22:17:59,301 - server - INFO - SecureChatServer: 用户 syn 添加 ztz (ID: 2) 为好友成功。
2025-06-30 22:17:59,303 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:17:59,313 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:17:59,313 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:19:34,725 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:19:34,872 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:19:34,873 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:19:34,875 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ALL_FRIENDS
2025-06-30 22:19:34,878 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=3 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:19:34,878 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-06-30 22:19:46,306 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4073) 的新连接。
2025-06-30 22:19:46,308 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4073) 启动。
2025-06-30 22:19:46,309 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4073) 的命令: LOGIN
2025-06-30 22:19:46,322 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:19:46,334 - db - INFO - DatabaseManager: 用户 2 在线状态更新成功: 10.21.240.25:4074。
2025-06-30 22:19:46,335 - server - INFO - SecureChatServer: 用户 ztz (ID: 2) 从 ('127.0.0.1', 4073) 登录。
2025-06-30 22:19:46,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4073) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:19:46,342 - db - INFO - DatabaseManager: 已为用户 2 检索到 1 个在线好友信息。
2025-06-30 22:19:46,343 - server - INFO - SecureChatServer: 向 ztz 提供了 1 个在线好友列表。
2025-06-30 22:19:49,247 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4086) 的新连接。
2025-06-30 22:19:49,248 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4086) 启动。
2025-06-30 22:19:49,249 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4086) 的命令: LOGIN
2025-06-30 22:19:49,280 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:19:49,281 - server - WARNING - SecureChatServer: 用户 ztz 尝试重复登录。
2025-06-30 22:19:49,282 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4086) 断开连接。
2025-06-30 22:19:49,282 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4086) 的连接已关闭。
2025-06-30 22:19:57,800 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4114) 的新连接。
2025-06-30 22:19:57,800 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4114) 启动。
2025-06-30 22:19:57,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4114) 的命令: LOGIN
2025-06-30 22:19:57,802 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:19:57,802 - server - WARNING - SecureChatServer: 用户 ztz 尝试重复登录。
2025-06-30 22:19:57,802 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4114) 断开连接。
2025-06-30 22:19:57,802 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4114) 的连接已关闭。
2025-06-30 22:20:38,413 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4204) 的新连接。
2025-06-30 22:20:38,414 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4204) 启动。
2025-06-30 22:20:38,415 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4204) 的命令: LOGIN
2025-06-30 22:20:38,419 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:20:38,443 - db - INFO - DatabaseManager: 用户 1 在线状态更新成功: 10.21.240.25:4205。
2025-06-30 22:20:38,444 - server - INFO - SecureChatServer: 用户 ddd (ID: 1) 从 ('127.0.0.1', 4204) 登录。
2025-06-30 22:20:38,445 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4204) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:20:38,452 - db - INFO - DatabaseManager: 已为用户 1 检索到 1 个在线好友信息。
2025-06-30 22:20:38,453 - server - INFO - SecureChatServer: 向 ddd 提供了 1 个在线好友列表。
2025-06-30 22:20:51,096 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4204) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:20:51,096 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4073) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:20:51,113 - db - INFO - DatabaseManager: 用户 1 在线状态已清除。
2025-06-30 22:20:51,113 - server - INFO - SecureChatServer: 已清理用户 ddd (ID: 1) 的会话并更新离线状态。
2025-06-30 22:20:51,113 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4204) 的连接已关闭。
2025-06-30 22:20:51,115 - db - INFO - DatabaseManager: 用户 2 在线状态已清除。
2025-06-30 22:20:51,116 - server - INFO - SecureChatServer: 已清理用户 ztz (ID: 2) 的会话并更新离线状态。
2025-06-30 22:20:51,116 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4073) 的连接已关闭。
2025-06-30 22:22:28,140 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:22:28,140 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:22:28,253 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:22:28,277 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:22:28,286 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:22:28,292 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:22:28,292 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:22:28,295 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:22:28,295 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:22:47,741 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的新连接。
2025-06-30 22:22:47,749 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4443) 启动。
2025-06-30 22:22:47,750 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的命令: LOGIN
2025-06-30 22:22:47,861 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:22:47,895 - db - INFO - DatabaseManager: 用户 1 在线状态更新成功: 10.21.240.25:4444。
2025-06-30 22:22:47,897 - server - INFO - SecureChatServer: 用户 ddd (ID: 1) 从 ('127.0.0.1', 4443) 登录。
2025-06-30 22:22:47,897 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:22:47,901 - db - INFO - DatabaseManager: 已为用户 1 检索到 0 个在线好友信息。
2025-06-30 22:22:47,901 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个在线好友列表。
2025-06-30 22:22:49,438 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:22:49,439 - db - INFO - DatabaseManager: 已为用户 1 检索到 0 个在线好友信息。
2025-06-30 22:22:49,440 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个在线好友列表。
2025-06-30 22:22:49,440 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的命令: GET_ALL_FRIENDS
2025-06-30 22:22:49,442 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=1 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:22:49,443 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个所有好友列表。
2025-06-30 22:22:57,896 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的命令: ADD_FRIEND
2025-06-30 22:22:57,899 - db - INFO - DatabaseManager: 用户 1 和 2 已经是好友。
2025-06-30 22:22:57,899 - server - WARNING - SecureChatServer: 用户 ddd 无法添加 ztz 为好友，可能已是好友。
2025-06-30 22:23:26,486 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的新连接。
2025-06-30 22:23:26,513 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4548) 启动。
2025-06-30 22:23:26,528 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的命令: LOGIN
2025-06-30 22:23:26,623 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:23:26,655 - db - INFO - DatabaseManager: 用户 2 在线状态更新成功: 10.21.240.25:4549。
2025-06-30 22:23:26,655 - server - INFO - SecureChatServer: 用户 ztz (ID: 2) 从 ('127.0.0.1', 4548) 登录。
2025-06-30 22:23:26,655 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:23:26,670 - db - INFO - DatabaseManager: 已为用户 2 检索到 0 个在线好友信息。
2025-06-30 22:23:26,670 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个在线好友列表。
2025-06-30 22:23:28,240 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:23:28,242 - db - INFO - DatabaseManager: 已为用户 2 检索到 0 个在线好友信息。
2025-06-30 22:23:28,244 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个在线好友列表。
2025-06-30 22:23:28,246 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的命令: GET_ALL_FRIENDS
2025-06-30 22:23:28,247 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=2 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:23:28,249 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个所有好友列表。
2025-06-30 22:23:37,252 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的命令: ADD_FRIEND
2025-06-30 22:23:37,255 - db - INFO - DatabaseManager: 用户 1 和 2 已经是好友。
2025-06-30 22:23:37,255 - server - WARNING - SecureChatServer: 用户 ztz 无法添加 ddd 为好友，可能已是好友。
2025-06-30 22:24:19,960 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的新连接。
2025-06-30 22:24:19,960 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4606) 启动。
2025-06-30 22:24:19,968 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: LOGIN
2025-06-30 22:24:19,971 - db - INFO - DatabaseManager: 用户 'syn' 认证成功。
2025-06-30 22:24:19,977 - db - INFO - DatabaseManager: 用户 3 在线状态更新成功: 10.21.240.25:4607。
2025-06-30 22:24:19,977 - server - INFO - SecureChatServer: 用户 syn (ID: 3) 从 ('127.0.0.1', 4606) 登录。
2025-06-30 22:24:19,979 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:24:19,979 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:24:19,979 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:24:21,524 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:24:21,525 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:24:21,525 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:24:21,527 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: GET_ALL_FRIENDS
2025-06-30 22:24:21,528 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=3 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:24:21,529 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-06-30 22:24:44,889 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: ADD_FRIEND
2025-06-30 22:24:44,918 - db - INFO - DatabaseManager: 用户 1 添加好友 3 成功。
2025-06-30 22:24:44,918 - server - INFO - SecureChatServer: 用户 syn 添加 ddd (ID: 1) 为好友成功。
2025-06-30 22:24:44,918 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:24:44,939 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:24:44,939 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:25:00,101 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4662) 的新连接。
2025-06-30 22:25:00,101 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4662) 启动。
2025-06-30 22:25:00,101 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4662) 的命令: LOGIN
2025-06-30 22:25:00,101 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:25:00,101 - server - WARNING - SecureChatServer: 用户 ddd 尝试重复登录。
2025-06-30 22:25:00,101 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4662) 断开连接。
2025-06-30 22:25:00,101 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4662) 的连接已关闭。
2025-06-30 22:26:23,212 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4805) 的新连接。
2025-06-30 22:26:23,214 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4805) 启动。
2025-06-30 22:26:23,217 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4805) 的命令: LOGIN
2025-06-30 22:26:23,263 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:26:23,263 - server - WARNING - SecureChatServer: 用户 ddd 尝试重复登录。
2025-06-30 22:26:23,265 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4805) 断开连接。
2025-06-30 22:26:23,265 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4805) 的连接已关闭。
2025-06-30 22:26:39,403 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4835) 的新连接。
2025-06-30 22:26:39,406 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4835) 启动。
2025-06-30 22:26:39,407 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4835) 的命令: LOGIN
2025-06-30 22:26:39,420 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:26:39,422 - server - WARNING - SecureChatServer: 用户 ddd 尝试重复登录。
2025-06-30 22:26:39,422 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4835) 断开连接。
2025-06-30 22:26:39,422 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4835) 的连接已关闭。
2025-06-30 22:27:02,382 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4548) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:27:02,402 - db - WARNING - DatabaseManager: 尝试清除用户 2 在线状态，但记录不存在。
2025-06-30 22:27:02,403 - server - INFO - SecureChatServer: 已清理用户 ztz (ID: 2) 的会话并更新离线状态。
2025-06-30 22:27:02,404 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4548) 的连接已关闭。
2025-06-30 22:27:12,114 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:27:12,114 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:27:12,261 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:27:12,275 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:27:12,278 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:27:12,289 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:27:12,289 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:27:12,293 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:27:12,293 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:27:59,549 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:27:59,549 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:27:59,632 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:27:59,643 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:27:59,650 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:27:59,655 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:27:59,655 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:27:59,657 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:27:59,657 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:28:25,719 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4999) 的新连接。
2025-06-30 22:28:25,719 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4999) 启动。
2025-06-30 22:28:25,719 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4999) 的命令: LOGIN
2025-06-30 22:28:25,725 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:28:25,747 - db - INFO - DatabaseManager: 用户 1 在线状态更新成功: 10.21.240.25:5002。
2025-06-30 22:28:25,747 - server - INFO - SecureChatServer: 用户 ddd (ID: 1) 从 ('127.0.0.1', 4999) 登录。
2025-06-30 22:28:25,751 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4999) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:28:25,756 - db - INFO - DatabaseManager: 已为用户 1 检索到 0 个在线好友信息。
2025-06-30 22:28:25,756 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个在线好友列表。
2025-06-30 22:28:27,311 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4999) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:28:27,314 - db - INFO - DatabaseManager: 已为用户 1 检索到 0 个在线好友信息。
2025-06-30 22:28:27,316 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个在线好友列表。
2025-06-30 22:28:27,318 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4999) 的命令: GET_ALL_FRIENDS
2025-06-30 22:28:27,321 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=1 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:28:27,327 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个所有好友列表。
2025-06-30 22:28:39,500 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5014) 的新连接。
2025-06-30 22:28:39,500 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5014) 启动。
2025-06-30 22:28:39,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5014) 的命令: LOGIN
2025-06-30 22:28:39,505 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:28:39,511 - db - INFO - DatabaseManager: 用户 2 在线状态更新成功: 10.21.240.25:5015。
2025-06-30 22:28:39,511 - server - INFO - SecureChatServer: 用户 ztz (ID: 2) 从 ('127.0.0.1', 5014) 登录。
2025-06-30 22:28:39,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5014) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:28:39,511 - db - INFO - DatabaseManager: 已为用户 2 检索到 0 个在线好友信息。
2025-06-30 22:28:39,511 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个在线好友列表。
2025-06-30 22:28:41,047 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5014) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:28:41,048 - db - INFO - DatabaseManager: 已为用户 2 检索到 0 个在线好友信息。
2025-06-30 22:28:41,049 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个在线好友列表。
2025-06-30 22:28:41,049 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5014) 的命令: GET_ALL_FRIENDS
2025-06-30 22:28:41,060 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=2 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:28:41,060 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个所有好友列表。
2025-06-30 22:29:04,196 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:29:04,196 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:29:04,338 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:29:04,353 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:29:04,360 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:29:04,368 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:29:04,368 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:29:04,368 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:29:04,368 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:30:48,699 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:30:48,700 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:30:48,825 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:30:48,843 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:30:48,851 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:30:48,859 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:30:48,859 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:30:48,860 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:30:48,862 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:31:58,562 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5352) 的新连接。
2025-06-30 22:31:58,563 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5352) 启动。
2025-06-30 22:31:58,565 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5352) 的命令: REGISTER
2025-06-30 22:31:58,605 - db - INFO - DatabaseManager: 用户 'A' 注册成功。
2025-06-30 22:31:58,608 - server - INFO - SecureChatServer: 用户 A 已注册。
2025-06-30 22:31:58,610 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 5352) 断开连接。
2025-06-30 22:31:58,612 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5352) 的连接已关闭。
2025-06-30 22:32:06,290 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5362) 的新连接。
2025-06-30 22:32:06,290 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5362) 启动。
2025-06-30 22:32:06,295 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5362) 的命令: LOGIN
2025-06-30 22:32:06,309 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:32:06,324 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:5363。
2025-06-30 22:32:06,325 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 5362) 登录。
2025-06-30 22:32:06,327 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5362) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:32:06,332 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:32:06,332 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:32:08,869 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5362) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:32:08,901 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:32:08,901 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:32:08,901 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5362) 的命令: GET_ALL_FRIENDS
2025-06-30 22:32:08,901 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=4 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:32:08,907 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:32:28,604 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5391) 的新连接。
2025-06-30 22:32:28,606 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5391) 启动。
2025-06-30 22:32:28,606 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5391) 的命令: REGISTER
2025-06-30 22:32:28,639 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-06-30 22:32:28,639 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-06-30 22:32:28,639 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 5391) 断开连接。
2025-06-30 22:32:28,639 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5391) 的连接已关闭。
2025-06-30 22:32:35,875 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的新连接。
2025-06-30 22:32:35,875 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5415) 启动。
2025-06-30 22:32:35,875 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: LOGIN
2025-06-30 22:32:35,875 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:32:35,906 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:5416。
2025-06-30 22:32:35,906 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 5415) 登录。
2025-06-30 22:32:35,906 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:32:35,914 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:32:35,914 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:32:37,858 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:32:37,875 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:32:37,877 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:32:37,877 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: GET_ALL_FRIENDS
2025-06-30 22:32:37,880 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=5 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:32:37,880 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 22:33:00,551 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: ADD_FRIEND
2025-06-30 22:33:00,573 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:33:00,576 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 22:33:00,576 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:33:00,580 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:33:00,583 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:36:41,673 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:36:41,673 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:36:41,771 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:36:41,788 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:36:41,796 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:36:41,803 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:36:41,803 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:36:41,804 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:36:41,805 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:37:05,145 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5843) 的新连接。
2025-06-30 22:37:05,145 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5843) 启动。
2025-06-30 22:37:05,147 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5843) 的命令: LOGIN
2025-06-30 22:37:05,152 - db - WARNING - DatabaseManager: 用户 'A' 认证失败 (用户名或密码无效)。
2025-06-30 22:37:05,152 - server - WARNING - SecureChatServer: 用户 A 登录失败，凭据无效。
2025-06-30 22:37:05,156 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 5843) 断开连接。
2025-06-30 22:37:05,156 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5843) 的连接已关闭。
2025-06-30 22:37:10,049 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5845) 的新连接。
2025-06-30 22:37:10,049 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5845) 启动。
2025-06-30 22:37:10,057 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5845) 的命令: LOGIN
2025-06-30 22:37:10,059 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:37:10,080 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:5846。
2025-06-30 22:37:10,080 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 5845) 登录。
2025-06-30 22:37:10,080 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5845) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:37:10,092 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:37:10,092 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:37:11,850 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5845) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:37:11,852 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:37:11,852 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:37:11,854 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5845) 的命令: GET_ALL_FRIENDS
2025-06-30 22:37:11,856 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=4 时出错: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]列名 'u' 无效。 (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 392, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]列名 'u' 无效。 (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:37:11,856 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:37:22,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的新连接。
2025-06-30 22:37:22,335 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5855) 启动。
2025-06-30 22:37:22,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: LOGIN
2025-06-30 22:37:22,351 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:37:22,351 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:5856。
2025-06-30 22:37:22,351 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 5855) 登录。
2025-06-30 22:37:22,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:37:22,351 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:37:22,351 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:37:23,901 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:37:23,903 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:37:23,903 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:37:23,903 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: GET_ALL_FRIENDS
2025-06-30 22:37:23,906 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=5 时出错: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]列名 'u' 无效。 (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 392, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]列名 'u' 无效。 (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:37:23,907 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 22:37:45,579 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: ADD_FRIEND
2025-06-30 22:37:45,605 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:37:45,615 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 22:37:45,616 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:37:45,616 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:37:45,616 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:39:27,699 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:39:27,699 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:39:27,853 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:39:27,867 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:39:27,875 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:39:27,881 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:39:27,881 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:39:27,882 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:39:27,882 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:40:50,321 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6205) 的新连接。
2025-06-30 22:40:50,321 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6205) 启动。
2025-06-30 22:40:50,321 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6205) 的命令: LOGIN
2025-06-30 22:40:50,347 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:40:50,356 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:6206。
2025-06-30 22:40:50,356 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 6205) 登录。
2025-06-30 22:40:50,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6205) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:40:50,366 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:40:50,366 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:40:52,868 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6205) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:40:52,876 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:40:52,878 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:40:52,880 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6205) 的命令: GET_ALL_FRIENDS
2025-06-30 22:40:52,898 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 22:40:52,899 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:40:59,884 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的新连接。
2025-06-30 22:40:59,884 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6222) 启动。
2025-06-30 22:40:59,884 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: LOGIN
2025-06-30 22:40:59,896 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:40:59,912 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:6223。
2025-06-30 22:40:59,912 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 6222) 登录。
2025-06-30 22:40:59,912 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:40:59,918 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:40:59,918 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:41:01,873 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:41:01,875 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:41:01,876 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:41:01,876 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: GET_ALL_FRIENDS
2025-06-30 22:41:01,881 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 22:41:01,881 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 22:41:11,259 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: ADD_FRIEND
2025-06-30 22:41:11,283 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:41:11,285 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 22:41:11,285 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:41:11,291 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:41:11,292 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:42:30,690 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6205) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:42:30,743 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 22:42:30,744 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 22:42:30,744 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6205) 的连接已关闭。
2025-06-30 22:43:19,356 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的新连接。
2025-06-30 22:43:19,358 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6358) 启动。
2025-06-30 22:43:19,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: LOGIN
2025-06-30 22:43:19,424 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:43:19,440 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:6359。
2025-06-30 22:43:19,440 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 6358) 登录。
2025-06-30 22:43:19,440 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:43:19,456 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:43:19,456 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:43:20,989 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:43:20,990 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:43:20,991 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:43:20,991 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ALL_FRIENDS
2025-06-30 22:43:20,993 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 22:43:21,008 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:43:30,271 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: ADD_FRIEND
2025-06-30 22:43:30,279 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:43:30,279 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 5) 为好友成功。
2025-06-30 22:43:30,281 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:43:30,286 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 22:43:30,287 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 22:43:32,093 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: ADD_FRIEND
2025-06-30 22:43:32,095 - db - INFO - DatabaseManager: 用户 4 和 5 已经是好友。
2025-06-30 22:43:32,098 - server - WARNING - SecureChatServer: 用户 A 无法添加 B 为好友，可能已是好友。
2025-06-30 22:43:57,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:43:57,372 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 22:43:57,373 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 22:44:05,435 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6395) 的新连接。
2025-06-30 22:44:05,435 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6395) 启动。
2025-06-30 22:44:05,442 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6395) 的命令: LOGIN
2025-06-30 22:44:05,444 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:44:05,444 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 22:44:05,444 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6395) 断开连接。
2025-06-30 22:44:05,444 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6395) 的连接已关闭。
2025-06-30 22:44:07,555 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6397) 的新连接。
2025-06-30 22:44:07,555 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6397) 启动。
2025-06-30 22:44:07,555 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6397) 的命令: LOGIN
2025-06-30 22:44:07,555 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:44:07,555 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 22:44:07,569 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6397) 断开连接。
2025-06-30 22:44:07,569 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6397) 的连接已关闭。
2025-06-30 22:44:19,626 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:44:19,641 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 22:44:19,641 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 22:44:22,497 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:44:22,498 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 22:44:22,498 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 22:44:22,750 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:44:22,751 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 22:44:22,751 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 22:45:56,915 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6358) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:45:56,960 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 22:45:56,961 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 22:45:56,961 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6358) 的连接已关闭。
2025-06-30 22:46:22,667 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6471) 的新连接。
2025-06-30 22:46:22,667 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6471) 启动。
2025-06-30 22:46:22,675 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6471) 的命令: LOGIN
2025-06-30 22:46:22,694 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:46:22,694 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:6472。
2025-06-30 22:46:22,694 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 6471) 登录。
2025-06-30 22:46:22,694 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6471) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:46:22,710 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:46:22,710 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:46:35,639 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6491) 的新连接。
2025-06-30 22:46:35,641 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6491) 启动。
2025-06-30 22:46:35,643 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6491) 的命令: LOGIN
2025-06-30 22:46:35,651 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:46:35,651 - server - WARNING - SecureChatServer: 用户 B 尝试重复登录。
2025-06-30 22:46:35,651 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6491) 断开连接。
2025-06-30 22:46:35,651 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6491) 的连接已关闭。
2025-06-30 22:47:00,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6505) 的新连接。
2025-06-30 22:47:00,526 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6505) 启动。
2025-06-30 22:47:00,543 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6505) 的命令: LOGIN
2025-06-30 22:47:00,544 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:47:00,544 - server - WARNING - SecureChatServer: 用户 B 尝试重复登录。
2025-06-30 22:47:00,544 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6505) 断开连接。
2025-06-30 22:47:00,544 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6505) 的连接已关闭。
2025-06-30 22:47:11,445 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6509) 的新连接。
2025-06-30 22:47:11,445 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6509) 启动。
2025-06-30 22:47:11,447 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6509) 的命令: LOGIN
2025-06-30 22:47:11,447 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:47:11,447 - server - WARNING - SecureChatServer: 用户 B 尝试重复登录。
2025-06-30 22:47:11,451 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6509) 断开连接。
2025-06-30 22:47:11,451 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6509) 的连接已关闭。
2025-06-30 22:47:50,498 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:47:50,499 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:47:50,599 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:47:50,612 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:47:50,619 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:47:50,626 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:47:50,626 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:47:50,627 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:47:50,628 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:48:18,795 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6616) 的新连接。
2025-06-30 22:48:18,796 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6616) 启动。
2025-06-30 22:48:18,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6616) 的命令: LOGIN
2025-06-30 22:48:18,814 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:48:18,826 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:6617。
2025-06-30 22:48:18,827 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 6616) 登录。
2025-06-30 22:48:18,828 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6616) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:48:18,834 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:48:18,835 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:48:20,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6616) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:48:20,359 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:48:20,361 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:48:20,362 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6616) 的命令: GET_ALL_FRIENDS
2025-06-30 22:48:20,365 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 22:48:20,366 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:48:24,828 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的新连接。
2025-06-30 22:48:24,829 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6635) 启动。
2025-06-30 22:48:24,830 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: LOGIN
2025-06-30 22:48:24,834 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:48:24,836 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:6636。
2025-06-30 22:48:24,837 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 6635) 登录。
2025-06-30 22:48:24,837 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:48:24,838 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:48:24,839 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:48:26,386 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:48:26,389 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:48:26,390 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:48:26,391 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: GET_ALL_FRIENDS
2025-06-30 22:48:26,391 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 22:48:26,393 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 22:50:30,440 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: ADD_FRIEND
2025-06-30 22:50:30,490 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:50:30,491 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 22:50:30,491 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:50:30,496 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:50:30,496 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:51:50,724 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6635) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:51:50,747 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-06-30 22:51:50,748 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-06-30 22:51:50,748 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6635) 的连接已关闭。
2025-06-30 22:51:54,120 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6616) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:51:54,141 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 22:51:54,142 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 22:51:54,142 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6616) 的连接已关闭。
2025-06-30 22:52:24,773 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:52:24,773 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:52:24,868 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:52:24,878 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:52:24,883 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:52:24,890 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:52:24,890 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:52:24,891 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:52:24,891 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:53:05,465 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6834) 的新连接。
2025-06-30 22:53:05,466 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6834) 启动。
2025-06-30 22:53:05,466 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6834) 的命令: LOGIN
2025-06-30 22:53:05,510 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:53:05,523 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:6835。
2025-06-30 22:53:05,525 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 6834) 登录。
2025-06-30 22:53:05,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6834) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:53:05,527 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:53:05,528 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:53:07,054 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6834) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:53:07,056 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:53:07,057 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:53:07,057 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6834) 的命令: GET_ALL_FRIENDS
2025-06-30 22:53:07,062 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 22:53:07,063 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:53:17,955 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的新连接。
2025-06-30 22:53:17,955 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6893) 启动。
2025-06-30 22:53:17,957 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: LOGIN
2025-06-30 22:53:17,960 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:53:17,962 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:6894。
2025-06-30 22:53:17,962 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 6893) 登录。
2025-06-30 22:53:17,963 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:53:17,964 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:53:17,964 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:53:19,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:53:19,515 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:53:19,518 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:53:19,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: GET_ALL_FRIENDS
2025-06-30 22:53:19,520 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 22:53:19,521 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 22:53:37,031 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: ADD_FRIEND
2025-06-30 22:53:37,055 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:53:37,056 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 22:53:37,056 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:53:37,058 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:53:37,058 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:57:31,445 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6834) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:57:31,499 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 22:57:31,500 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 22:57:31,500 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6834) 的连接已关闭。
2025-06-30 22:57:41,750 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6893) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:57:41,755 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-06-30 22:57:41,756 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-06-30 22:57:41,756 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6893) 的连接已关闭。
2025-06-30 22:58:20,650 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:58:20,650 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:58:20,733 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:58:20,744 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:58:20,747 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:58:20,747 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:58:20,747 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:58:20,747 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:58:20,747 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:58:42,273 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7103) 的新连接。
2025-06-30 22:58:42,274 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 7103) 启动。
2025-06-30 22:58:42,275 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7103) 的命令: LOGIN
2025-06-30 22:58:42,298 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:58:42,312 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:7104。
2025-06-30 22:58:42,313 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 7103) 登录。
2025-06-30 22:58:42,314 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7103) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:58:42,316 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:58:42,317 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:58:43,852 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7103) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:58:43,853 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:58:43,853 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:58:43,854 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7103) 的命令: GET_ALL_FRIENDS
2025-06-30 22:58:43,859 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 22:58:43,860 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:58:55,299 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的新连接。
2025-06-30 22:58:55,300 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 7127) 启动。
2025-06-30 22:58:55,300 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: LOGIN
2025-06-30 22:58:55,305 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:58:55,307 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:7128。
2025-06-30 22:58:55,307 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 7127) 登录。
2025-06-30 22:58:55,308 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:58:55,309 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:58:55,310 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:58:56,863 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:58:56,866 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:58:56,866 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:58:56,867 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: GET_ALL_FRIENDS
2025-06-30 22:58:56,868 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 22:58:56,869 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 23:00:40,100 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: ADD_FRIEND
2025-06-30 23:00:40,150 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 23:00:40,152 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 23:00:40,153 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:00:40,154 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:00:40,155 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:01:48,037 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 7127) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:01:48,070 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-06-30 23:01:48,070 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-06-30 23:01:48,070 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 7127) 的连接已关闭。
2025-06-30 23:01:56,656 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 7103) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:01:56,671 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 23:01:56,671 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 23:01:56,671 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 7103) 的连接已关闭。
2025-06-30 23:25:51,896 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:25:51,896 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:25:51,936 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:25:51,937 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:25:51,937 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:25:51,938 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:25:51,938 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:25:51,939 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:25:51,939 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:26:15,132 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的新连接。
2025-06-30 23:26:15,133 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9435) 启动。
2025-06-30 23:26:15,135 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: LOGIN
2025-06-30 23:26:15,175 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:26:15,190 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:9436。
2025-06-30 23:26:15,191 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 9435) 登录。
2025-06-30 23:26:15,192 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:26:15,195 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:26:15,196 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:26:16,732 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:26:16,734 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:26:16,734 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:26:16,738 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: GET_ALL_FRIENDS
2025-06-30 23:26:16,760 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个所有好友信息。
2025-06-30 23:26:16,762 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-06-30 23:28:04,264 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:28:04,300 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:28:04,301 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:28:04,303 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: GET_ALL_FRIENDS
2025-06-30 23:28:04,311 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个所有好友信息。
2025-06-30 23:28:04,312 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-06-30 23:28:11,257 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的新连接。
2025-06-30 23:28:11,258 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9728) 启动。
2025-06-30 23:28:11,258 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的命令: LOGIN
2025-06-30 23:28:11,269 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 23:28:11,280 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:9729。
2025-06-30 23:28:11,281 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 9728) 登录。
2025-06-30 23:28:11,281 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:28:11,283 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:28:11,284 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:28:12,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:28:12,842 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:28:12,843 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:28:12,844 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的命令: GET_ALL_FRIENDS
2025-06-30 23:28:12,856 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个所有好友信息。
2025-06-30 23:28:12,857 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-06-30 23:28:47,366 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的命令: ADD_FRIEND
2025-06-30 23:28:47,382 - db - INFO - DatabaseManager: 用户 4 和 5 已经是好友。
2025-06-30 23:28:47,383 - server - WARNING - SecureChatServer: 用户 B 无法添加 A 为好友，可能已是好友。
2025-06-30 23:29:15,158 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 9435) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:29:15,173 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 23:29:15,173 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 23:29:15,173 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9435) 的连接已关闭。
2025-06-30 23:30:24,782 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:30:24,782 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:30:24,911 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:30:24,934 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:30:24,946 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:30:24,956 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:30:24,956 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:30:24,958 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:30:24,958 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:30:44,685 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9908) 的新连接。
2025-06-30 23:30:44,685 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9908) 启动。
2025-06-30 23:30:44,686 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9908) 的命令: LOGIN
2025-06-30 23:30:44,704 - db - WARNING - DatabaseManager: 用户 'B' 认证失败 (用户名或密码无效)。
2025-06-30 23:30:44,705 - server - WARNING - SecureChatServer: 用户 B 登录失败，凭据无效。
2025-06-30 23:30:44,706 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 9908) 断开连接。
2025-06-30 23:30:44,706 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9908) 的连接已关闭。
2025-06-30 23:30:57,882 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9928) 的新连接。
2025-06-30 23:30:57,883 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9928) 启动。
2025-06-30 23:30:57,884 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9928) 的命令: LOGIN
2025-06-30 23:30:57,885 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 23:30:57,904 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:9929。
2025-06-30 23:30:57,905 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 9928) 登录。
2025-06-30 23:30:57,906 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9928) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:30:57,908 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:30:57,909 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:30:59,848 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9928) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:30:59,850 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:30:59,851 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:30:59,852 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9928) 的命令: GET_ALL_FRIENDS
2025-06-30 23:30:59,858 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 23:30:59,859 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 23:31:07,455 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的新连接。
2025-06-30 23:31:07,455 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9938) 启动。
2025-06-30 23:31:07,457 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: LOGIN
2025-06-30 23:31:07,462 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:31:07,463 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:9939。
2025-06-30 23:31:07,464 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 9938) 登录。
2025-06-30 23:31:07,465 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:31:07,466 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:31:07,466 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:31:09,002 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:31:09,005 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:31:09,006 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:31:09,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: GET_ALL_FRIENDS
2025-06-30 23:31:09,009 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 23:31:09,012 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 23:31:48,131 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: ADD_FRIEND
2025-06-30 23:31:48,146 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 23:31:48,147 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 5) 为好友成功。
2025-06-30 23:31:48,148 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:31:48,150 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 23:31:48,151 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 23:31:49,502 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: ADD_FRIEND
2025-06-30 23:31:49,505 - db - INFO - DatabaseManager: 用户 4 和 5 已经是好友。
2025-06-30 23:31:49,505 - server - WARNING - SecureChatServer: 用户 A 无法添加 B 为好友，可能已是好友。
2025-06-30 23:33:00,720 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:33:00,720 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:33:00,841 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:33:00,859 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:33:00,865 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:33:00,872 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:33:00,873 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:33:00,874 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:33:00,875 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:33:32,319 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的新连接。
2025-06-30 23:33:32,319 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10107) 启动。
2025-06-30 23:33:32,321 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: LOGIN
2025-06-30 23:33:32,331 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:33:32,342 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:10108。
2025-06-30 23:33:32,343 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 10107) 登录。
2025-06-30 23:33:32,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:33:32,347 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:33:32,347 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:33:33,889 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:33:33,891 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:33:33,891 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:33:33,893 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ALL_FRIENDS
2025-06-30 23:33:33,902 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 23:33:33,904 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 23:34:14,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: ADD_FRIEND
2025-06-30 23:34:14,516 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 23:34:14,517 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 5) 为好友成功。
2025-06-30 23:34:14,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:34:14,520 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:34:14,520 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:34:56,966 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:34:56,985 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:34:56,986 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:34:56,987 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ALL_FRIENDS
2025-06-30 23:34:57,006 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个所有好友信息。
2025-06-30 23:34:57,008 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-06-30 23:35:05,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10260) 的新连接。
2025-06-30 23:35:05,342 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10260) 启动。
2025-06-30 23:35:05,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10260) 的命令: LOGIN
2025-06-30 23:35:05,347 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 23:35:05,360 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:10261。
2025-06-30 23:35:05,361 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 10260) 登录。
2025-06-30 23:35:05,362 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10260) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:35:05,363 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:35:05,363 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:35:06,881 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10260) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:35:06,881 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:35:06,882 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:35:06,882 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10260) 的命令: GET_ALL_FRIENDS
2025-06-30 23:35:06,883 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个所有好友信息。
2025-06-30 23:35:06,884 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-06-30 23:35:41,476 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 10260) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:35:41,487 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-06-30 23:35:41,488 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-06-30 23:35:41,488 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10260) 的连接已关闭。
2025-06-30 23:41:17,294 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:41:17,294 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:41:17,434 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:41:17,452 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:41:17,458 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:41:17,470 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:41:17,471 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:41:17,472 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:41:17,472 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:41:35,649 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10749) 的新连接。
2025-06-30 23:41:35,650 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10749) 启动。
2025-06-30 23:41:35,651 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10749) 的命令: LOGIN
2025-06-30 23:41:35,671 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:41:35,684 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:10750。
2025-06-30 23:41:35,685 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 10749) 登录。
2025-06-30 23:41:35,686 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10749) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:41:35,688 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:41:35,689 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:41:37,755 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10749) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:41:37,756 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:41:37,756 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:41:37,757 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10749) 的命令: GET_ALL_FRIENDS
2025-06-30 23:41:37,761 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 23:41:37,763 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 23:41:47,827 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的新连接。
2025-06-30 23:41:47,827 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10789) 启动。
2025-06-30 23:41:47,827 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: LOGIN
2025-06-30 23:41:47,833 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 23:41:47,835 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:10790。
2025-06-30 23:41:47,835 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 10789) 登录。
2025-06-30 23:41:47,836 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:41:47,837 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:41:47,837 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:41:49,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:41:49,371 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:41:49,372 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:41:49,374 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: GET_ALL_FRIENDS
2025-06-30 23:41:49,376 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 23:41:49,377 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 23:42:04,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: ADD_FRIEND
2025-06-30 23:42:04,353 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 23:42:04,354 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 23:42:04,355 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:42:04,356 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:42:04,356 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:42:14,191 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10912) 的新连接。
2025-06-30 23:42:14,192 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10912) 启动。
2025-06-30 23:42:14,193 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10912) 的命令: LOGIN
2025-06-30 23:42:14,199 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:42:14,200 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:42:14,201 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 10912) 断开连接。
2025-06-30 23:42:14,201 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10912) 的连接已关闭。
2025-06-30 23:42:39,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10940) 的新连接。
2025-06-30 23:42:39,817 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10940) 启动。
2025-06-30 23:42:39,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10940) 的命令: LOGIN
2025-06-30 23:42:39,827 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:42:39,829 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:42:39,830 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 10940) 断开连接。
2025-06-30 23:42:39,831 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10940) 的连接已关闭。
2025-06-30 23:42:46,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10944) 的新连接。
2025-06-30 23:42:46,803 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10944) 启动。
2025-06-30 23:42:46,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10944) 的命令: LOGIN
2025-06-30 23:42:46,806 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:42:46,807 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:42:46,808 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 10944) 断开连接。
2025-06-30 23:42:46,808 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10944) 的连接已关闭。
2025-06-30 23:42:55,699 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10959) 的新连接。
2025-06-30 23:42:55,701 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10959) 启动。
2025-06-30 23:42:55,704 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10959) 的命令: LOGIN
2025-06-30 23:42:55,705 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:42:55,707 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:42:55,709 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 10959) 断开连接。
2025-06-30 23:42:55,710 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10959) 的连接已关闭。
2025-06-30 23:43:16,679 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 10749) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:43:16,695 - db - WARNING - DatabaseManager: 尝试清除用户 4 在线状态，但记录不存在。
2025-06-30 23:43:16,696 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 23:43:16,696 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10749) 的连接已关闭。
2025-06-30 23:43:34,738 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11009) 的新连接。
2025-06-30 23:43:34,738 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11009) 启动。
2025-06-30 23:43:34,739 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11009) 的命令: LOGIN
2025-06-30 23:43:34,749 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:43:34,764 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:11010。
2025-06-30 23:43:34,766 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 11009) 登录。
2025-06-30 23:43:34,767 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11009) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:43:34,772 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 23:43:34,773 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 23:43:36,548 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11011) 的新连接。
2025-06-30 23:43:36,550 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11011) 启动。
2025-06-30 23:43:36,551 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11011) 的命令: LOGIN
2025-06-30 23:43:36,567 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:43:36,568 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:43:36,570 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 11011) 断开连接。
2025-06-30 23:43:36,571 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 11011) 的连接已关闭。
2025-06-30 23:44:04,534 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11045) 的新连接。
2025-06-30 23:44:04,535 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11045) 启动。
2025-06-30 23:44:04,537 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11045) 的命令: LOGIN
2025-06-30 23:44:04,542 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:44:04,543 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:44:04,544 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 11045) 断开连接。
2025-06-30 23:44:04,544 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 11045) 的连接已关闭。
2025-06-30 23:44:29,908 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:44:29,908 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:44:30,050 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:44:30,061 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:44:30,068 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:44:30,076 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:44:30,076 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:44:30,077 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:44:30,077 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:44:33,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11064) 的新连接。
2025-06-30 23:44:33,350 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11064) 启动。
2025-06-30 23:44:33,352 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11064) 的命令: LOGIN
2025-06-30 23:44:33,378 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:44:33,394 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:11065。
2025-06-30 23:44:33,396 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 11064) 登录。
2025-06-30 23:44:33,397 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11064) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:44:33,399 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 23:44:33,400 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 23:44:37,629 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 11064) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:44:37,642 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 23:44:37,642 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 23:44:37,643 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 11064) 的连接已关闭。
2025-06-30 23:45:03,014 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:45:03,014 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:45:03,105 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:45:03,121 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:45:03,128 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:45:03,136 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:45:03,136 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:45:03,137 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:45:03,138 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:45:21,470 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11101) 的新连接。
2025-06-30 23:45:21,470 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11101) 启动。
2025-06-30 23:45:21,472 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11101) 的命令: LOGIN
2025-06-30 23:45:21,483 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:45:21,490 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:11102。
2025-06-30 23:45:21,492 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 11101) 登录。
2025-06-30 23:45:21,493 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11101) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:45:21,495 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:45:21,495 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:45:23,863 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11101) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:45:23,865 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:45:23,866 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:45:23,868 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11101) 的命令: GET_ALL_FRIENDS
2025-06-30 23:45:23,887 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 23:45:23,890 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 23:45:35,079 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11119) 的新连接。
2025-06-30 23:45:35,080 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11119) 启动。
2025-06-30 23:45:35,080 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11119) 的命令: LOGIN
2025-06-30 23:45:35,086 - db - WARNING - DatabaseManager: 用户 'A' 认证失败 (用户名或密码无效)。
2025-06-30 23:45:35,086 - server - WARNING - SecureChatServer: 用户 A 登录失败，凭据无效。
2025-06-30 23:45:35,086 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 11119) 断开连接。
2025-06-30 23:45:35,087 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 11119) 的连接已关闭。
2025-06-30 23:45:40,502 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的新连接。
2025-06-30 23:45:40,502 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11121) 启动。
2025-06-30 23:45:40,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: LOGIN
2025-06-30 23:45:40,504 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 23:45:40,505 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:11122。
2025-06-30 23:45:40,505 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 11121) 登录。
2025-06-30 23:45:40,505 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:45:40,506 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:45:40,506 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:45:42,851 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:45:42,852 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:45:42,852 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:45:42,852 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: GET_ALL_FRIENDS
2025-06-30 23:45:42,853 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 23:45:42,853 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 23:50:28,998 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: ADD_FRIEND
2025-06-30 23:50:29,045 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 23:50:29,046 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 23:50:29,046 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:50:29,047 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:50:29,048 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:50:53,378 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 11101) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:50:53,395 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 23:50:53,397 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 23:50:53,397 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 11101) 的连接已关闭。
2025-07-01 00:05:21,008 - __main__ - INFO - 服务器程序启动。
2025-07-01 00:05:21,008 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 00:05:21,108 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 00:05:21,129 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 00:05:21,136 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 00:05:21,144 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 00:05:21,144 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 00:05:21,145 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 00:05:21,146 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 00:06:22,984 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13047) 的新连接。
2025-07-01 00:06:22,984 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 13047) 启动。
2025-07-01 00:06:22,985 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13047) 的命令: LOGIN
2025-07-01 00:06:23,000 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-01 00:06:23,017 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:13048。
2025-07-01 00:06:23,018 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 13047) 登录。
2025-07-01 00:06:23,018 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13047) 的命令: GET_ONLINE_FRIENDS
2025-07-01 00:06:23,022 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-07-01 00:06:23,023 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 00:06:24,541 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13047) 的命令: GET_ONLINE_FRIENDS
2025-07-01 00:06:24,543 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-07-01 00:06:24,544 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 00:06:24,544 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13047) 的命令: GET_ALL_FRIENDS
2025-07-01 00:06:24,549 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-07-01 00:06:24,550 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 00:06:46,919 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的新连接。
2025-07-01 00:06:46,920 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 13090) 启动。
2025-07-01 00:06:46,924 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: LOGIN
2025-07-01 00:06:46,942 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-01 00:06:46,955 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:13091。
2025-07-01 00:06:46,955 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 13090) 登录。
2025-07-01 00:06:46,956 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: GET_ONLINE_FRIENDS
2025-07-01 00:06:46,958 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-07-01 00:06:46,959 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-01 00:06:48,499 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: GET_ONLINE_FRIENDS
2025-07-01 00:06:48,500 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-07-01 00:06:48,501 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-01 00:06:48,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: GET_ALL_FRIENDS
2025-07-01 00:06:48,516 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-07-01 00:06:48,517 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-01 00:07:05,695 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: ADD_FRIEND
2025-07-01 00:07:05,705 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-07-01 00:07:05,706 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-07-01 00:07:05,706 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: GET_ONLINE_FRIENDS
2025-07-01 00:07:05,708 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-07-01 00:07:05,708 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-01 00:07:27,651 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13117) 的新连接。
2025-07-01 00:07:27,651 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 13117) 启动。
2025-07-01 00:07:27,652 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13117) 的命令: LOGIN
2025-07-01 00:07:27,655 - db - WARNING - DatabaseManager: 用户 'ddd' 认证失败 (用户名或密码无效)。
2025-07-01 00:07:27,656 - server - WARNING - SecureChatServer: 用户 ddd 登录失败，凭据无效。
2025-07-01 00:07:27,656 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 13117) 断开连接。
2025-07-01 00:07:27,657 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 13117) 的连接已关闭。
2025-07-01 00:07:57,915 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 13090) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 00:07:57,946 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-07-01 00:07:57,946 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-07-01 00:07:57,946 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 13090) 的连接已关闭。
2025-07-01 20:42:25,613 - __main__ - INFO - 服务器程序启动。
2025-07-01 20:42:25,613 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 20:42:25,723 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 20:42:25,735 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 20:42:25,747 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 20:42:25,754 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 20:42:25,754 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 20:42:25,754 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 20:42:25,762 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 20:43:45,793 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的新连接。
2025-07-01 20:43:45,793 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 64865) 启动。
2025-07-01 20:43:45,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: LOGIN
2025-07-01 20:43:46,417 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-01 20:43:46,423 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:64866。
2025-07-01 20:43:46,431 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 64865) 登录。
2025-07-01 20:43:46,435 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:43:46,452 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:43:46,454 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:43:46,463 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:43:46,467 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:43:46,606 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:43:48,176 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:43:48,181 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:43:48,182 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:43:48,187 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:43:48,188 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:43:48,188 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:43:48,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:43:48,353 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:43:48,353 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:43:48,354 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:43:48,355 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:43:48,356 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:44:19,106 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:44:19,109 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:44:19,109 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:44:19,109 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:44:19,111 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:44:19,111 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:44:39,970 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的新连接。
2025-07-01 20:44:39,980 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 64910) 启动。
2025-07-01 20:44:40,281 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: LOGIN
2025-07-01 20:44:40,345 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-01 20:44:40,626 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:64911。
2025-07-01 20:44:40,626 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 64910) 登录。
2025-07-01 20:44:40,628 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:44:40,639 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:44:40,754 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:44:40,761 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:44:40,870 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:44:40,871 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:44:42,402 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:44:42,621 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:44:42,625 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:44:42,626 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:44:42,629 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:44:42,762 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:44:45,280 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:44:45,579 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:44:45,583 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:44:45,585 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:44:45,586 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:44:45,590 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:44:49,120 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:44:49,122 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:44:49,124 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:44:49,124 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:44:49,131 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:44:49,131 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:45:14,104 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:45:14,107 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:45:14,107 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:45:14,107 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:45:14,111 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:45:14,112 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:45:18,294 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:45:18,294 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:45:18,302 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:45:18,303 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:45:18,306 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:45:18,308 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:45:44,118 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:45:44,123 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:45:44,123 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:45:44,131 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:45:44,131 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:45:44,131 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:45:49,113 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:45:49,132 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:45:49,134 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:45:49,136 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:45:49,144 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:45:49,146 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:46:14,111 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:46:14,118 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:46:14,122 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:46:14,125 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:46:14,130 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:46:14,131 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:46:19,118 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:46:19,118 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:46:19,118 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:46:19,118 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:46:19,118 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:46:19,128 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:46:44,112 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:46:44,121 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:46:44,121 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:46:44,129 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:46:44,129 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:46:44,129 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:46:49,109 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:46:49,122 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:46:49,124 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:46:49,132 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:46:49,140 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:46:49,141 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:47:14,111 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:47:14,122 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:47:14,122 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:47:14,127 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:47:14,128 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:47:14,128 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:47:42,620 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 64865) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 20:47:42,640 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-07-01 20:47:42,640 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-07-01 20:47:42,642 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 64865) 的连接已关闭。
2025-07-01 20:47:43,431 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 64910) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 20:47:43,435 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-07-01 20:47:43,435 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-07-01 20:47:43,437 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 64910) 的连接已关闭。
2025-07-01 20:49:18,899 - __main__ - INFO - 服务器程序启动。
2025-07-01 20:49:18,899 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 20:49:18,961 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 20:49:18,969 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 20:49:18,979 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 20:49:18,986 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 20:49:18,986 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 20:49:18,986 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 20:49:18,986 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 20:50:58,265 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 65283) 的新连接。
2025-07-01 20:50:58,274 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 65283) 启动。
2025-07-01 20:50:58,275 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 65283) 的命令: REGISTER
2025-07-01 20:50:58,324 - db - INFO - DatabaseManager: 用户 'ztz' 注册成功。
2025-07-01 20:50:58,324 - server - INFO - SecureChatServer: 用户 ztz 已注册。
2025-07-01 20:50:58,324 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 65283) 断开连接，用户未登录。
2025-07-01 20:50:58,331 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 65283) 的连接已关闭。
2025-07-01 20:51:16,771 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 65321) 的新连接。
2025-07-01 20:51:16,780 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 65321) 启动。
2025-07-01 20:51:16,781 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 65321) 的命令: REGISTER
2025-07-01 20:51:16,784 - db - INFO - DatabaseManager: 用户 'syn' 注册成功。
2025-07-01 20:51:16,788 - server - INFO - SecureChatServer: 用户 syn 已注册。
2025-07-01 20:51:16,788 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 65321) 断开连接，用户未登录。
2025-07-01 20:51:16,788 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 65321) 的连接已关闭。
2025-07-01 21:00:43,081 - __main__ - INFO - 服务器程序启动。
2025-07-01 21:00:43,081 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 21:00:43,148 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 21:00:43,161 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 21:00:43,168 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 21:00:43,173 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 21:00:43,173 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 21:00:43,173 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 21:00:43,173 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 21:01:05,762 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1405) 的新连接。
2025-07-01 21:01:05,766 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1405) 启动。
2025-07-01 21:01:05,766 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1405) 的命令: REGISTER
2025-07-01 21:01:05,791 - db - INFO - DatabaseManager: 用户 'ztz' 注册成功。
2025-07-01 21:01:05,793 - server - INFO - SecureChatServer: 用户 ztz 已注册。
2025-07-01 21:01:05,797 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 1405) 断开连接，用户未登录。
2025-07-01 21:01:05,798 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1405) 的连接已关闭。
2025-07-01 21:05:00,184 - __main__ - INFO - 服务器程序启动。
2025-07-01 21:05:00,184 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 21:05:00,255 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 21:05:00,267 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 21:05:00,274 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 21:05:00,276 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 21:05:00,276 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 21:05:00,283 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 21:05:00,283 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 21:05:33,029 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1684) 的新连接。
2025-07-01 21:05:33,031 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1684) 启动。
2025-07-01 21:05:33,031 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1684) 的命令: REGISTER
2025-07-01 21:05:33,047 - db - INFO - DatabaseManager: 用户 'syn' 注册成功。
2025-07-01 21:05:33,056 - server - INFO - SecureChatServer: 用户 syn 已注册。
2025-07-01 21:05:33,060 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 1684) 断开连接，用户未登录。
2025-07-01 21:05:33,063 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1684) 的连接已关闭。
2025-07-01 21:07:48,930 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的新连接。
2025-07-01 21:07:48,930 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2087) 启动。
2025-07-01 21:07:48,939 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: LOGIN
2025-07-01 21:07:48,992 - db - INFO - DatabaseManager: 用户 'syn' 认证成功。
2025-07-01 21:07:49,004 - db - INFO - DatabaseManager: 用户 1008 在线状态更新成功: 10.21.240.25:2088。
2025-07-01 21:07:49,004 - server - INFO - SecureChatServer: 用户 syn (ID: 1008) 从 ('127.0.0.1', 2087) 登录。
2025-07-01 21:07:49,012 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:07:49,029 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个在线好友信息。
2025-07-01 21:07:49,031 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-07-01 21:07:49,033 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ALL_FRIENDS
2025-07-01 21:07:49,039 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个所有好友信息。
2025-07-01 21:07:49,039 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-07-01 21:07:50,577 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:07:50,580 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个在线好友信息。
2025-07-01 21:07:50,581 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-07-01 21:07:50,582 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ALL_FRIENDS
2025-07-01 21:07:50,584 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个所有好友信息。
2025-07-01 21:07:50,587 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-07-01 21:07:50,752 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:07:50,753 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个在线好友信息。
2025-07-01 21:07:50,755 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-07-01 21:07:50,756 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ALL_FRIENDS
2025-07-01 21:07:50,756 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个所有好友信息。
2025-07-01 21:07:50,757 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-07-01 21:07:52,714 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:07:52,719 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个在线好友信息。
2025-07-01 21:07:52,722 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-07-01 21:07:52,724 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ALL_FRIENDS
2025-07-01 21:07:52,724 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个所有好友信息。
2025-07-01 21:07:52,724 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-07-01 21:08:21,113 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:08:21,116 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个在线好友信息。
2025-07-01 21:08:21,119 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-07-01 21:08:21,119 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ALL_FRIENDS
2025-07-01 21:08:21,121 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个所有好友信息。
2025-07-01 21:08:21,123 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-07-01 21:08:26,206 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2087) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 21:08:26,222 - db - INFO - DatabaseManager: 用户 1008 在线状态已清除。
2025-07-01 21:08:26,222 - server - INFO - SecureChatServer: 已清理用户 syn (ID: 1008) 的会话并更新离线状态。
2025-07-01 21:08:26,222 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2087) 的连接已关闭。
2025-07-01 21:10:59,061 - __main__ - INFO - 服务器程序启动。
2025-07-01 21:10:59,061 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 21:10:59,142 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 21:10:59,151 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 21:10:59,163 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 21:10:59,172 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 21:10:59,172 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 21:10:59,176 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 21:10:59,177 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 21:11:23,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2404) 的新连接。
2025-07-01 21:11:23,007 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2404) 启动。
2025-07-01 21:11:23,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2404) 的命令: REGISTER
2025-07-01 21:11:23,025 - db - INFO - DatabaseManager: 用户 'A' 注册成功。
2025-07-01 21:11:23,025 - server - INFO - SecureChatServer: 用户 A 已注册。
2025-07-01 21:11:23,034 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 2404) 断开连接，用户未登录。
2025-07-01 21:11:23,034 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2404) 的连接已关闭。
2025-07-01 21:12:08,700 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2511) 的新连接。
2025-07-01 21:12:08,708 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2511) 启动。
2025-07-01 21:12:08,708 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2511) 的命令: REGISTER
2025-07-01 21:12:08,733 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-07-01 21:12:08,733 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-07-01 21:12:08,733 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 2511) 断开连接，用户未登录。
2025-07-01 21:12:08,733 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2511) 的连接已关闭。
2025-07-01 21:13:21,613 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2611) 的新连接。
2025-07-01 21:13:21,617 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2611) 启动。
2025-07-01 21:13:21,618 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2611) 的命令: REGISTER
2025-07-01 21:13:21,660 - db - INFO - DatabaseManager: 用户 'C' 注册成功。
2025-07-01 21:13:21,660 - server - INFO - SecureChatServer: 用户 C 已注册。
2025-07-01 21:13:21,663 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 2611) 断开连接，用户未登录。
2025-07-01 21:13:21,663 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2611) 的连接已关闭。
2025-07-01 21:13:33,996 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的新连接。
2025-07-01 21:13:33,997 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2651) 启动。
2025-07-01 21:13:34,002 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: LOGIN
2025-07-01 21:13:34,009 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-01 21:13:34,019 - db - INFO - DatabaseManager: 用户 1009 在线状态更新成功: 10.21.240.25:2652。
2025-07-01 21:13:34,019 - server - INFO - SecureChatServer: 用户 A (ID: 1009) 从 ('127.0.0.1', 2651) 登录。
2025-07-01 21:13:34,019 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:34,029 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:13:34,032 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:13:34,034 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:34,036 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个所有好友信息。
2025-07-01 21:13:34,036 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 21:13:36,126 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:36,126 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:13:36,128 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:13:36,129 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:36,132 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个所有好友信息。
2025-07-01 21:13:36,133 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 21:13:36,330 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:36,330 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:13:36,330 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:13:36,330 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:36,330 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个所有好友信息。
2025-07-01 21:13:36,330 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 21:13:39,106 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:39,112 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:13:39,115 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:13:39,115 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:39,115 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个所有好友信息。
2025-07-01 21:13:39,115 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 21:13:39,877 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的新连接。
2025-07-01 21:13:39,877 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2665) 启动。
2025-07-01 21:13:39,883 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: LOGIN
2025-07-01 21:13:39,883 - db - INFO - DatabaseManager: 用户 'C' 认证成功。
2025-07-01 21:13:39,886 - db - INFO - DatabaseManager: 用户 1011 在线状态更新成功: 10.21.240.25:2666。
2025-07-01 21:13:39,886 - server - INFO - SecureChatServer: 用户 C (ID: 1011) 从 ('127.0.0.1', 2665) 登录。
2025-07-01 21:13:39,888 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:39,888 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:39,890 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:39,891 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:39,893 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:39,894 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:42,136 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:42,136 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:42,136 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:42,136 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:42,144 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:42,145 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:42,384 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:42,388 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:42,389 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:42,389 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:42,390 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:42,391 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:44,269 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:44,290 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:44,292 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:44,292 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:44,293 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:44,293 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:47,491 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:47,499 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:47,499 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:47,499 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:47,499 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:47,499 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:47,639 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:47,641 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:47,641 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:47,641 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:47,641 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:47,641 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:47,900 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:47,901 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:47,902 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:47,902 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:47,904 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:47,905 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:14:07,117 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:14:07,119 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:14:07,119 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:14:07,120 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:14:07,121 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个所有好友信息。
2025-07-01 21:14:07,121 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 21:14:37,109 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:14:37,117 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:14:37,122 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:14:37,122 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:14:37,125 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:14:37,125 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:14:37,132 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:14:37,134 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:14:37,138 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:14:37,139 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:14:37,140 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:14:37,142 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:14:56,333 - __main__ - INFO - 服务器程序启动。
2025-07-01 21:14:56,333 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 21:14:56,399 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 21:14:56,405 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 21:14:56,413 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 21:14:56,416 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 21:14:56,416 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 21:14:56,423 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 21:14:56,423 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 21:15:15,105 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的新连接。
2025-07-01 21:15:15,105 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2761) 启动。
2025-07-01 21:15:15,112 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: LOGIN
2025-07-01 21:15:15,114 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-01 21:15:15,131 - db - INFO - DatabaseManager: 用户 1009 在线状态更新成功: 10.21.240.25:2762。
2025-07-01 21:15:15,131 - server - INFO - SecureChatServer: 用户 A (ID: 1009) 从 ('127.0.0.1', 2761) 登录。
2025-07-01 21:15:15,131 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:15,140 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:15:15,142 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:15:15,142 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:15,144 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:15:15,144 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:15:17,135 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:17,154 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:15:17,156 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:15:17,159 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:17,163 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:15:17,164 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:15:17,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:17,350 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:15:17,355 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:15:17,355 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:17,360 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:15:17,362 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:15:18,657 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的新连接。
2025-07-01 21:15:18,660 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2774) 启动。
2025-07-01 21:15:18,660 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: LOGIN
2025-07-01 21:15:18,673 - db - INFO - DatabaseManager: 用户 'C' 认证成功。
2025-07-01 21:15:18,698 - db - INFO - DatabaseManager: 用户 1011 在线状态更新成功: 10.21.240.25:2775。
2025-07-01 21:15:18,698 - server - INFO - SecureChatServer: 用户 C (ID: 1011) 从 ('127.0.0.1', 2774) 登录。
2025-07-01 21:15:18,698 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:18,706 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个在线好友信息。
2025-07-01 21:15:18,710 - server - INFO - SecureChatServer: 向 C 提供了 1 个在线好友列表。
2025-07-01 21:15:18,710 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:18,711 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个所有好友信息。
2025-07-01 21:15:18,711 - server - INFO - SecureChatServer: 向 C 提供了 1 个所有好友列表。
2025-07-01 21:15:21,118 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:21,121 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个在线好友信息。
2025-07-01 21:15:21,122 - server - INFO - SecureChatServer: 向 C 提供了 1 个在线好友列表。
2025-07-01 21:15:21,123 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:21,125 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个所有好友信息。
2025-07-01 21:15:21,125 - server - INFO - SecureChatServer: 向 C 提供了 1 个所有好友列表。
2025-07-01 21:15:21,312 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:21,312 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个在线好友信息。
2025-07-01 21:15:21,314 - server - INFO - SecureChatServer: 向 C 提供了 1 个在线好友列表。
2025-07-01 21:15:21,315 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:21,315 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个所有好友信息。
2025-07-01 21:15:21,315 - server - INFO - SecureChatServer: 向 C 提供了 1 个所有好友列表。
2025-07-01 21:15:24,918 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:24,928 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个在线好友信息。
2025-07-01 21:15:24,928 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 21:15:24,928 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:24,939 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:15:24,939 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:15:48,117 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:48,141 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个在线好友信息。
2025-07-01 21:15:48,149 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 21:15:48,156 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:48,160 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:15:48,164 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:15:52,105 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:52,108 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个在线好友信息。
2025-07-01 21:15:52,108 - server - INFO - SecureChatServer: 向 C 提供了 1 个在线好友列表。
2025-07-01 21:15:52,111 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:52,113 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个所有好友信息。
2025-07-01 21:15:52,117 - server - INFO - SecureChatServer: 向 C 提供了 1 个所有好友列表。
2025-07-01 21:16:22,114 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:16:22,129 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个在线好友信息。
2025-07-01 21:16:22,131 - server - INFO - SecureChatServer: 向 C 提供了 1 个在线好友列表。
2025-07-01 21:16:22,136 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ALL_FRIENDS
2025-07-01 21:16:22,143 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个所有好友信息。
2025-07-01 21:16:22,145 - server - INFO - SecureChatServer: 向 C 提供了 1 个所有好友列表。
2025-07-01 21:16:36,572 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2761) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 21:16:36,601 - db - INFO - DatabaseManager: 用户 1009 在线状态已清除。
2025-07-01 21:16:36,607 - server - INFO - SecureChatServer: 已清理用户 A (ID: 1009) 的会话并更新离线状态。
2025-07-01 21:16:36,607 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2761) 的连接已关闭。
2025-07-01 21:16:37,438 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2774) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 21:16:37,440 - db - INFO - DatabaseManager: 用户 1011 在线状态已清除。
2025-07-01 21:16:37,442 - server - INFO - SecureChatServer: 已清理用户 C (ID: 1011) 的会话并更新离线状态。
2025-07-01 21:16:37,443 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2774) 的连接已关闭。
2025-07-02 20:17:31,430 - __main__ - INFO - 服务器程序启动。
2025-07-02 20:17:31,431 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 20:17:31,474 - db - ERROR - DatabaseManager: 数据库连接失败! SQLSTATE: 28000 - ('28000', "[28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456) (SQLDriverConnect); [28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\db.py", line 28, in _get_connection
    conn = pyodbc.connect(self.conn_str, autocommit=True)
pyodbc.InterfaceError: ('28000', "[28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456) (SQLDriverConnect); [28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456)")
2025-07-02 20:17:31,474 - db - ERROR - DatabaseManager: 创建数据库表时出错: ('28000', "[28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456) (SQLDriverConnect); [28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\db.py", line 40, in create_tables
    conn = self._get_connection()
  File "D:\Projects\Python\Instant_Secure_Communication\server\db.py", line 28, in _get_connection
    conn = pyodbc.connect(self.conn_str, autocommit=True)
pyodbc.InterfaceError: ('28000', "[28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456) (SQLDriverConnect); [28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456)")
2025-07-02 20:17:31,475 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 20:17:31,476 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 20:17:31,477 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 20:18:09,489 - __main__ - INFO - 服务器程序启动。
2025-07-02 20:18:09,489 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 20:18:09,562 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 20:18:09,573 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 20:18:09,581 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 20:18:09,589 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 20:18:09,590 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 20:18:09,591 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 20:18:09,592 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 20:24:03,821 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8103) 的新连接。
2025-07-02 20:24:03,823 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 8103) 启动。
2025-07-02 20:24:03,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8103) 的命令: REGISTER
2025-07-02 20:24:03,894 - db - INFO - DatabaseManager: 用户 'A' 注册成功。
2025-07-02 20:24:03,895 - server - INFO - SecureChatServer: 用户 A 已注册。
2025-07-02 20:24:03,896 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 8103) 断开连接，用户未登录。
2025-07-02 20:24:03,897 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 8103) 的连接已关闭。
2025-07-02 20:24:12,218 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的新连接。
2025-07-02 20:24:12,220 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 8123) 启动。
2025-07-02 20:24:12,253 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: LOGIN
2025-07-02 20:24:12,258 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:24:12,272 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:8124。
2025-07-02 20:24:12,273 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 8123) 登录。
2025-07-02 20:24:12,274 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:24:12,277 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:24:12,278 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:24:12,280 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:24:12,287 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:24:12,289 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:24:13,845 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:24:13,847 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:24:13,849 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:24:13,850 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:24:13,853 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:24:13,854 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:24:14,075 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:24:14,078 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:24:14,080 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:24:14,083 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:24:14,084 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:24:14,085 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:24:16,036 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:24:16,039 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:24:16,042 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:24:16,043 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:24:16,045 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:24:16,047 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:24:44,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:24:44,807 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:24:44,809 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:24:44,821 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:24:44,824 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:24:44,827 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:25:14,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:25:14,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:25:14,811 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:25:14,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:25:14,814 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:25:14,815 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:25:14,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:25:14,831 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:25:14,833 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:25:14,835 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:25:14,838 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:25:14,838 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:25:44,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:25:44,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:25:44,809 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:25:44,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:25:44,810 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:25:44,812 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:26:14,806 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:14,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:26:14,810 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:26:14,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:14,811 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:26:14,811 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:26:14,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:14,819 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:26:14,819 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:26:27,259 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1838) 的新连接。
2025-07-02 20:26:27,259 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1838) 启动。
2025-07-02 20:26:27,260 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1838) 的命令: REGISTER
2025-07-02 20:26:27,264 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-07-02 20:26:27,265 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-07-02 20:26:27,265 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 1838) 断开连接，用户未登录。
2025-07-02 20:26:27,266 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1838) 的连接已关闭。
2025-07-02 20:26:32,740 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的新连接。
2025-07-02 20:26:32,742 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1859) 启动。
2025-07-02 20:26:32,754 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: LOGIN
2025-07-02 20:26:32,757 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:26:32,772 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:1860。
2025-07-02 20:26:32,773 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 1859) 登录。
2025-07-02 20:26:32,775 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:32,779 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:26:32,782 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:26:32,784 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:32,788 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个所有好友信息。
2025-07-02 20:26:32,789 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-02 20:26:34,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:34,343 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:26:34,345 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:26:34,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:34,348 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个所有好友信息。
2025-07-02 20:26:34,349 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-02 20:26:34,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:34,513 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:26:34,515 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:26:34,516 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:34,517 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个所有好友信息。
2025-07-02 20:26:34,517 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-02 20:26:36,474 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:36,478 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:26:36,480 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:26:36,481 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:36,484 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个所有好友信息。
2025-07-02 20:26:36,486 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-02 20:26:44,037 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:44,039 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:26:44,041 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:26:44,042 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:44,044 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:26:44,046 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:26:45,981 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_USERS
2025-07-02 20:26:45,985 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-02 20:26:45,987 - server - INFO - SecureChatServer: 向 A 提供了所有注册用户列表。
2025-07-02 20:26:46,992 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_USERS
2025-07-02 20:26:46,994 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-02 20:26:46,995 - server - INFO - SecureChatServer: 向 A 提供了所有注册用户列表。
2025-07-02 20:26:48,168 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: ADD_FRIEND
2025-07-02 20:26:48,180 - db - INFO - DatabaseManager: 用户 3052 添加好友 3053 成功。
2025-07-02 20:26:48,181 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 3053) 为好友成功。
2025-07-02 20:26:48,182 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:48,184 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:26:48,185 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:26:51,027 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:51,029 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:26:51,030 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:26:51,031 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:51,039 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:26:51,041 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:26:51,206 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:51,207 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:26:51,207 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:26:51,208 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:51,209 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:26:51,210 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:26:55,829 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:55,831 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:26:55,832 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:26:55,833 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:55,835 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:26:55,836 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:27:04,806 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:27:04,810 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:27:04,812 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:27:04,826 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:27:04,848 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:27:04,852 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:27:21,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:27:21,812 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:27:21,813 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:27:21,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:27:21,822 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:27:21,822 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:27:34,796 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:27:34,797 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:27:34,798 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:27:34,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:27:34,806 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:27:34,807 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:27:51,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:27:51,810 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:27:51,811 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:27:51,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:27:51,814 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:27:51,816 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:28:04,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:28:04,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:28:04,812 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:28:04,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:28:04,833 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:28:04,835 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:28:21,804 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:28:21,811 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:28:21,812 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:28:21,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:28:21,821 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:28:21,823 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:28:34,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:28:34,812 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:28:34,813 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:28:34,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:28:34,817 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:28:34,818 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:28:51,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:28:51,800 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:28:51,801 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:28:51,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:28:51,802 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:28:51,803 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:29:04,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:29:04,803 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:29:04,804 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:29:04,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:29:04,816 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:29:04,818 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:29:21,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:29:21,816 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:29:21,817 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:29:21,818 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:29:21,825 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:29:21,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:29:34,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:29:34,815 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:29:34,816 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:29:34,818 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:29:34,824 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:29:34,824 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:29:51,204 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:29:51,207 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:29:51,209 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:29:51,210 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:29:51,213 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:29:51,214 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:30:13,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:30:13,800 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:30:13,801 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:30:13,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:30:13,804 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:30:13,805 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:30:21,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:30:21,805 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:30:21,806 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:30:21,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:30:21,823 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:30:21,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:30:51,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:30:51,828 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:30:51,832 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:30:51,833 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:30:51,857 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:30:51,860 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:30:55,837 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 8123) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:30:55,845 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:30:55,847 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:30:55,848 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 8123) 的连接已关闭。
2025-07-02 20:30:59,133 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 1859) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:30:59,139 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:30:59,141 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:30:59,142 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1859) 的连接已关闭。
2025-07-02 20:33:37,453 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的新连接。
2025-07-02 20:33:37,455 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1909) 启动。
2025-07-02 20:33:37,459 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: LOGIN
2025-07-02 20:33:37,490 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:33:37,505 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:1910。
2025-07-02 20:33:37,506 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 1909) 登录。
2025-07-02 20:33:37,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:37,511 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:33:37,512 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:33:37,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:37,518 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:33:37,519 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:33:39,044 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:39,047 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:33:39,048 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:33:39,049 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:39,053 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:33:39,055 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:33:39,452 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:39,453 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:33:39,455 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:33:39,458 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:39,459 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:33:39,461 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:33:41,436 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:41,438 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:33:41,439 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:33:41,440 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:41,443 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:33:41,444 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:33:49,751 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的新连接。
2025-07-02 20:33:49,752 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1981) 启动。
2025-07-02 20:33:49,754 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: LOGIN
2025-07-02 20:33:49,769 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:33:49,782 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:1982。
2025-07-02 20:33:49,785 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 1981) 登录。
2025-07-02 20:33:49,786 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:49,787 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:33:49,788 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:33:49,789 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:49,796 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:33:49,800 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:33:51,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:51,355 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:33:51,357 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:33:51,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:51,362 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:33:51,364 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:33:51,593 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:51,595 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:33:51,597 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:33:51,599 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:51,601 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:33:51,603 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:33:54,269 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:54,272 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:33:54,273 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:33:54,275 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:54,276 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:33:54,280 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:34:09,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:34:09,805 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:34:09,809 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:34:09,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:34:09,816 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:34:09,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:34:21,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:34:21,520 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:34:21,521 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:34:21,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ALL_FRIENDS
2025-07-02 20:34:21,523 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:34:21,523 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:34:39,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:34:39,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:34:39,817 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:34:39,819 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:34:39,828 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:34:39,830 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:34:51,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:34:51,805 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:34:51,806 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:34:51,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ALL_FRIENDS
2025-07-02 20:34:51,814 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:34:51,815 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:35:09,795 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:09,813 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:35:09,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:35:09,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:09,821 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:35:09,823 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:35:18,157 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 1909) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:35:18,165 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:35:18,166 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:35:18,167 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1909) 的连接已关闭。
2025-07-02 20:35:19,857 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 1981) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:35:19,868 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:35:19,869 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:35:19,870 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1981) 的连接已关闭。
2025-07-02 20:35:50,942 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的新连接。
2025-07-02 20:35:50,944 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2268) 启动。
2025-07-02 20:35:50,968 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: LOGIN
2025-07-02 20:35:50,989 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:35:51,008 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:2269。
2025-07-02 20:35:51,011 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 2268) 登录。
2025-07-02 20:35:51,013 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:51,017 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:35:51,019 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:35:51,020 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:51,029 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:35:51,031 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:35:52,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:52,819 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:35:52,820 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:35:52,821 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:52,823 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:35:52,824 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:35:53,114 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:53,117 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:35:53,118 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:35:53,120 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:53,129 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:35:53,131 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:35:55,870 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的新连接。
2025-07-02 20:35:55,871 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2284) 启动。
2025-07-02 20:35:55,872 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: LOGIN
2025-07-02 20:35:55,876 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:35:55,887 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:2285。
2025-07-02 20:35:55,888 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 2284) 登录。
2025-07-02 20:35:55,889 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:55,891 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:35:55,891 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:35:55,892 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:55,899 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:35:55,900 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:35:57,459 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:57,465 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:35:57,466 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:35:57,469 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:57,480 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:35:57,482 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:35:57,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:57,801 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:35:57,802 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:35:57,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:57,808 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:35:57,810 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:36:06,991 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:36:06,994 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:36:06,996 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:36:06,998 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:36:07,009 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:36:07,012 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:36:23,022 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:36:23,023 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:36:23,024 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:36:23,026 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:36:23,026 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:36:23,027 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:36:27,721 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:36:27,723 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:36:27,726 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:36:27,729 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:36:27,731 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:36:27,733 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:36:53,795 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:36:53,799 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:36:53,801 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:36:53,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:36:53,816 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:36:53,819 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:36:57,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:36:57,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:36:57,810 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:36:57,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:36:57,822 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:36:57,824 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:37:23,818 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:37:23,821 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:37:23,823 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:37:23,825 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:37:23,836 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:37:23,838 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:37:27,714 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:37:27,720 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:37:27,724 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:37:27,726 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:37:27,728 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:37:27,729 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:37:53,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:37:53,804 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:37:53,805 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:37:53,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:37:53,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:37:53,817 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:37:57,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:37:57,801 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:37:57,802 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:37:57,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:37:57,812 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:37:57,814 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:38:00,572 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2284) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:38:00,585 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:38:00,587 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:38:00,587 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2284) 的连接已关闭。
2025-07-02 20:38:02,108 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2268) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:38:02,110 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:38:02,111 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:38:02,111 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2268) 的连接已关闭。
2025-07-02 20:45:45,377 - __main__ - INFO - 服务器程序启动。
2025-07-02 20:45:45,377 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 20:45:45,454 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 20:45:45,468 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 20:45:45,479 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 20:45:45,488 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 20:45:45,488 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 20:45:45,489 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 20:45:45,489 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 20:46:02,066 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的新连接。
2025-07-02 20:46:02,067 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 35933) 启动。
2025-07-02 20:46:02,067 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: LOGIN
2025-07-02 20:46:02,077 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:46:02,088 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:35934。
2025-07-02 20:46:02,089 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 35933) 登录。
2025-07-02 20:46:02,089 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:02,091 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:46:02,091 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:46:02,091 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:02,097 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:46:02,104 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:46:03,818 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:03,820 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:46:03,822 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:46:03,823 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:03,827 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:46:03,829 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:46:04,141 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:04,142 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:46:04,144 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:46:04,149 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:04,151 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:46:04,152 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:46:09,837 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的新连接。
2025-07-02 20:46:09,837 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 35966) 启动。
2025-07-02 20:46:09,847 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: LOGIN
2025-07-02 20:46:09,854 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:46:09,856 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:35967。
2025-07-02 20:46:09,858 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 35966) 登录。
2025-07-02 20:46:09,859 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:09,863 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:46:09,864 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:46:09,868 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:09,870 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:46:09,870 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:46:11,403 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:11,405 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:46:11,406 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:46:11,407 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:11,408 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:46:11,408 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:46:11,651 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:11,653 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:46:11,655 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:46:11,656 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:11,657 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:46:11,658 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:46:21,182 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:21,184 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:46:21,186 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:46:21,187 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:21,188 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:46:21,189 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:46:34,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:34,813 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:46:34,815 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:46:34,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:34,826 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:46:34,828 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:46:41,584 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:41,586 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:46:41,587 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:46:41,588 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:41,596 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:46:41,597 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:47:04,796 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:47:04,798 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:47:04,799 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:47:04,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:47:04,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:47:04,809 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:47:11,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:47:11,804 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:47:11,805 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:47:11,808 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:47:11,810 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:47:11,812 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:47:34,808 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:47:34,809 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:47:34,809 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:47:34,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:47:34,819 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:47:34,821 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:47:41,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:47:41,799 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:47:41,801 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:47:41,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:47:41,813 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:47:41,815 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:48:04,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:04,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:48:04,809 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:48:04,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:04,825 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:48:04,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:48:11,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:11,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:48:11,809 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:48:11,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:11,815 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:48:11,817 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:48:21,422 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 35933) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:48:21,436 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:48:21,443 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:48:21,443 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 35933) 的连接已关闭。
2025-07-02 20:48:22,156 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 35966) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:48:22,159 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:48:22,160 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:48:22,160 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 35966) 的连接已关闭。
2025-07-02 20:48:32,498 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的新连接。
2025-07-02 20:48:32,499 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 50155) 启动。
2025-07-02 20:48:32,499 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: LOGIN
2025-07-02 20:48:32,506 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:48:32,516 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:50156。
2025-07-02 20:48:32,516 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 50155) 登录。
2025-07-02 20:48:32,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:32,520 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:48:32,520 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:48:32,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:32,521 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:48:32,522 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:48:34,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:34,810 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:48:34,811 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:48:34,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:34,812 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:48:34,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:48:35,045 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:35,046 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:48:35,047 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:48:35,048 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:35,049 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:48:35,050 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:48:39,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的新连接。
2025-07-02 20:48:39,812 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 50196) 启动。
2025-07-02 20:48:39,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: LOGIN
2025-07-02 20:48:39,814 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:48:39,816 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:50197。
2025-07-02 20:48:39,817 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 50196) 登录。
2025-07-02 20:48:39,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:39,818 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:48:39,819 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:48:39,819 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:39,820 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:48:39,821 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:48:41,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:41,818 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:48:41,820 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:48:41,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:41,821 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:48:41,822 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:48:42,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:42,339 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:48:42,341 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:48:42,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:42,351 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:48:42,353 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:48:45,404 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:45,406 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:48:45,406 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:48:45,408 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:45,409 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:48:45,410 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:49:05,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:49:05,805 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:49:05,807 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:49:05,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:49:05,830 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:49:05,831 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:49:12,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:49:12,813 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:49:12,814 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:49:12,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:49:12,836 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:49:12,837 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:49:35,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:49:35,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:49:35,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:49:35,822 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:49:35,824 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:49:35,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:49:42,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:49:42,804 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:49:42,805 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:49:42,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:49:42,812 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:49:42,815 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:50:05,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:50:05,813 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:50:05,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:50:05,819 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:50:05,829 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:50:05,829 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:50:12,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:50:12,800 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:50:12,800 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:50:12,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:50:12,808 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:50:12,810 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:50:35,804 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:50:35,806 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:50:35,807 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:50:35,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:50:35,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:50:35,815 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:50:39,912 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 50155) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:50:39,925 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:50:39,926 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:50:39,927 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 50155) 的连接已关闭。
2025-07-02 20:50:42,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:50:42,815 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:50:42,817 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:50:42,819 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:50:42,822 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:50:42,823 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:51:12,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:12,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:51:12,808 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:51:12,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:12,823 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:51:12,823 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:51:28,121 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 50196) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:51:28,126 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:51:28,126 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:51:28,126 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 50196) 的连接已关闭。
2025-07-02 20:51:45,246 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的新连接。
2025-07-02 20:51:45,247 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 39067) 启动。
2025-07-02 20:51:45,258 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: LOGIN
2025-07-02 20:51:45,268 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:51:45,278 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:39068。
2025-07-02 20:51:45,279 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 39067) 登录。
2025-07-02 20:51:45,279 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:45,282 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:51:45,284 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:51:45,285 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:45,296 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:51:45,298 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:51:47,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:47,813 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:51:47,813 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:51:47,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:47,816 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:51:47,817 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:51:47,941 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:47,943 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:51:47,944 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:51:47,945 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:47,946 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:51:47,947 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:51:50,129 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的新连接。
2025-07-02 20:51:50,129 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 39104) 启动。
2025-07-02 20:51:50,130 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: LOGIN
2025-07-02 20:51:50,131 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:51:50,133 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:39105。
2025-07-02 20:51:50,134 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 39104) 登录。
2025-07-02 20:51:50,134 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:50,135 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:51:50,135 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:51:50,135 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:50,136 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:51:50,137 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:51:51,659 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:51,661 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:51:51,661 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:51:51,662 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:51,663 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:51:51,663 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:51:51,839 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:51,840 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:51:51,841 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:51:51,842 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:51,843 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:51:51,843 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:51:55,417 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:55,419 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:51:55,420 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:51:55,433 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:55,435 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:51:55,436 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:52:18,808 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:52:18,811 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:52:18,811 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:52:18,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:52:18,820 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:52:18,822 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:52:21,782 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:52:21,785 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:52:21,785 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:52:21,786 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ALL_FRIENDS
2025-07-02 20:52:21,793 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:52:21,796 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:52:48,804 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:52:48,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:52:48,810 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:52:48,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:52:48,827 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:52:48,829 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:52:51,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:52:51,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:52:51,814 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:52:51,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ALL_FRIENDS
2025-07-02 20:52:51,823 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:52:51,825 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:52:56,544 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 39104) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:52:56,557 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:52:56,558 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:52:56,558 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 39104) 的连接已关闭。
2025-07-02 20:53:10,414 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 39067) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:53:10,431 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:53:10,433 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:53:10,433 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 39067) 的连接已关闭。
2025-07-02 20:53:25,295 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的新连接。
2025-07-02 20:53:25,296 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 39397) 启动。
2025-07-02 20:53:25,297 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: LOGIN
2025-07-02 20:53:25,301 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:53:25,313 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:39398。
2025-07-02 20:53:25,314 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 39397) 登录。
2025-07-02 20:53:25,314 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:25,317 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:53:25,317 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:53:25,318 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:25,326 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:53:25,327 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:53:27,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:27,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:53:27,819 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:53:27,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:27,836 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:53:27,837 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:53:28,040 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:28,042 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:53:28,044 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:53:28,049 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:28,051 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:53:28,053 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:53:30,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的新连接。
2025-07-02 20:53:30,345 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 39431) 启动。
2025-07-02 20:53:30,348 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: LOGIN
2025-07-02 20:53:30,351 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:53:30,362 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:39432。
2025-07-02 20:53:30,363 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 39431) 登录。
2025-07-02 20:53:30,364 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:30,366 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:53:30,367 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:53:30,368 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:30,375 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:53:30,376 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:53:31,901 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:31,902 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:53:31,902 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:53:31,903 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:31,904 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:53:31,904 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:53:32,081 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:32,082 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:53:32,083 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:53:32,085 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:32,086 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:53:32,087 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:53:37,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:37,351 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:53:37,352 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:53:37,353 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:37,354 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:53:37,354 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:53:57,984 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:57,986 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:53:57,987 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:53:57,989 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:57,991 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:53:57,993 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:54:02,023 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:54:02,025 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:54:02,027 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:54:02,028 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:54:02,031 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:54:02,033 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:54:28,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:54:28,803 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:54:28,805 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:54:28,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:54:28,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:54:28,816 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:54:32,806 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:54:32,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:54:32,814 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:54:32,822 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:54:32,834 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:54:32,837 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:54:58,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:54:58,803 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:54:58,804 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:54:58,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:54:58,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:54:58,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:55:02,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:55:02,805 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:55:02,807 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:55:02,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:55:02,813 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:55:02,815 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:03:50,112 - __main__ - INFO - 服务器程序启动。
2025-07-02 21:03:50,113 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 21:03:50,215 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 21:03:50,227 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 21:03:50,234 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 21:03:50,241 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 21:03:50,242 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 21:03:50,242 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 21:03:50,243 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 21:04:14,975 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的新连接。
2025-07-02 21:04:14,976 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 19903) 启动。
2025-07-02 21:04:14,977 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: LOGIN
2025-07-02 21:04:14,990 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 21:04:15,001 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:19904。
2025-07-02 21:04:15,002 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 19903) 登录。
2025-07-02 21:04:15,002 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:15,005 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:04:15,006 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:04:15,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:15,013 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:04:15,013 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:04:16,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:16,824 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:04:16,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:04:16,827 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:16,829 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:04:16,832 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:04:17,058 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:17,059 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:04:17,060 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:04:17,062 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:17,063 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:04:17,064 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:04:19,220 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的新连接。
2025-07-02 21:04:19,221 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 19931) 启动。
2025-07-02 21:04:19,223 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: LOGIN
2025-07-02 21:04:19,228 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 21:04:19,230 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:19932。
2025-07-02 21:04:19,231 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 19931) 登录。
2025-07-02 21:04:19,232 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:19,233 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:04:19,234 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:04:19,234 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:19,235 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:04:19,235 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:04:20,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:20,815 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:04:20,816 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:04:20,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:20,818 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:04:20,819 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:04:20,971 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:20,973 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:04:20,973 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:04:20,976 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:20,977 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:04:20,978 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:04:46,956 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:46,959 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:04:46,960 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:04:46,961 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:46,973 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:04:46,974 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:04:51,823 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:51,825 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:04:51,827 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:04:51,835 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:51,837 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:04:51,839 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:05:01,423 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:01,424 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:05:01,425 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:05:01,429 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:01,431 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:05:01,432 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:05:01,658 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:01,659 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:05:01,660 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:05:01,662 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:01,665 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:05:01,665 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:05:02,708 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:02,709 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:05:02,710 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:05:02,710 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:02,712 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:05:02,714 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:05:02,848 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:02,850 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:05:02,850 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:05:02,852 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:02,852 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:05:02,853 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:05:31,577 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:31,581 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:05:31,581 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:05:31,582 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:31,590 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:05:31,592 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:05:33,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:33,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:05:33,813 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:05:33,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:33,830 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:05:33,832 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:06:01,591 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:06:01,594 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:06:01,595 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:06:01,597 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:06:01,598 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:06:01,600 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:06:03,794 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:06:03,796 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:06:03,797 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:06:03,800 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:06:03,801 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:06:03,801 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:06:31,594 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:06:31,610 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:06:31,612 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:06:31,613 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:06:31,629 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:06:31,632 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:06:33,796 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:06:33,799 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:06:33,800 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:06:33,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:06:33,810 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:06:33,811 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:07:01,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:07:01,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:07:01,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:07:01,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:07:01,833 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:07:01,834 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:07:03,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:07:03,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:07:03,808 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:07:03,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:07:03,810 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:07:03,811 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:07:31,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:07:31,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:07:31,816 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:07:31,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:07:31,833 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:07:31,835 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:07:33,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:07:33,818 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:07:33,820 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:07:33,827 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:07:33,830 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:07:33,831 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:08:01,590 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:08:01,592 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:08:01,594 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:08:01,596 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:08:01,605 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:08:01,606 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:08:03,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:08:03,809 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:08:03,810 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:08:03,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:08:03,817 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:08:03,818 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:08:31,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:08:31,809 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:08:31,811 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:08:31,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:08:31,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:08:31,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:09:01,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:01,809 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:09:01,812 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:09:01,835 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:01,851 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:09:01,853 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:09:13,804 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:13,805 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:09:13,806 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:09:13,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:13,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:09:13,811 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:09:17,966 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 19903) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:09:17,972 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 21:09:17,972 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 21:09:17,973 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 19903) 的连接已关闭。
2025-07-02 21:09:20,360 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 19931) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:09:20,381 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 21:09:20,382 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 21:09:20,382 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 19931) 的连接已关闭。
2025-07-02 21:09:28,434 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的新连接。
2025-07-02 21:09:28,436 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 42542) 启动。
2025-07-02 21:09:28,437 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: LOGIN
2025-07-02 21:09:28,441 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 21:09:28,450 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:42543。
2025-07-02 21:09:28,451 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 42542) 登录。
2025-07-02 21:09:28,452 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:28,454 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:09:28,456 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:09:28,456 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:28,457 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:09:28,458 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:09:30,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:30,814 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:09:30,814 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:09:30,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:30,816 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:09:30,816 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:09:31,143 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:31,144 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:09:31,146 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:09:31,148 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:31,150 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:09:31,152 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:09:35,356 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的新连接。
2025-07-02 21:09:35,357 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 42586) 启动。
2025-07-02 21:09:35,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: LOGIN
2025-07-02 21:09:35,365 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 21:09:35,368 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:42587。
2025-07-02 21:09:35,369 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 42586) 登录。
2025-07-02 21:09:35,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:35,371 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:09:35,371 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:09:35,372 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:35,373 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:09:35,373 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:09:36,917 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:36,919 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:09:36,921 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:09:36,922 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:36,924 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:09:36,926 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:09:37,072 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:37,073 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:09:37,074 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:09:37,075 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:37,075 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:09:37,076 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:09:44,621 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:44,624 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:09:44,624 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:09:44,624 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:44,625 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:09:44,626 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:10:01,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:10:01,832 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:10:01,837 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:10:01,838 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:10:01,848 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:10:01,849 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:10:07,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:10:07,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:10:07,808 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:10:07,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:10:07,820 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:10:07,822 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:10:31,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:10:31,803 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:10:31,804 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:10:31,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:10:31,806 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:10:31,806 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:10:37,800 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:10:37,805 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:10:37,805 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:10:37,806 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:10:37,806 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:10:37,807 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:11:01,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:11:01,809 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:11:01,810 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:11:01,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:11:01,824 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:11:01,825 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:11:07,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:11:07,800 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:11:07,801 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:11:07,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:11:07,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:11:07,812 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:11:31,800 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:11:31,804 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:11:31,805 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:11:31,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:11:31,825 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:11:31,827 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:11:37,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:11:37,804 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:11:37,806 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:11:37,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:11:37,809 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:11:37,811 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:12:01,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:12:01,812 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:12:01,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:12:01,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:12:01,828 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:12:01,829 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:12:07,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:12:07,805 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:12:07,806 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:12:07,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:12:07,817 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:12:07,818 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:12:31,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:12:31,812 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:12:31,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:12:31,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:12:31,823 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:12:31,824 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:12:37,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:12:37,801 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:12:37,802 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:12:37,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:12:37,809 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:12:37,810 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:13:13,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:13:13,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:13:13,817 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:13:13,819 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:13:13,823 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:13:13,854 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:13:13,854 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:13:13,855 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:13:13,856 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:13:13,856 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:13:13,859 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:13:13,859 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:13:34,760 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:13:34,782 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:13:34,785 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:13:34,787 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:13:34,812 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:13:34,821 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:01,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:01,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:01,819 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:01,830 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:01,832 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:01,835 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:13,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:13,818 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:14:13,821 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:14:13,828 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:13,843 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:14:13,845 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:14:30,940 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:30,944 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:30,946 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:30,946 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:30,961 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:30,962 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:35,213 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:35,217 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:35,218 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:35,220 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:35,222 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:35,225 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:35,492 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:35,494 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:35,495 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:35,497 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:35,498 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:35,500 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:44,936 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:44,937 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:44,939 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:44,941 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:44,943 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:44,944 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:45,088 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:45,090 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:45,091 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:45,093 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:45,095 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:45,096 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:15:13,831 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:15:13,836 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:15:13,838 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:15:13,860 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:15:13,864 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:15:13,869 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:15:15,062 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:15:15,067 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:15:15,070 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:15:15,075 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:15:15,079 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:15:15,081 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:15:45,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:15:45,814 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:15:45,816 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:15:45,821 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:15:45,829 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:15:45,830 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:15:53,113 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 42542) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:15:53,119 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 21:15:53,120 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 21:15:53,120 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 42542) 的连接已关闭。
2025-07-02 21:16:13,833 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:16:13,862 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 21:16:13,866 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 21:16:13,867 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:16:13,869 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:16:13,871 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:16:53,013 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 42586) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:16:53,019 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 21:16:53,020 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 21:16:53,021 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 42586) 的连接已关闭。
2025-07-02 21:17:02,506 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的新连接。
2025-07-02 21:17:02,506 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 41806) 启动。
2025-07-02 21:17:02,506 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: LOGIN
2025-07-02 21:17:02,509 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 21:17:02,521 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:41807。
2025-07-02 21:17:02,522 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 41806) 登录。
2025-07-02 21:17:02,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:02,523 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:17:02,523 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:17:02,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:02,530 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:17:02,531 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:17:04,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:04,814 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:17:04,816 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:17:04,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:04,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:17:04,817 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:17:04,936 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:04,938 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:17:04,940 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:17:04,940 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:04,942 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:17:04,943 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:17:09,317 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的新连接。
2025-07-02 21:17:09,317 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 41852) 启动。
2025-07-02 21:17:09,317 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: LOGIN
2025-07-02 21:17:09,318 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 21:17:09,319 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:41853。
2025-07-02 21:17:09,319 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 41852) 登录。
2025-07-02 21:17:09,320 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:09,320 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:17:09,322 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:17:09,323 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:09,324 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:17:09,324 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:17:10,853 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:10,854 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:17:10,855 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:17:10,856 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:10,856 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:17:10,857 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:17:10,991 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:10,992 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:17:10,992 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:17:10,992 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:10,993 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:17:10,994 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:17:15,941 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:15,942 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:17:15,942 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:17:15,943 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:15,944 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:17:15,945 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:17:35,150 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:35,153 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:17:35,156 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:17:35,164 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:35,170 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:17:35,172 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:17:41,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:41,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:17:41,809 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:17:41,841 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:41,865 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:17:41,867 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:17:56,243 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 41806) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:17:56,254 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 21:17:56,255 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 21:17:56,257 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 41806) 的连接已关闭。
2025-07-02 21:17:57,154 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 41852) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:17:57,157 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 21:17:57,157 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 21:17:57,158 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 41852) 的连接已关闭。
2025-07-02 23:24:48,606 - __main__ - INFO - 服务器程序启动。
2025-07-02 23:24:48,607 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 23:24:48,772 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 23:24:48,789 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 23:24:48,799 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 23:24:48,809 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 23:24:48,810 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 23:24:48,810 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 23:24:48,812 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 23:25:30,485 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4760) 的新连接。
2025-07-02 23:25:30,486 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4760) 启动。
2025-07-02 23:25:30,487 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4760) 的命令: REGISTER
2025-07-02 23:25:30,511 - db - INFO - DatabaseManager: 用户 '1' 注册成功。
2025-07-02 23:25:30,512 - server - INFO - SecureChatServer: 用户 1 已注册。
2025-07-02 23:25:30,514 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4760) 断开连接，用户未登录。
2025-07-02 23:25:30,514 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4760) 的连接已关闭。
2025-07-02 23:25:35,667 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的新连接。
2025-07-02 23:25:35,668 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4770) 启动。
2025-07-02 23:25:35,686 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: LOGIN
2025-07-02 23:25:35,699 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-02 23:25:35,722 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:4771。
2025-07-02 23:25:35,723 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 4770) 登录。
2025-07-02 23:25:35,723 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:35,735 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:25:35,737 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:25:35,738 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:35,744 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:25:35,745 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:25:37,352 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:37,354 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:25:37,354 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:25:37,355 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:37,355 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:25:37,356 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:25:38,712 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:38,714 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:25:38,714 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:25:38,715 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:38,715 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:25:38,716 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:25:40,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:40,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:25:40,341 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:25:40,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:40,343 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:25:40,344 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:25:43,448 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4787) 的新连接。
2025-07-02 23:25:43,450 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4787) 启动。
2025-07-02 23:25:43,450 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4787) 的命令: REGISTER
2025-07-02 23:25:43,460 - db - INFO - DatabaseManager: 用户 '2' 注册成功。
2025-07-02 23:25:43,460 - server - INFO - SecureChatServer: 用户 2 已注册。
2025-07-02 23:25:43,460 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4787) 断开连接，用户未登录。
2025-07-02 23:25:43,460 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4787) 的连接已关闭。
2025-07-02 23:25:50,449 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的新连接。
2025-07-02 23:25:50,450 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4802) 启动。
2025-07-02 23:25:50,474 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: LOGIN
2025-07-02 23:25:50,476 - db - INFO - DatabaseManager: 用户 '2' 认证成功。
2025-07-02 23:25:50,477 - db - INFO - DatabaseManager: 用户 1022 在线状态更新成功: 10.21.139.34:4803。
2025-07-02 23:25:50,478 - server - INFO - SecureChatServer: 用户 2 (ID: 1022) 从 ('127.0.0.1', 4802) 登录。
2025-07-02 23:25:50,479 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:50,480 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:25:50,481 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:25:50,482 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:50,482 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:25:50,483 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:25:52,016 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:52,017 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:25:52,018 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:25:52,018 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:52,019 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:25:52,019 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:25:52,279 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:52,280 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:25:52,281 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:25:52,281 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:52,282 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:25:52,284 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:25:54,140 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:54,142 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:25:54,143 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:25:54,144 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:54,146 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:25:54,147 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:26:08,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:08,350 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:26:08,351 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:26:08,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:26:08,356 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:26:08,357 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:26:22,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:22,340 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:26:22,340 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:26:22,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:26:22,345 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:26:22,346 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:26:38,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:38,347 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:26:38,348 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:26:38,348 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:38,349 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:26:38,350 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:26:38,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:26:38,357 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:26:38,358 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:26:52,135 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:52,147 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:26:52,148 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:26:52,148 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:52,150 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:26:52,150 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:26:52,151 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:26:52,155 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:26:52,157 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:26:59,965 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5246) 的新连接。
2025-07-02 23:26:59,966 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5246) 启动。
2025-07-02 23:26:59,973 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5246) 的命令: LOGIN
2025-07-02 23:26:59,975 - db - INFO - DatabaseManager: 用户 '2' 认证成功。
2025-07-02 23:26:59,976 - server - WARNING - SecureChatServer: 用户 2 尝试重复登录。
2025-07-02 23:26:59,976 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 5246) 断开连接，用户未登录。
2025-07-02 23:26:59,976 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5246) 的连接已关闭。
2025-07-02 23:27:07,024 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4802) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:27:07,038 - db - INFO - DatabaseManager: 用户 1022 在线状态已清除。
2025-07-02 23:27:07,039 - server - INFO - SecureChatServer: 已清理用户 2 (ID: 1022) 的会话并更新离线状态。
2025-07-02 23:27:07,039 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4802) 的连接已关闭。
2025-07-02 23:27:13,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的新连接。
2025-07-02 23:27:13,347 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5285) 启动。
2025-07-02 23:27:13,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: LOGIN
2025-07-02 23:27:13,361 - db - INFO - DatabaseManager: 用户 '2' 认证成功。
2025-07-02 23:27:13,377 - db - INFO - DatabaseManager: 用户 1022 在线状态更新成功: 10.21.139.34:5286。
2025-07-02 23:27:13,378 - server - INFO - SecureChatServer: 用户 2 (ID: 1022) 从 ('127.0.0.1', 5285) 登录。
2025-07-02 23:27:13,378 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:13,388 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:27:13,388 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:27:13,389 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:13,395 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:27:13,396 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:27:14,930 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:14,931 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:27:14,931 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:27:14,932 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:14,932 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:27:14,933 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:27:15,664 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:15,665 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:27:15,665 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:27:15,666 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:15,667 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:27:15,667 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:27:17,165 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:17,166 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:27:17,167 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:27:17,168 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:17,169 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:27:17,169 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:27:25,056 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4770) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:27:25,060 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-02 23:27:25,060 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-02 23:27:25,061 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4770) 的连接已关闭。
2025-07-02 23:27:31,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的新连接。
2025-07-02 23:27:31,510 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5351) 启动。
2025-07-02 23:27:31,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: LOGIN
2025-07-02 23:27:31,513 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-02 23:27:31,522 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:5352。
2025-07-02 23:27:31,523 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 5351) 登录。
2025-07-02 23:27:31,523 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:31,524 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:27:31,524 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:27:31,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:31,526 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:27:31,527 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:27:33,051 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:33,053 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:27:33,053 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:27:33,053 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:33,054 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:27:33,054 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:27:33,498 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:33,500 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:27:33,500 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:27:33,501 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:33,501 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:27:33,502 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:27:35,279 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:35,280 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:27:35,281 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:27:35,282 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:35,283 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:27:35,283 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:27:45,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:45,360 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:27:45,361 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:27:45,362 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:45,367 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:27:45,369 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:27:46,133 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_USERS
2025-07-02 23:27:46,142 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-02 23:27:46,143 - server - INFO - SecureChatServer: 向 1 提供了所有注册用户列表。
2025-07-02 23:27:46,777 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: ADD_FRIEND
2025-07-02 23:27:46,796 - db - INFO - DatabaseManager: 用户 1021 添加好友 1022 成功。
2025-07-02 23:27:46,797 - server - INFO - SecureChatServer: 用户 1 添加 2 (ID: 1022) 为好友成功。
2025-07-02 23:27:46,798 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:46,805 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-02 23:27:46,806 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-02 23:27:46,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:46,811 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:27:46,812 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:27:49,703 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:49,718 - db - INFO - DatabaseManager: 已为用户 1022 检索到 1 个在线好友信息。
2025-07-02 23:27:49,719 - server - INFO - SecureChatServer: 向 2 提供了 1 个在线好友列表。
2025-07-02 23:27:49,720 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:49,726 - db - INFO - DatabaseManager: 已为用户 1022 检索到 1 个所有好友信息。
2025-07-02 23:27:49,727 - server - INFO - SecureChatServer: 向 2 提供了 1 个所有好友列表。
2025-07-02 23:28:03,280 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:28:03,282 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-02 23:28:03,283 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-02 23:28:03,285 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:28:03,286 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:28:03,287 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:28:06,463 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 5351) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:28:06,467 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-02 23:28:06,468 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-02 23:28:06,469 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5351) 的连接已关闭。
2025-07-02 23:28:07,463 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 5285) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:28:07,486 - db - INFO - DatabaseManager: 用户 1022 在线状态已清除。
2025-07-02 23:28:07,486 - server - INFO - SecureChatServer: 已清理用户 2 (ID: 1022) 的会话并更新离线状态。
2025-07-02 23:28:07,486 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5285) 的连接已关闭。
2025-07-02 23:36:25,922 - __main__ - INFO - 服务器程序启动。
2025-07-02 23:36:25,923 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 23:36:25,993 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 23:36:26,005 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 23:36:26,013 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 23:36:26,021 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 23:36:26,022 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 23:36:26,023 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 23:36:26,023 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 23:36:31,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的新连接。
2025-07-02 23:36:31,333 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 7034) 启动。
2025-07-02 23:36:31,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: LOGIN
2025-07-02 23:36:31,348 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-02 23:36:31,357 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:7035。
2025-07-02 23:36:31,358 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 7034) 登录。
2025-07-02 23:36:31,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:36:31,366 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:36:31,367 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:36:31,368 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:36:31,374 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:36:31,375 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:36:32,909 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:36:32,915 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:36:32,916 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:36:32,917 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:36:32,925 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:36:32,926 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:36:33,168 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:36:33,174 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:36:33,175 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:36:33,176 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:36:33,188 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:36:33,188 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:37:03,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:37:03,338 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:37:03,338 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:37:03,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:37:03,350 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:37:03,351 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:37:33,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:37:33,352 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:37:33,352 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:37:33,352 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:37:33,353 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:37:33,354 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:38:03,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:38:03,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:38:03,349 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:38:03,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:38:03,398 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:38:03,399 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:38:33,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:38:33,342 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:38:33,342 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:38:33,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:38:33,351 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:38:33,353 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:39:03,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:39:03,339 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:39:03,340 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:39:03,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:39:03,345 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:39:03,346 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:39:33,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:39:33,356 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:39:33,358 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:39:33,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:39:33,368 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:39:33,368 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:43:45,145 - __main__ - INFO - 服务器程序启动。
2025-07-02 23:43:45,146 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 23:43:45,233 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 23:43:45,248 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 23:43:45,256 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 23:43:45,264 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 23:43:45,264 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 23:43:45,265 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 23:43:45,265 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 23:43:52,724 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的新连接。
2025-07-02 23:43:52,725 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 8391) 启动。
2025-07-02 23:43:52,725 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: LOGIN
2025-07-02 23:43:52,736 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-02 23:43:52,747 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:8392。
2025-07-02 23:43:52,747 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 8391) 登录。
2025-07-02 23:43:52,748 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:43:52,751 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:43:52,752 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:43:52,753 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ALL_FRIENDS
2025-07-02 23:43:52,761 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:43:52,762 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:43:54,291 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:43:54,293 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:43:54,299 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:43:54,301 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ALL_FRIENDS
2025-07-02 23:43:54,302 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:43:54,302 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:43:54,560 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:43:54,561 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:43:54,562 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:43:54,563 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ALL_FRIENDS
2025-07-02 23:43:54,564 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:43:54,564 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:44:14,370 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 8391) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:44:14,384 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-02 23:44:14,384 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-02 23:44:14,385 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 8391) 的连接已关闭。
2025-07-02 23:44:20,547 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的新连接。
2025-07-02 23:44:20,548 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 8490) 启动。
2025-07-02 23:44:20,548 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: LOGIN
2025-07-02 23:44:20,556 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-02 23:44:20,563 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:8491。
2025-07-02 23:44:20,564 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 8490) 登录。
2025-07-02 23:44:20,565 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:44:20,567 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:44:20,568 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:44:20,569 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:44:20,575 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:44:20,575 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:44:22,097 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:44:22,098 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:44:22,099 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:44:22,100 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:44:22,101 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:44:22,102 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:44:22,823 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:44:22,825 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:44:22,826 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:44:22,826 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:44:22,827 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:44:22,828 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:44:52,274 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:44:52,284 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:44:52,286 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:44:52,287 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:44:52,295 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:44:52,295 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:45:22,276 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:45:22,282 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:45:22,283 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:45:22,283 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:45:22,295 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:45:22,295 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:45:52,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:45:52,343 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:45:52,343 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:45:52,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:45:52,351 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:45:52,352 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:45:55,286 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 8490) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:45:55,297 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-02 23:45:55,298 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-02 23:45:55,298 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 8490) 的连接已关闭。
2025-07-03 00:06:00,722 - __main__ - INFO - 服务器程序启动。
2025-07-03 00:06:00,722 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-03 00:06:00,809 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-03 00:06:00,828 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-03 00:06:00,838 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-03 00:06:00,847 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-03 00:06:00,848 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-03 00:06:00,849 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-03 00:06:00,849 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-03 00:06:10,572 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的新连接。
2025-07-03 00:06:10,572 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 12543) 启动。
2025-07-03 00:06:10,573 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: LOGIN
2025-07-03 00:06:10,592 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 00:06:10,604 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:12544。
2025-07-03 00:06:10,606 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 12543) 登录。
2025-07-03 00:06:10,606 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:06:10,608 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:06:10,610 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:06:10,611 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: GET_ALL_FRIENDS
2025-07-03 00:06:10,615 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:06:10,616 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:06:12,153 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:06:12,160 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:06:12,161 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:06:12,161 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: GET_ALL_FRIENDS
2025-07-03 00:06:12,172 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:06:12,174 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:06:12,404 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:06:12,408 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:06:12,409 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:06:12,410 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: GET_ALL_FRIENDS
2025-07-03 00:06:12,416 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:06:12,417 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:06:42,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:06:42,349 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:06:42,350 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:06:42,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: GET_ALL_FRIENDS
2025-07-03 00:06:42,359 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:06:42,359 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:07:12,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:07:12,355 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:07:12,356 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:07:12,357 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12543) 的命令: GET_ALL_FRIENDS
2025-07-03 00:07:12,364 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:07:12,364 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:07:17,202 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 12543) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 00:07:17,215 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 00:07:17,216 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 00:07:17,216 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 12543) 的连接已关闭。
2025-07-03 00:15:45,470 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的新连接。
2025-07-03 00:15:45,471 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 14534) 启动。
2025-07-03 00:15:45,493 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: LOGIN
2025-07-03 00:15:45,516 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 00:15:45,525 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:14535。
2025-07-03 00:15:45,526 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 14534) 登录。
2025-07-03 00:15:45,527 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:15:45,530 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:15:45,530 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:15:45,531 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:15:45,538 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:15:45,539 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:15:47,068 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:15:47,069 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:15:47,070 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:15:47,070 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:15:47,071 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:15:47,071 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:15:47,331 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:15:47,332 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:15:47,333 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:15:47,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:15:47,335 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:15:47,336 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:15:53,900 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: REMOVE_FRIEND
2025-07-03 00:15:53,915 - db - INFO - DatabaseManager: 用户 1021 成功移除好友 1022。
2025-07-03 00:15:53,915 - server - INFO - SecureChatServer: 用户 1 成功移除了 2 (ID: 1022)。
2025-07-03 00:15:53,917 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:15:53,918 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:15:53,919 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:15:55,691 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:15:55,692 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:15:55,693 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:15:55,693 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:15:55,694 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-03 00:15:55,694 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-03 00:16:05,657 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_USERS
2025-07-03 00:16:05,661 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-03 00:16:05,662 - server - INFO - SecureChatServer: 向 1 提供了所有注册用户列表。
2025-07-03 00:16:06,167 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: ADD_FRIEND
2025-07-03 00:16:06,176 - db - INFO - DatabaseManager: 用户 1021 添加好友 1022 成功。
2025-07-03 00:16:06,177 - server - INFO - SecureChatServer: 用户 1 添加 2 (ID: 1022) 为好友成功。
2025-07-03 00:16:06,177 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:16:06,185 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:16:06,187 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:16:06,187 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:16:06,199 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:16:06,200 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:16:07,754 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:16:07,756 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:16:07,756 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:16:07,757 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:16:07,758 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:16:07,758 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:16:17,166 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:16:17,168 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:16:17,169 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:16:17,170 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:16:17,171 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:16:17,173 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:16:47,173 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:16:47,181 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:16:47,183 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:16:47,184 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:16:47,191 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:16:47,192 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:17:17,177 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:17:17,185 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:17:17,186 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:17:17,187 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:17:17,193 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:17:17,194 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:17:47,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:17:47,350 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:17:47,350 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:17:47,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:17:47,359 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:17:47,360 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:18:17,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:18:17,338 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:18:17,339 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:18:17,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:18:17,346 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:18:17,347 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:18:47,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ONLINE_FRIENDS
2025-07-03 00:18:47,343 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 00:18:47,343 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 00:18:47,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14534) 的命令: GET_ALL_FRIENDS
2025-07-03 00:18:47,350 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 00:18:47,352 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 00:18:52,033 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 14534) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 00:18:52,046 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 00:18:52,047 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 00:18:52,047 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 14534) 的连接已关闭。
2025-07-03 06:32:59,445 - __main__ - INFO - 服务器程序启动。
2025-07-03 06:32:59,445 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-03 06:32:59,647 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-03 06:32:59,675 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-03 06:32:59,686 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-03 06:32:59,698 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-03 06:32:59,698 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-03 06:32:59,699 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-03 06:32:59,700 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-03 06:33:18,288 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的新连接。
2025-07-03 06:33:18,289 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9440) 启动。
2025-07-03 06:33:18,290 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: LOGIN
2025-07-03 06:33:18,302 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 06:33:18,317 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:9441。
2025-07-03 06:33:18,318 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 9440) 登录。
2025-07-03 06:33:18,319 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:33:18,322 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:33:18,323 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:33:18,323 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: GET_ALL_FRIENDS
2025-07-03 06:33:18,329 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 06:33:18,330 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 06:33:19,861 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:33:19,863 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:33:19,863 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:33:19,864 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: GET_ALL_FRIENDS
2025-07-03 06:33:19,865 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 06:33:19,865 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 06:33:20,096 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:33:20,098 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:33:20,099 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:33:20,099 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: GET_ALL_FRIENDS
2025-07-03 06:33:20,100 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 06:33:20,101 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 06:33:49,957 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:33:49,987 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:33:49,988 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:33:49,990 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: GET_ALL_FRIENDS
2025-07-03 06:33:50,001 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 06:33:50,002 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 06:34:20,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:34:20,345 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:34:20,345 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:34:20,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9440) 的命令: GET_ALL_FRIENDS
2025-07-03 06:34:20,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 06:34:20,349 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 06:34:23,573 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 9440) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 06:34:23,579 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 06:34:23,579 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 06:34:23,580 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9440) 的连接已关闭。
2025-07-03 06:36:03,993 - __main__ - INFO - 服务器程序启动。
2025-07-03 06:36:03,994 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-03 06:36:04,160 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-03 06:36:04,188 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-03 06:36:04,196 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-03 06:36:04,205 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-03 06:36:04,206 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-03 06:36:04,207 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-03 06:36:04,208 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-03 06:36:21,749 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的新连接。
2025-07-03 06:36:21,749 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9888) 启动。
2025-07-03 06:36:21,750 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: LOGIN
2025-07-03 06:36:21,763 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 06:36:21,781 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:9889。
2025-07-03 06:36:21,782 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 9888) 登录。
2025-07-03 06:36:21,783 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:36:21,787 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:36:21,788 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:36:21,789 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:36:21,796 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 06:36:21,797 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 06:36:23,317 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:36:23,319 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:36:23,320 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:36:23,320 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:36:23,321 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 06:36:23,321 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 06:36:23,530 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:36:23,532 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:36:23,533 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:36:23,533 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:36:23,535 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 06:36:23,536 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 06:36:54,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:36:54,341 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:36:54,342 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:36:54,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:36:54,346 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 06:36:54,346 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 06:37:03,211 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9965) 的新连接。
2025-07-03 06:37:03,212 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9965) 启动。
2025-07-03 06:37:03,212 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9965) 的命令: REGISTER
2025-07-03 06:37:03,243 - db - INFO - DatabaseManager: 用户 '3' 注册成功。
2025-07-03 06:37:03,244 - server - INFO - SecureChatServer: 用户 3 已注册。
2025-07-03 06:37:03,245 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 9965) 断开连接，用户未登录。
2025-07-03 06:37:03,245 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9965) 的连接已关闭。
2025-07-03 06:37:11,434 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的新连接。
2025-07-03 06:37:11,435 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9975) 启动。
2025-07-03 06:37:11,436 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: LOGIN
2025-07-03 06:37:11,459 - db - INFO - DatabaseManager: 用户 '3' 认证成功。
2025-07-03 06:37:11,477 - db - INFO - DatabaseManager: 用户 1023 在线状态更新成功: 10.21.139.34:9976。
2025-07-03 06:37:11,478 - server - INFO - SecureChatServer: 用户 3 (ID: 1023) 从 ('127.0.0.1', 9975) 登录。
2025-07-03 06:37:11,479 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:37:11,482 - db - INFO - DatabaseManager: 已为用户 1023 检索到 0 个在线好友信息。
2025-07-03 06:37:11,483 - server - INFO - SecureChatServer: 向 3 提供了 0 个在线好友列表。
2025-07-03 06:37:11,483 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:37:11,490 - db - INFO - DatabaseManager: 已为用户 1023 检索到 0 个所有好友信息。
2025-07-03 06:37:11,491 - server - INFO - SecureChatServer: 向 3 提供了 0 个所有好友列表。
2025-07-03 06:37:13,017 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:37:13,018 - db - INFO - DatabaseManager: 已为用户 1023 检索到 0 个在线好友信息。
2025-07-03 06:37:13,019 - server - INFO - SecureChatServer: 向 3 提供了 0 个在线好友列表。
2025-07-03 06:37:13,020 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:37:13,020 - db - INFO - DatabaseManager: 已为用户 1023 检索到 0 个所有好友信息。
2025-07-03 06:37:13,021 - server - INFO - SecureChatServer: 向 3 提供了 0 个所有好友列表。
2025-07-03 06:37:13,244 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:37:13,245 - db - INFO - DatabaseManager: 已为用户 1023 检索到 0 个在线好友信息。
2025-07-03 06:37:13,246 - server - INFO - SecureChatServer: 向 3 提供了 0 个在线好友列表。
2025-07-03 06:37:13,246 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:37:13,247 - db - INFO - DatabaseManager: 已为用户 1023 检索到 0 个所有好友信息。
2025-07-03 06:37:13,248 - server - INFO - SecureChatServer: 向 3 提供了 0 个所有好友列表。
2025-07-03 06:37:15,105 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:37:15,106 - db - INFO - DatabaseManager: 已为用户 1023 检索到 0 个在线好友信息。
2025-07-03 06:37:15,107 - server - INFO - SecureChatServer: 向 3 提供了 0 个在线好友列表。
2025-07-03 06:37:15,108 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:37:15,108 - db - INFO - DatabaseManager: 已为用户 1023 检索到 0 个所有好友信息。
2025-07-03 06:37:15,109 - server - INFO - SecureChatServer: 向 3 提供了 0 个所有好友列表。
2025-07-03 06:37:24,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:37:24,343 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:37:24,344 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:37:24,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:37:24,352 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-03 06:37:24,353 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-03 06:37:24,641 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_USERS
2025-07-03 06:37:24,644 - db - INFO - DatabaseManager: 已检索到所有 3 个注册用户信息。
2025-07-03 06:37:24,644 - server - INFO - SecureChatServer: 向 3 提供了所有注册用户列表。
2025-07-03 06:37:26,378 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: ADD_FRIEND
2025-07-03 06:37:26,390 - db - INFO - DatabaseManager: 用户 1021 添加好友 1023 成功。
2025-07-03 06:37:26,391 - server - INFO - SecureChatServer: 用户 3 添加 1 (ID: 1021) 为好友成功。
2025-07-03 06:37:26,391 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:37:26,393 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个在线好友信息。
2025-07-03 06:37:26,394 - server - INFO - SecureChatServer: 向 3 提供了 1 个在线好友列表。
2025-07-03 06:37:26,395 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:37:26,396 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个所有好友信息。
2025-07-03 06:37:26,397 - server - INFO - SecureChatServer: 向 3 提供了 1 个所有好友列表。
2025-07-03 06:37:28,392 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:37:28,393 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个在线好友信息。
2025-07-03 06:37:28,394 - server - INFO - SecureChatServer: 向 3 提供了 1 个在线好友列表。
2025-07-03 06:37:28,395 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:37:28,397 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个所有好友信息。
2025-07-03 06:37:28,398 - server - INFO - SecureChatServer: 向 3 提供了 1 个所有好友列表。
2025-07-03 06:37:33,398 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:37:33,400 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 06:37:33,400 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 06:37:33,401 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:37:33,402 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:37:33,403 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:37:43,110 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:37:43,111 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个在线好友信息。
2025-07-03 06:37:43,112 - server - INFO - SecureChatServer: 向 3 提供了 1 个在线好友列表。
2025-07-03 06:37:43,113 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:37:43,114 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个所有好友信息。
2025-07-03 06:37:43,115 - server - INFO - SecureChatServer: 向 3 提供了 1 个所有好友列表。
2025-07-03 06:37:54,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:37:54,336 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 06:37:54,337 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 06:37:54,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:37:54,341 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:37:54,342 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:38:13,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:38:13,362 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个在线好友信息。
2025-07-03 06:38:13,363 - server - INFO - SecureChatServer: 向 3 提供了 1 个在线好友列表。
2025-07-03 06:38:13,364 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:38:13,376 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个所有好友信息。
2025-07-03 06:38:13,377 - server - INFO - SecureChatServer: 向 3 提供了 1 个所有好友列表。
2025-07-03 06:38:24,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:38:24,355 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 06:38:24,356 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 06:38:24,356 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:38:24,357 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:38:24,358 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:38:43,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:38:43,336 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个在线好友信息。
2025-07-03 06:38:43,337 - server - INFO - SecureChatServer: 向 3 提供了 1 个在线好友列表。
2025-07-03 06:38:43,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:38:43,339 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个所有好友信息。
2025-07-03 06:38:43,339 - server - INFO - SecureChatServer: 向 3 提供了 1 个所有好友列表。
2025-07-03 06:38:54,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:38:54,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 06:38:54,342 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 06:38:54,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:38:54,344 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:38:54,345 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:39:13,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:39:13,366 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个在线好友信息。
2025-07-03 06:39:13,367 - server - INFO - SecureChatServer: 向 3 提供了 1 个在线好友列表。
2025-07-03 06:39:13,368 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:39:13,381 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个所有好友信息。
2025-07-03 06:39:13,381 - server - INFO - SecureChatServer: 向 3 提供了 1 个所有好友列表。
2025-07-03 06:39:24,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:39:24,358 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 06:39:24,359 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 06:39:24,360 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:39:24,374 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:39:24,374 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:39:43,331 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:39:43,333 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个在线好友信息。
2025-07-03 06:39:43,333 - server - INFO - SecureChatServer: 向 3 提供了 1 个在线好友列表。
2025-07-03 06:39:43,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:39:43,336 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个所有好友信息。
2025-07-03 06:39:43,337 - server - INFO - SecureChatServer: 向 3 提供了 1 个所有好友列表。
2025-07-03 06:40:05,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:40:05,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 06:40:05,341 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 06:40:05,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:40:05,341 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:40:05,343 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:40:13,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:40:13,348 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个在线好友信息。
2025-07-03 06:40:13,348 - server - INFO - SecureChatServer: 向 3 提供了 1 个在线好友列表。
2025-07-03 06:40:13,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:40:13,350 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个所有好友信息。
2025-07-03 06:40:13,351 - server - INFO - SecureChatServer: 向 3 提供了 1 个所有好友列表。
2025-07-03 06:41:06,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:41:06,369 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 06:41:06,370 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 06:41:06,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:41:06,382 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:41:06,383 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:41:13,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:41:13,341 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个在线好友信息。
2025-07-03 06:41:13,341 - server - INFO - SecureChatServer: 向 3 提供了 1 个在线好友列表。
2025-07-03 06:41:13,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9975) 的命令: GET_ALL_FRIENDS
2025-07-03 06:41:13,343 - db - INFO - DatabaseManager: 已为用户 1023 检索到 1 个所有好友信息。
2025-07-03 06:41:13,344 - server - INFO - SecureChatServer: 向 3 提供了 1 个所有好友列表。
2025-07-03 06:41:15,518 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 9975) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 06:41:15,522 - db - INFO - DatabaseManager: 用户 1023 在线状态已清除。
2025-07-03 06:41:15,523 - server - INFO - SecureChatServer: 已清理用户 3 (ID: 1023) 的会话并更新离线状态。
2025-07-03 06:41:15,523 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9975) 的连接已关闭。
2025-07-03 06:41:23,381 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:41:23,382 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:41:23,383 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:41:23,383 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9888) 的命令: GET_ALL_FRIENDS
2025-07-03 06:41:23,384 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:41:23,385 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:41:30,915 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 9888) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 06:41:30,949 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 06:41:30,950 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 06:41:30,950 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9888) 的连接已关闭。
2025-07-03 06:50:58,045 - __main__ - INFO - 服务器程序启动。
2025-07-03 06:50:58,045 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-03 06:50:58,175 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-03 06:50:58,200 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-03 06:50:58,212 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-03 06:50:58,221 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-03 06:50:58,221 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-03 06:50:58,222 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-03 06:50:58,223 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-03 06:51:12,107 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的新连接。
2025-07-03 06:51:12,108 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 12354) 启动。
2025-07-03 06:51:12,133 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: LOGIN
2025-07-03 06:51:12,141 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 06:51:12,156 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:12355。
2025-07-03 06:51:12,156 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 12354) 登录。
2025-07-03 06:51:12,158 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:51:12,160 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:51:12,161 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:51:12,161 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: GET_ALL_FRIENDS
2025-07-03 06:51:12,167 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:51:12,168 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:51:13,693 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:51:13,694 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:51:13,695 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:51:13,695 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: GET_ALL_FRIENDS
2025-07-03 06:51:13,696 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:51:13,697 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:51:13,897 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:51:13,897 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:51:13,898 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:51:13,899 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: GET_ALL_FRIENDS
2025-07-03 06:51:13,900 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:51:13,901 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:51:27,967 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:51:27,988 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:51:27,989 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:51:27,990 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: GET_ALL_FRIENDS
2025-07-03 06:51:28,002 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:51:28,002 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:51:28,191 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: GET_ONLINE_FRIENDS
2025-07-03 06:51:28,193 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 06:51:28,193 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 06:51:28,194 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12354) 的命令: GET_ALL_FRIENDS
2025-07-03 06:51:28,196 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 06:51:28,197 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 06:51:49,229 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 12354) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 06:51:49,233 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 06:51:49,234 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 06:51:49,234 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 12354) 的连接已关闭。
2025-07-03 07:02:51,473 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的新连接。
2025-07-03 07:02:51,475 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 14619) 启动。
2025-07-03 07:02:51,475 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: LOGIN
2025-07-03 07:02:51,514 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 07:02:51,528 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:14620。
2025-07-03 07:02:51,529 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 14619) 登录。
2025-07-03 07:02:51,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:02:51,531 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:02:51,531 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:02:51,532 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ALL_FRIENDS
2025-07-03 07:02:51,538 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:02:51,539 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:02:53,063 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:02:53,065 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:02:53,065 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:02:53,066 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ALL_FRIENDS
2025-07-03 07:02:53,067 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:02:53,068 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:02:53,285 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:02:53,286 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:02:53,287 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:02:53,299 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ALL_FRIENDS
2025-07-03 07:02:53,301 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:02:53,301 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:03:23,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:03:23,347 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:03:23,347 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:03:23,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ALL_FRIENDS
2025-07-03 07:03:23,357 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:03:23,358 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:03:53,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:03:53,336 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:03:53,336 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:03:53,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ALL_FRIENDS
2025-07-03 07:03:53,339 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:03:53,339 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:04:23,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:04:23,358 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:04:23,359 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:04:23,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ALL_FRIENDS
2025-07-03 07:04:23,375 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:04:23,376 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:04:29,023 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14913) 的新连接。
2025-07-03 07:04:29,024 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 14913) 启动。
2025-07-03 07:04:29,024 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14913) 的命令: REGISTER
2025-07-03 07:04:29,050 - db - INFO - DatabaseManager: 用户 '4' 注册成功。
2025-07-03 07:04:29,051 - server - INFO - SecureChatServer: 用户 4 已注册。
2025-07-03 07:04:29,052 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 14913) 断开连接，用户未登录。
2025-07-03 07:04:29,052 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 14913) 的连接已关闭。
2025-07-03 07:04:36,940 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的新连接。
2025-07-03 07:04:36,941 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 14926) 启动。
2025-07-03 07:04:36,942 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: LOGIN
2025-07-03 07:04:36,946 - db - INFO - DatabaseManager: 用户 '4' 认证成功。
2025-07-03 07:04:36,960 - db - INFO - DatabaseManager: 用户 1024 在线状态更新成功: 10.21.139.34:14927。
2025-07-03 07:04:36,961 - server - INFO - SecureChatServer: 用户 4 (ID: 1024) 从 ('127.0.0.1', 14926) 登录。
2025-07-03 07:04:36,962 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:04:36,965 - db - INFO - DatabaseManager: 已为用户 1024 检索到 0 个在线好友信息。
2025-07-03 07:04:36,965 - server - INFO - SecureChatServer: 向 4 提供了 0 个在线好友列表。
2025-07-03 07:04:36,966 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: GET_ALL_FRIENDS
2025-07-03 07:04:36,970 - db - INFO - DatabaseManager: 已为用户 1024 检索到 0 个所有好友信息。
2025-07-03 07:04:36,971 - server - INFO - SecureChatServer: 向 4 提供了 0 个所有好友列表。
2025-07-03 07:04:38,504 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:04:38,505 - db - INFO - DatabaseManager: 已为用户 1024 检索到 0 个在线好友信息。
2025-07-03 07:04:38,506 - server - INFO - SecureChatServer: 向 4 提供了 0 个在线好友列表。
2025-07-03 07:04:38,506 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: GET_ALL_FRIENDS
2025-07-03 07:04:38,507 - db - INFO - DatabaseManager: 已为用户 1024 检索到 0 个所有好友信息。
2025-07-03 07:04:38,508 - server - INFO - SecureChatServer: 向 4 提供了 0 个所有好友列表。
2025-07-03 07:04:38,727 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:04:38,728 - db - INFO - DatabaseManager: 已为用户 1024 检索到 0 个在线好友信息。
2025-07-03 07:04:38,728 - server - INFO - SecureChatServer: 向 4 提供了 0 个在线好友列表。
2025-07-03 07:04:38,730 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: GET_ALL_FRIENDS
2025-07-03 07:04:38,731 - db - INFO - DatabaseManager: 已为用户 1024 检索到 0 个所有好友信息。
2025-07-03 07:04:38,732 - server - INFO - SecureChatServer: 向 4 提供了 0 个所有好友列表。
2025-07-03 07:04:40,585 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:04:40,586 - db - INFO - DatabaseManager: 已为用户 1024 检索到 0 个在线好友信息。
2025-07-03 07:04:40,587 - server - INFO - SecureChatServer: 向 4 提供了 0 个在线好友列表。
2025-07-03 07:04:40,587 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: GET_ALL_FRIENDS
2025-07-03 07:04:40,588 - db - INFO - DatabaseManager: 已为用户 1024 检索到 0 个所有好友信息。
2025-07-03 07:04:40,589 - server - INFO - SecureChatServer: 向 4 提供了 0 个所有好友列表。
2025-07-03 07:04:47,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:04:47,520 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:04:47,521 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:04:47,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ALL_FRIENDS
2025-07-03 07:04:47,524 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:04:47,525 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:04:53,163 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:04:53,164 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:04:53,165 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:04:53,166 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14619) 的命令: GET_ALL_FRIENDS
2025-07-03 07:04:53,167 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:04:53,167 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:05:09,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:05:09,354 - db - INFO - DatabaseManager: 已为用户 1024 检索到 0 个在线好友信息。
2025-07-03 07:05:09,355 - server - INFO - SecureChatServer: 向 4 提供了 0 个在线好友列表。
2025-07-03 07:05:09,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 14926) 的命令: GET_ALL_FRIENDS
2025-07-03 07:05:09,359 - db - INFO - DatabaseManager: 已为用户 1024 检索到 0 个所有好友信息。
2025-07-03 07:05:09,359 - server - INFO - SecureChatServer: 向 4 提供了 0 个所有好友列表。
2025-07-03 07:05:15,616 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 14926) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:05:15,619 - db - INFO - DatabaseManager: 用户 1024 在线状态已清除。
2025-07-03 07:05:15,620 - server - INFO - SecureChatServer: 已清理用户 4 (ID: 1024) 的会话并更新离线状态。
2025-07-03 07:05:15,621 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 14926) 的连接已关闭。
2025-07-03 07:05:16,137 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 14619) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:05:16,142 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 07:05:16,143 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 07:05:16,143 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 14619) 的连接已关闭。
2025-07-03 07:09:16,421 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1829) 的新连接。
2025-07-03 07:09:16,423 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1829) 启动。
2025-07-03 07:09:16,437 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1829) 的命令: LOGIN
2025-07-03 07:09:16,484 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 07:09:16,500 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:1830。
2025-07-03 07:09:16,501 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 1829) 登录。
2025-07-03 07:09:16,501 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1829) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:09:16,511 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:09:16,512 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:09:16,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1829) 的命令: GET_ALL_FRIENDS
2025-07-03 07:09:16,521 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:09:16,522 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:09:18,050 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1829) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:09:18,051 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:09:18,052 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:09:18,053 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1829) 的命令: GET_ALL_FRIENDS
2025-07-03 07:09:18,054 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:09:18,054 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:09:18,284 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1829) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:09:18,286 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:09:18,286 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:09:18,287 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1829) 的命令: GET_ALL_FRIENDS
2025-07-03 07:09:18,288 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:09:18,290 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:09:44,343 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 1829) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:09:44,348 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 07:09:44,348 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 07:09:44,348 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1829) 的连接已关闭。
2025-07-03 07:13:44,731 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2709) 的新连接。
2025-07-03 07:13:44,731 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2709) 启动。
2025-07-03 07:13:44,732 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2709) 的命令: LOGIN
2025-07-03 07:13:44,786 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 07:13:44,799 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:2710。
2025-07-03 07:13:44,800 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 2709) 登录。
2025-07-03 07:13:44,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:13:44,803 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:13:44,804 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:13:44,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2709) 的命令: GET_ALL_FRIENDS
2025-07-03 07:13:44,811 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:13:44,812 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:13:46,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:13:46,336 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:13:46,337 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:13:46,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2709) 的命令: GET_ALL_FRIENDS
2025-07-03 07:13:46,338 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:13:46,339 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:13:46,544 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:13:46,545 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:13:46,546 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:13:46,546 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2709) 的命令: GET_ALL_FRIENDS
2025-07-03 07:13:46,547 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:13:46,548 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:14:16,414 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:14:16,442 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:14:16,443 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:14:16,444 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2709) 的命令: GET_ALL_FRIENDS
2025-07-03 07:14:16,456 - db - INFO - DatabaseManager: 已为用户 1021 检索到 2 个所有好友信息。
2025-07-03 07:14:16,457 - server - INFO - SecureChatServer: 向 1 提供了 2 个所有好友列表。
2025-07-03 07:14:27,043 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2709) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:14:27,077 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 07:14:27,078 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 07:14:27,078 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2709) 的连接已关闭。
2025-07-03 07:15:52,492 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3146) 的新连接。
2025-07-03 07:15:52,493 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3146) 启动。
2025-07-03 07:15:52,493 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3146) 的命令: REGISTER
2025-07-03 07:15:52,531 - db - INFO - DatabaseManager: 用户 '5' 注册成功。
2025-07-03 07:15:52,532 - server - INFO - SecureChatServer: 用户 5 已注册。
2025-07-03 07:15:52,533 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 3146) 断开连接，用户未登录。
2025-07-03 07:15:52,533 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3146) 的连接已关闭。
2025-07-03 07:15:56,743 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的新连接。
2025-07-03 07:15:56,744 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3152) 启动。
2025-07-03 07:15:56,754 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: LOGIN
2025-07-03 07:15:56,758 - db - INFO - DatabaseManager: 用户 '5' 认证成功。
2025-07-03 07:15:56,770 - db - INFO - DatabaseManager: 用户 1025 在线状态更新成功: 10.21.139.34:3153。
2025-07-03 07:15:56,770 - server - INFO - SecureChatServer: 用户 5 (ID: 1025) 从 ('127.0.0.1', 3152) 登录。
2025-07-03 07:15:56,771 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:15:56,774 - db - INFO - DatabaseManager: 已为用户 1025 检索到 0 个在线好友信息。
2025-07-03 07:15:56,775 - server - INFO - SecureChatServer: 向 5 提供了 0 个在线好友列表。
2025-07-03 07:15:56,776 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_FRIENDS
2025-07-03 07:15:56,780 - db - INFO - DatabaseManager: 已为用户 1025 检索到 0 个所有好友信息。
2025-07-03 07:15:56,780 - server - INFO - SecureChatServer: 向 5 提供了 0 个所有好友列表。
2025-07-03 07:15:58,314 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:15:58,316 - db - INFO - DatabaseManager: 已为用户 1025 检索到 0 个在线好友信息。
2025-07-03 07:15:58,316 - server - INFO - SecureChatServer: 向 5 提供了 0 个在线好友列表。
2025-07-03 07:15:58,317 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_FRIENDS
2025-07-03 07:15:58,318 - db - INFO - DatabaseManager: 已为用户 1025 检索到 0 个所有好友信息。
2025-07-03 07:15:58,319 - server - INFO - SecureChatServer: 向 5 提供了 0 个所有好友列表。
2025-07-03 07:15:58,538 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:15:58,539 - db - INFO - DatabaseManager: 已为用户 1025 检索到 0 个在线好友信息。
2025-07-03 07:15:58,539 - server - INFO - SecureChatServer: 向 5 提供了 0 个在线好友列表。
2025-07-03 07:15:58,540 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_FRIENDS
2025-07-03 07:15:58,541 - db - INFO - DatabaseManager: 已为用户 1025 检索到 0 个所有好友信息。
2025-07-03 07:15:58,542 - server - INFO - SecureChatServer: 向 5 提供了 0 个所有好友列表。
2025-07-03 07:16:00,392 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:16:00,394 - db - INFO - DatabaseManager: 已为用户 1025 检索到 0 个在线好友信息。
2025-07-03 07:16:00,394 - server - INFO - SecureChatServer: 向 5 提供了 0 个在线好友列表。
2025-07-03 07:16:00,395 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_FRIENDS
2025-07-03 07:16:00,396 - db - INFO - DatabaseManager: 已为用户 1025 检索到 0 个所有好友信息。
2025-07-03 07:16:00,397 - server - INFO - SecureChatServer: 向 5 提供了 0 个所有好友列表。
2025-07-03 07:16:05,881 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_USERS
2025-07-03 07:16:05,883 - db - INFO - DatabaseManager: 已检索到所有 5 个注册用户信息。
2025-07-03 07:16:05,884 - server - INFO - SecureChatServer: 向 5 提供了所有注册用户列表。
2025-07-03 07:16:06,538 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: ADD_FRIEND
2025-07-03 07:16:06,549 - db - INFO - DatabaseManager: 用户 1021 添加好友 1025 成功。
2025-07-03 07:16:06,550 - server - INFO - SecureChatServer: 用户 5 添加 1 (ID: 1021) 为好友成功。
2025-07-03 07:16:06,550 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:16:06,551 - db - INFO - DatabaseManager: 已为用户 1025 检索到 0 个在线好友信息。
2025-07-03 07:16:06,552 - server - INFO - SecureChatServer: 向 5 提供了 0 个在线好友列表。
2025-07-03 07:16:06,553 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_FRIENDS
2025-07-03 07:16:06,554 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个所有好友信息。
2025-07-03 07:16:06,554 - server - INFO - SecureChatServer: 向 5 提供了 1 个所有好友列表。
2025-07-03 07:16:12,260 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的新连接。
2025-07-03 07:16:12,261 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3195) 启动。
2025-07-03 07:16:12,261 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: LOGIN
2025-07-03 07:16:12,269 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 07:16:12,270 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:3196。
2025-07-03 07:16:12,271 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 3195) 登录。
2025-07-03 07:16:12,271 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:16:12,272 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:16:12,272 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:16:12,273 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ALL_FRIENDS
2025-07-03 07:16:12,273 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:16:12,274 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:16:13,792 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:16:13,793 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:16:13,794 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:16:13,794 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ALL_FRIENDS
2025-07-03 07:16:13,795 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:16:13,795 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:16:14,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:16:14,008 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:16:14,009 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:16:14,010 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ALL_FRIENDS
2025-07-03 07:16:14,012 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:16:14,013 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:16:17,868 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:16:17,870 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个在线好友信息。
2025-07-03 07:16:17,870 - server - INFO - SecureChatServer: 向 5 提供了 1 个在线好友列表。
2025-07-03 07:16:17,872 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_FRIENDS
2025-07-03 07:16:17,873 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个所有好友信息。
2025-07-03 07:16:17,873 - server - INFO - SecureChatServer: 向 5 提供了 1 个所有好友列表。
2025-07-03 07:16:28,394 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:16:28,424 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个在线好友信息。
2025-07-03 07:16:28,424 - server - INFO - SecureChatServer: 向 5 提供了 1 个在线好友列表。
2025-07-03 07:16:28,425 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_FRIENDS
2025-07-03 07:16:28,441 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个所有好友信息。
2025-07-03 07:16:28,442 - server - INFO - SecureChatServer: 向 5 提供了 1 个所有好友列表。
2025-07-03 07:16:44,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:16:44,368 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:16:44,369 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:16:44,371 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ALL_FRIENDS
2025-07-03 07:16:44,379 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:16:44,380 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:16:58,391 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:16:58,393 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个在线好友信息。
2025-07-03 07:16:58,393 - server - INFO - SecureChatServer: 向 5 提供了 1 个在线好友列表。
2025-07-03 07:16:58,394 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_FRIENDS
2025-07-03 07:16:58,395 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个所有好友信息。
2025-07-03 07:16:58,396 - server - INFO - SecureChatServer: 向 5 提供了 1 个所有好友列表。
2025-07-03 07:17:14,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:17:14,342 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:17:14,343 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:17:14,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ALL_FRIENDS
2025-07-03 07:17:14,346 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:17:14,346 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:17:28,401 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:17:28,402 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个在线好友信息。
2025-07-03 07:17:28,403 - server - INFO - SecureChatServer: 向 5 提供了 1 个在线好友列表。
2025-07-03 07:17:28,404 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_FRIENDS
2025-07-03 07:17:28,404 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个所有好友信息。
2025-07-03 07:17:28,404 - server - INFO - SecureChatServer: 向 5 提供了 1 个所有好友列表。
2025-07-03 07:17:44,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:17:44,365 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:17:44,366 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:17:44,367 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ALL_FRIENDS
2025-07-03 07:17:44,374 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:17:44,375 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:17:59,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:17:59,333 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个在线好友信息。
2025-07-03 07:17:59,334 - server - INFO - SecureChatServer: 向 5 提供了 1 个在线好友列表。
2025-07-03 07:17:59,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3152) 的命令: GET_ALL_FRIENDS
2025-07-03 07:17:59,337 - db - INFO - DatabaseManager: 已为用户 1025 检索到 1 个所有好友信息。
2025-07-03 07:17:59,337 - server - INFO - SecureChatServer: 向 5 提供了 1 个所有好友列表。
2025-07-03 07:18:14,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:18:14,334 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:18:14,335 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:18:14,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3195) 的命令: GET_ALL_FRIENDS
2025-07-03 07:18:14,337 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:18:14,337 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:18:15,527 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 3152) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:18:15,540 - db - INFO - DatabaseManager: 用户 1025 在线状态已清除。
2025-07-03 07:18:15,540 - server - INFO - SecureChatServer: 已清理用户 5 (ID: 1025) 的会话并更新离线状态。
2025-07-03 07:18:15,541 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3152) 的连接已关闭。
2025-07-03 07:18:16,165 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 3195) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:18:16,181 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 07:18:16,182 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 07:18:16,182 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3195) 的连接已关闭。
2025-07-03 07:27:42,185 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的新连接。
2025-07-03 07:27:42,186 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5138) 启动。
2025-07-03 07:27:42,187 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: LOGIN
2025-07-03 07:27:42,238 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 07:27:42,250 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:5139。
2025-07-03 07:27:42,251 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 5138) 登录。
2025-07-03 07:27:42,251 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:27:42,253 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:27:42,254 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:27:42,254 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ALL_FRIENDS
2025-07-03 07:27:42,260 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:27:42,261 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:27:43,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:27:43,798 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:27:43,799 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:27:43,800 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ALL_FRIENDS
2025-07-03 07:27:43,801 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:27:43,802 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:27:44,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:27:44,008 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:27:44,009 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:27:44,009 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ALL_FRIENDS
2025-07-03 07:27:44,010 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:27:44,011 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:28:01,953 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:28:01,955 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:28:01,955 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:28:14,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:28:14,336 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:28:14,336 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:28:14,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ALL_FRIENDS
2025-07-03 07:28:14,337 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:28:14,337 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:28:44,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:28:44,366 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:28:44,366 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:28:44,367 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ALL_FRIENDS
2025-07-03 07:28:44,378 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:28:44,379 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:29:14,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:29:14,341 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:29:14,342 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:29:14,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ALL_FRIENDS
2025-07-03 07:29:14,347 - db - INFO - DatabaseManager: 已为用户 1021 检索到 3 个所有好友信息。
2025-07-03 07:29:14,348 - server - INFO - SecureChatServer: 向 1 提供了 3 个所有好友列表。
2025-07-03 07:29:24,552 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5410) 的新连接。
2025-07-03 07:29:24,554 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5410) 启动。
2025-07-03 07:29:24,554 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5410) 的命令: REGISTER
2025-07-03 07:29:24,559 - db - INFO - DatabaseManager: 用户 '6' 注册成功。
2025-07-03 07:29:24,560 - server - INFO - SecureChatServer: 用户 6 已注册。
2025-07-03 07:29:24,560 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 5410) 断开连接，用户未登录。
2025-07-03 07:29:24,561 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5410) 的连接已关闭。
2025-07-03 07:29:29,559 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的新连接。
2025-07-03 07:29:29,560 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5417) 启动。
2025-07-03 07:29:29,561 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: LOGIN
2025-07-03 07:29:29,568 - db - INFO - DatabaseManager: 用户 '6' 认证成功。
2025-07-03 07:29:29,573 - db - INFO - DatabaseManager: 用户 1026 在线状态更新成功: 10.21.139.34:5418。
2025-07-03 07:29:29,574 - server - INFO - SecureChatServer: 用户 6 (ID: 1026) 从 ('127.0.0.1', 5417) 登录。
2025-07-03 07:29:29,575 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:29:29,575 - db - INFO - DatabaseManager: 已为用户 1026 检索到 0 个在线好友信息。
2025-07-03 07:29:29,576 - server - INFO - SecureChatServer: 向 6 提供了 0 个在线好友列表。
2025-07-03 07:29:29,576 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ALL_FRIENDS
2025-07-03 07:29:29,577 - db - INFO - DatabaseManager: 已为用户 1026 检索到 0 个所有好友信息。
2025-07-03 07:29:29,578 - server - INFO - SecureChatServer: 向 6 提供了 0 个所有好友列表。
2025-07-03 07:29:31,099 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:29:31,100 - db - INFO - DatabaseManager: 已为用户 1026 检索到 0 个在线好友信息。
2025-07-03 07:29:31,101 - server - INFO - SecureChatServer: 向 6 提供了 0 个在线好友列表。
2025-07-03 07:29:31,101 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ALL_FRIENDS
2025-07-03 07:29:31,103 - db - INFO - DatabaseManager: 已为用户 1026 检索到 0 个所有好友信息。
2025-07-03 07:29:31,103 - server - INFO - SecureChatServer: 向 6 提供了 0 个所有好友列表。
2025-07-03 07:29:31,329 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:29:31,330 - db - INFO - DatabaseManager: 已为用户 1026 检索到 0 个在线好友信息。
2025-07-03 07:29:31,331 - server - INFO - SecureChatServer: 向 6 提供了 0 个在线好友列表。
2025-07-03 07:29:31,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ALL_FRIENDS
2025-07-03 07:29:31,333 - db - INFO - DatabaseManager: 已为用户 1026 检索到 0 个所有好友信息。
2025-07-03 07:29:31,334 - server - INFO - SecureChatServer: 向 6 提供了 0 个所有好友列表。
2025-07-03 07:29:33,174 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:29:33,204 - db - INFO - DatabaseManager: 已为用户 1026 检索到 0 个在线好友信息。
2025-07-03 07:29:33,204 - server - INFO - SecureChatServer: 向 6 提供了 0 个在线好友列表。
2025-07-03 07:29:33,205 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ALL_FRIENDS
2025-07-03 07:29:33,215 - db - INFO - DatabaseManager: 已为用户 1026 检索到 0 个所有好友信息。
2025-07-03 07:29:33,215 - server - INFO - SecureChatServer: 向 6 提供了 0 个所有好友列表。
2025-07-03 07:29:36,147 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ALL_USERS
2025-07-03 07:29:36,170 - db - INFO - DatabaseManager: 已检索到所有 6 个注册用户信息。
2025-07-03 07:29:36,171 - server - INFO - SecureChatServer: 向 6 提供了所有注册用户列表。
2025-07-03 07:29:37,095 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: ADD_FRIEND
2025-07-03 07:29:37,124 - db - INFO - DatabaseManager: 用户 1021 添加好友 1026 成功。
2025-07-03 07:29:37,125 - server - INFO - SecureChatServer: 用户 6 添加 1 (ID: 1021) 为好友成功。
2025-07-03 07:29:37,126 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:29:37,128 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:29:37,129 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:29:37,130 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ALL_FRIENDS
2025-07-03 07:29:37,134 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:29:37,135 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:29:39,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:29:39,371 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:29:39,372 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:29:39,373 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ALL_FRIENDS
2025-07-03 07:29:39,379 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:29:39,380 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:29:42,492 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:29:42,493 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:29:42,494 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:29:42,495 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ALL_FRIENDS
2025-07-03 07:29:42,495 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:29:42,496 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:29:43,882 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:29:43,883 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:29:43,884 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:29:43,885 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ALL_FRIENDS
2025-07-03 07:29:43,886 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:29:43,887 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:30:01,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:30:01,348 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:30:01,349 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:30:01,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ALL_FRIENDS
2025-07-03 07:30:01,352 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:30:01,353 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:30:14,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:30:14,345 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:30:14,347 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:30:14,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ALL_FRIENDS
2025-07-03 07:30:14,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:30:14,348 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:30:31,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:30:31,334 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:30:31,335 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:30:31,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ALL_FRIENDS
2025-07-03 07:30:31,337 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:30:31,338 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:30:44,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:30:44,355 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:30:44,356 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:30:44,357 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5138) 的命令: GET_ALL_FRIENDS
2025-07-03 07:30:44,370 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:30:44,371 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:31:01,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:31:01,347 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:31:01,348 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:31:01,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5417) 的命令: GET_ALL_FRIENDS
2025-07-03 07:31:01,350 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:31:01,350 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:31:27,770 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 5417) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:31:27,774 - db - INFO - DatabaseManager: 用户 1026 在线状态已清除。
2025-07-03 07:31:27,775 - server - INFO - SecureChatServer: 已清理用户 6 (ID: 1026) 的会话并更新离线状态。
2025-07-03 07:31:27,775 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5417) 的连接已关闭。
2025-07-03 07:31:28,327 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 5138) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:31:28,338 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 07:31:28,338 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 07:31:28,339 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5138) 的连接已关闭。
2025-07-03 07:32:17,571 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的新连接。
2025-07-03 07:32:17,572 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5862) 启动。
2025-07-03 07:32:17,572 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: LOGIN
2025-07-03 07:32:17,594 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 07:32:17,610 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:5863。
2025-07-03 07:32:17,611 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 5862) 登录。
2025-07-03 07:32:17,611 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:32:17,614 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:32:17,615 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:32:17,615 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ALL_FRIENDS
2025-07-03 07:32:17,620 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:32:17,621 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:32:19,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:32:19,350 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:32:19,351 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:32:19,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ALL_FRIENDS
2025-07-03 07:32:19,352 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:32:19,352 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:32:19,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:32:19,802 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:32:19,803 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:32:19,804 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ALL_FRIENDS
2025-07-03 07:32:19,804 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:32:19,805 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:32:25,968 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的新连接。
2025-07-03 07:32:25,968 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5897) 启动。
2025-07-03 07:32:25,974 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: LOGIN
2025-07-03 07:32:25,974 - db - INFO - DatabaseManager: 用户 '6' 认证成功。
2025-07-03 07:32:25,976 - db - INFO - DatabaseManager: 用户 1026 在线状态更新成功: 10.21.139.34:5898。
2025-07-03 07:32:25,977 - server - INFO - SecureChatServer: 用户 6 (ID: 1026) 从 ('127.0.0.1', 5897) 登录。
2025-07-03 07:32:25,977 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:32:25,978 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:32:25,979 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:32:25,980 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ALL_FRIENDS
2025-07-03 07:32:25,981 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:32:25,981 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:32:27,500 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:32:27,501 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:32:27,502 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:32:27,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ALL_FRIENDS
2025-07-03 07:32:27,504 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:32:27,505 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:32:27,709 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:32:27,710 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:32:27,711 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:32:27,711 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ALL_FRIENDS
2025-07-03 07:32:27,712 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:32:27,713 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:32:42,147 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:32:42,148 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:32:42,149 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:32:50,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:32:50,360 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:32:50,361 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:32:50,362 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ALL_FRIENDS
2025-07-03 07:32:50,380 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:32:50,382 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:32:58,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:32:58,355 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:32:58,356 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:32:58,357 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ALL_FRIENDS
2025-07-03 07:32:58,368 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:32:58,368 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:33:20,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:33:20,339 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:33:20,340 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:33:20,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ALL_FRIENDS
2025-07-03 07:33:20,342 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:33:20,343 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:33:28,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:33:28,348 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:33:28,349 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:33:28,353 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ALL_FRIENDS
2025-07-03 07:33:28,353 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:33:28,354 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:33:50,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:33:50,343 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:33:50,344 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:33:50,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ALL_FRIENDS
2025-07-03 07:33:50,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:33:50,348 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:33:58,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:33:58,365 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个在线好友信息。
2025-07-03 07:33:58,366 - server - INFO - SecureChatServer: 向 6 提供了 1 个在线好友列表。
2025-07-03 07:33:58,367 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5897) 的命令: GET_ALL_FRIENDS
2025-07-03 07:33:58,390 - db - INFO - DatabaseManager: 已为用户 1026 检索到 1 个所有好友信息。
2025-07-03 07:33:58,390 - server - INFO - SecureChatServer: 向 6 提供了 1 个所有好友列表。
2025-07-03 07:34:08,588 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 5897) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:34:08,621 - db - INFO - DatabaseManager: 用户 1026 在线状态已清除。
2025-07-03 07:34:08,622 - server - INFO - SecureChatServer: 已清理用户 6 (ID: 1026) 的会话并更新离线状态。
2025-07-03 07:34:08,623 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5897) 的连接已关闭。
2025-07-03 07:34:20,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:34:20,344 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:34:20,345 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:34:20,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ALL_FRIENDS
2025-07-03 07:34:20,352 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:34:20,354 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:34:50,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:34:50,339 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:34:50,340 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:34:50,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5862) 的命令: GET_ALL_FRIENDS
2025-07-03 07:34:50,343 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:34:50,343 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:34:53,896 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 5862) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:34:53,898 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 07:34:53,899 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 07:34:53,899 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5862) 的连接已关闭。
2025-07-03 07:36:23,255 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的新连接。
2025-07-03 07:36:23,257 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6724) 启动。
2025-07-03 07:36:23,257 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: LOGIN
2025-07-03 07:36:23,294 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 07:36:23,304 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:6725。
2025-07-03 07:36:23,305 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 6724) 登录。
2025-07-03 07:36:23,306 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:36:23,309 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:36:23,309 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:36:23,310 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:36:23,316 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:36:23,318 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:36:24,852 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:36:24,853 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:36:24,854 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:36:24,854 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:36:24,856 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:36:24,857 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:36:25,066 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:36:25,066 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:36:25,067 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:36:25,067 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:36:25,069 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:36:25,070 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:36:54,936 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:36:54,938 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:36:54,939 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:36:54,940 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:36:54,941 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:36:54,942 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:36:56,738 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:36:56,739 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:36:56,740 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:37:25,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:37:25,379 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:37:25,379 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:37:25,380 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:37:25,392 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:37:25,393 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:37:55,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:37:55,339 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:37:55,340 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:37:55,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:37:55,342 - db - INFO - DatabaseManager: 已为用户 1021 检索到 4 个所有好友信息。
2025-07-03 07:37:55,343 - server - INFO - SecureChatServer: 向 1 提供了 4 个所有好友列表。
2025-07-03 07:38:05,224 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6891) 的新连接。
2025-07-03 07:38:05,225 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6891) 启动。
2025-07-03 07:38:05,226 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6891) 的命令: REGISTER
2025-07-03 07:38:05,238 - db - INFO - DatabaseManager: 用户 '7' 注册成功。
2025-07-03 07:38:05,239 - server - INFO - SecureChatServer: 用户 7 已注册。
2025-07-03 07:38:05,240 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6891) 断开连接，用户未登录。
2025-07-03 07:38:05,241 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6891) 的连接已关闭。
2025-07-03 07:38:09,983 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的新连接。
2025-07-03 07:38:09,984 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6901) 启动。
2025-07-03 07:38:09,984 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: LOGIN
2025-07-03 07:38:09,989 - db - INFO - DatabaseManager: 用户 '7' 认证成功。
2025-07-03 07:38:09,999 - db - INFO - DatabaseManager: 用户 1027 在线状态更新成功: 10.21.139.34:6902。
2025-07-03 07:38:10,000 - server - INFO - SecureChatServer: 用户 7 (ID: 1027) 从 ('127.0.0.1', 6901) 登录。
2025-07-03 07:38:10,001 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:10,003 - db - INFO - DatabaseManager: 已为用户 1027 检索到 0 个在线好友信息。
2025-07-03 07:38:10,004 - server - INFO - SecureChatServer: 向 7 提供了 0 个在线好友列表。
2025-07-03 07:38:10,004 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:10,006 - db - INFO - DatabaseManager: 已为用户 1027 检索到 0 个所有好友信息。
2025-07-03 07:38:10,006 - server - INFO - SecureChatServer: 向 7 提供了 0 个所有好友列表。
2025-07-03 07:38:11,532 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:11,533 - db - INFO - DatabaseManager: 已为用户 1027 检索到 0 个在线好友信息。
2025-07-03 07:38:11,534 - server - INFO - SecureChatServer: 向 7 提供了 0 个在线好友列表。
2025-07-03 07:38:11,534 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:11,535 - db - INFO - DatabaseManager: 已为用户 1027 检索到 0 个所有好友信息。
2025-07-03 07:38:11,536 - server - INFO - SecureChatServer: 向 7 提供了 0 个所有好友列表。
2025-07-03 07:38:11,771 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:11,772 - db - INFO - DatabaseManager: 已为用户 1027 检索到 0 个在线好友信息。
2025-07-03 07:38:11,772 - server - INFO - SecureChatServer: 向 7 提供了 0 个在线好友列表。
2025-07-03 07:38:11,773 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:11,774 - db - INFO - DatabaseManager: 已为用户 1027 检索到 0 个所有好友信息。
2025-07-03 07:38:11,774 - server - INFO - SecureChatServer: 向 7 提供了 0 个所有好友列表。
2025-07-03 07:38:13,625 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:13,627 - db - INFO - DatabaseManager: 已为用户 1027 检索到 0 个在线好友信息。
2025-07-03 07:38:13,628 - server - INFO - SecureChatServer: 向 7 提供了 0 个在线好友列表。
2025-07-03 07:38:13,629 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:13,630 - db - INFO - DatabaseManager: 已为用户 1027 检索到 0 个所有好友信息。
2025-07-03 07:38:13,631 - server - INFO - SecureChatServer: 向 7 提供了 0 个所有好友列表。
2025-07-03 07:38:17,906 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ALL_USERS
2025-07-03 07:38:17,930 - db - INFO - DatabaseManager: 已检索到所有 7 个注册用户信息。
2025-07-03 07:38:17,931 - server - INFO - SecureChatServer: 向 7 提供了所有注册用户列表。
2025-07-03 07:38:18,422 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: ADD_FRIEND
2025-07-03 07:38:18,453 - db - INFO - DatabaseManager: 用户 1021 添加好友 1027 成功。
2025-07-03 07:38:18,454 - server - INFO - SecureChatServer: 用户 7 添加 1 (ID: 1021) 为好友成功。
2025-07-03 07:38:18,455 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:18,460 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个在线好友信息。
2025-07-03 07:38:18,461 - server - INFO - SecureChatServer: 向 7 提供了 1 个在线好友列表。
2025-07-03 07:38:18,462 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:18,467 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个所有好友信息。
2025-07-03 07:38:18,468 - server - INFO - SecureChatServer: 向 7 提供了 1 个所有好友列表。
2025-07-03 07:38:20,707 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:20,730 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个在线好友信息。
2025-07-03 07:38:20,731 - server - INFO - SecureChatServer: 向 7 提供了 1 个在线好友列表。
2025-07-03 07:38:20,732 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:20,738 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个所有好友信息。
2025-07-03 07:38:20,739 - server - INFO - SecureChatServer: 向 7 提供了 1 个所有好友列表。
2025-07-03 07:38:22,983 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:23,007 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:38:23,008 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:38:23,009 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:23,021 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:38:23,022 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:38:25,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:25,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:38:25,340 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:38:25,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:25,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:38:25,349 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:38:41,189 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:41,192 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:38:41,192 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:38:41,193 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:41,194 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:38:41,195 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:38:41,601 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:41,602 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:38:41,603 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:38:41,604 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:41,605 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:38:41,606 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:38:42,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:38:42,332 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个在线好友信息。
2025-07-03 07:38:42,334 - server - INFO - SecureChatServer: 向 7 提供了 1 个在线好友列表。
2025-07-03 07:38:42,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ALL_FRIENDS
2025-07-03 07:38:42,339 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个所有好友信息。
2025-07-03 07:38:42,340 - server - INFO - SecureChatServer: 向 7 提供了 1 个所有好友列表。
2025-07-03 07:39:11,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:39:11,350 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:39:11,350 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:39:11,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6724) 的命令: GET_ALL_FRIENDS
2025-07-03 07:39:11,352 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:39:11,353 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:39:11,633 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:39:11,635 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个在线好友信息。
2025-07-03 07:39:11,635 - server - INFO - SecureChatServer: 向 7 提供了 1 个在线好友列表。
2025-07-03 07:39:11,636 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6901) 的命令: GET_ALL_FRIENDS
2025-07-03 07:39:11,637 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个所有好友信息。
2025-07-03 07:39:11,638 - server - INFO - SecureChatServer: 向 7 提供了 1 个所有好友列表。
2025-07-03 07:39:32,342 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6901) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:39:32,373 - db - INFO - DatabaseManager: 用户 1027 在线状态已清除。
2025-07-03 07:39:32,374 - server - INFO - SecureChatServer: 已清理用户 7 (ID: 1027) 的会话并更新离线状态。
2025-07-03 07:39:32,375 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6901) 的连接已关闭。
2025-07-03 07:39:32,971 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6724) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:39:32,981 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 07:39:32,982 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 07:39:32,982 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6724) 的连接已关闭。
2025-07-03 07:40:39,639 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的新连接。
2025-07-03 07:40:39,641 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 7273) 启动。
2025-07-03 07:40:39,641 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: LOGIN
2025-07-03 07:40:39,667 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 07:40:39,684 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:7274。
2025-07-03 07:40:39,686 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 7273) 登录。
2025-07-03 07:40:39,687 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:40:39,690 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:40:39,691 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:40:39,692 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: GET_ALL_FRIENDS
2025-07-03 07:40:39,700 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:40:39,701 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:40:41,219 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:40:41,221 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:40:41,221 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:40:41,222 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: GET_ALL_FRIENDS
2025-07-03 07:40:41,223 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:40:41,223 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:40:41,420 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:40:41,421 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:40:41,422 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:40:41,422 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: GET_ALL_FRIENDS
2025-07-03 07:40:41,423 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:40:41,423 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:40:50,412 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7311) 的新连接。
2025-07-03 07:40:50,413 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 7311) 启动。
2025-07-03 07:40:50,430 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7311) 的命令: LOGIN
2025-07-03 07:40:50,432 - db - INFO - DatabaseManager: 用户 '7' 认证成功。
2025-07-03 07:40:50,434 - db - INFO - DatabaseManager: 用户 1027 在线状态更新成功: 10.21.139.34:7312。
2025-07-03 07:40:50,435 - server - INFO - SecureChatServer: 用户 7 (ID: 1027) 从 ('127.0.0.1', 7311) 登录。
2025-07-03 07:40:50,435 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7311) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:40:50,436 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个在线好友信息。
2025-07-03 07:40:50,437 - server - INFO - SecureChatServer: 向 7 提供了 1 个在线好友列表。
2025-07-03 07:40:50,438 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7311) 的命令: GET_ALL_FRIENDS
2025-07-03 07:40:50,439 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个所有好友信息。
2025-07-03 07:40:50,439 - server - INFO - SecureChatServer: 向 7 提供了 1 个所有好友列表。
2025-07-03 07:40:51,978 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7311) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:40:51,980 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个在线好友信息。
2025-07-03 07:40:51,980 - server - INFO - SecureChatServer: 向 7 提供了 1 个在线好友列表。
2025-07-03 07:40:51,981 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7311) 的命令: GET_ALL_FRIENDS
2025-07-03 07:40:51,982 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个所有好友信息。
2025-07-03 07:40:51,982 - server - INFO - SecureChatServer: 向 7 提供了 1 个所有好友列表。
2025-07-03 07:40:52,210 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7311) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:40:52,211 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个在线好友信息。
2025-07-03 07:40:52,212 - server - INFO - SecureChatServer: 向 7 提供了 1 个在线好友列表。
2025-07-03 07:40:52,215 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7311) 的命令: GET_ALL_FRIENDS
2025-07-03 07:40:52,216 - db - INFO - DatabaseManager: 已为用户 1027 检索到 1 个所有好友信息。
2025-07-03 07:40:52,217 - server - INFO - SecureChatServer: 向 7 提供了 1 个所有好友列表。
2025-07-03 07:40:57,261 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:40:57,262 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:40:57,263 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:40:57,264 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: GET_ALL_FRIENDS
2025-07-03 07:40:57,266 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:40:57,267 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:41:11,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:41:11,347 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:41:11,347 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:41:11,348 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7273) 的命令: GET_ALL_FRIENDS
2025-07-03 07:41:11,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:41:11,349 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:41:14,736 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 7311) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:41:14,740 - db - INFO - DatabaseManager: 用户 1027 在线状态已清除。
2025-07-03 07:41:14,741 - server - INFO - SecureChatServer: 已清理用户 7 (ID: 1027) 的会话并更新离线状态。
2025-07-03 07:41:14,741 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 7311) 的连接已关闭。
2025-07-03 07:41:15,337 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 7273) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:41:15,347 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 07:41:15,348 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 07:41:15,348 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 7273) 的连接已关闭。
2025-07-03 07:51:58,159 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的新连接。
2025-07-03 07:51:58,160 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9356) 启动。
2025-07-03 07:51:58,160 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: LOGIN
2025-07-03 07:51:58,213 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 07:51:58,228 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:9357。
2025-07-03 07:51:58,229 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 9356) 登录。
2025-07-03 07:51:58,230 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:51:58,233 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:51:58,234 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:51:58,235 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:51:58,242 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:51:58,242 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:52:00,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:00,337 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:52:00,338 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:52:00,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:00,339 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:52:00,339 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:52:01,054 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:01,055 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 07:52:01,056 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 07:52:01,057 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:01,058 - db - INFO - DatabaseManager: 已为用户 1021 检索到 5 个所有好友信息。
2025-07-03 07:52:01,059 - server - INFO - SecureChatServer: 向 1 提供了 5 个所有好友列表。
2025-07-03 07:52:07,188 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9389) 的新连接。
2025-07-03 07:52:07,189 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9389) 启动。
2025-07-03 07:52:07,190 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9389) 的命令: REGISTER
2025-07-03 07:52:07,200 - db - INFO - DatabaseManager: 用户 '8' 注册成功。
2025-07-03 07:52:07,200 - server - INFO - SecureChatServer: 用户 8 已注册。
2025-07-03 07:52:07,201 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 9389) 断开连接，用户未登录。
2025-07-03 07:52:07,201 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9389) 的连接已关闭。
2025-07-03 07:52:12,225 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的新连接。
2025-07-03 07:52:12,226 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9409) 启动。
2025-07-03 07:52:12,226 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: LOGIN
2025-07-03 07:52:12,233 - db - INFO - DatabaseManager: 用户 '8' 认证成功。
2025-07-03 07:52:12,235 - db - INFO - DatabaseManager: 用户 1028 在线状态更新成功: 10.21.139.34:9410。
2025-07-03 07:52:12,236 - server - INFO - SecureChatServer: 用户 8 (ID: 1028) 从 ('127.0.0.1', 9409) 登录。
2025-07-03 07:52:12,237 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:12,239 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个在线好友信息。
2025-07-03 07:52:12,240 - server - INFO - SecureChatServer: 向 8 提供了 0 个在线好友列表。
2025-07-03 07:52:12,241 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:12,241 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个所有好友信息。
2025-07-03 07:52:12,243 - server - INFO - SecureChatServer: 向 8 提供了 0 个所有好友列表。
2025-07-03 07:52:13,774 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:13,775 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个在线好友信息。
2025-07-03 07:52:13,775 - server - INFO - SecureChatServer: 向 8 提供了 0 个在线好友列表。
2025-07-03 07:52:13,776 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:13,777 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个所有好友信息。
2025-07-03 07:52:13,777 - server - INFO - SecureChatServer: 向 8 提供了 0 个所有好友列表。
2025-07-03 07:52:14,004 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:14,005 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个在线好友信息。
2025-07-03 07:52:14,006 - server - INFO - SecureChatServer: 向 8 提供了 0 个在线好友列表。
2025-07-03 07:52:14,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:14,008 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个所有好友信息。
2025-07-03 07:52:14,009 - server - INFO - SecureChatServer: 向 8 提供了 0 个所有好友列表。
2025-07-03 07:52:15,863 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:15,865 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个在线好友信息。
2025-07-03 07:52:15,865 - server - INFO - SecureChatServer: 向 8 提供了 0 个在线好友列表。
2025-07-03 07:52:15,866 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:15,868 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个所有好友信息。
2025-07-03 07:52:15,870 - server - INFO - SecureChatServer: 向 8 提供了 0 个所有好友列表。
2025-07-03 07:52:18,535 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_USERS
2025-07-03 07:52:18,537 - db - INFO - DatabaseManager: 已检索到所有 8 个注册用户信息。
2025-07-03 07:52:18,539 - server - INFO - SecureChatServer: 向 8 提供了所有注册用户列表。
2025-07-03 07:52:19,556 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: ADD_FRIEND
2025-07-03 07:52:19,565 - db - INFO - DatabaseManager: 用户 1021 添加好友 1028 成功。
2025-07-03 07:52:19,566 - server - INFO - SecureChatServer: 用户 8 添加 1 (ID: 1021) 为好友成功。
2025-07-03 07:52:19,566 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:19,567 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 07:52:19,568 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 07:52:19,570 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:19,571 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 07:52:19,572 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 07:52:21,475 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:21,477 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 07:52:21,477 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 07:52:21,478 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:21,479 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 07:52:21,480 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 07:52:25,806 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:25,808 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:52:25,809 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:52:25,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:25,811 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 07:52:25,812 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 07:52:30,500 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:30,502 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:52:30,502 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:52:30,504 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:30,505 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 07:52:30,505 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 07:52:44,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:52:44,355 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 07:52:44,356 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 07:52:44,357 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:52:44,368 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 07:52:44,369 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 07:53:01,331 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:53:01,331 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:53:01,332 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:53:01,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:53:01,336 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 07:53:01,336 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 07:53:14,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:53:14,348 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 07:53:14,348 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 07:53:14,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:53:14,351 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 07:53:14,351 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 07:53:31,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:53:31,342 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:53:31,342 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:53:31,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:53:31,344 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 07:53:31,344 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 07:53:44,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:53:44,369 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 07:53:44,369 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 07:53:44,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:53:44,383 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 07:53:44,384 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 07:54:01,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:54:01,341 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:54:01,341 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:54:01,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:54:01,344 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 07:54:01,344 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 07:54:13,855 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:54:13,856 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 07:54:13,857 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 07:54:13,858 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:54:13,859 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 07:54:13,859 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 07:54:31,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:54:31,337 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:54:31,338 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:54:31,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:54:31,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 07:54:31,341 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 07:54:44,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:54:44,376 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 07:54:44,378 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 07:54:44,379 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:54:44,393 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 07:54:44,394 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 07:55:01,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:55:01,380 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:55:01,381 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:55:01,382 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:55:01,398 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 07:55:01,399 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 07:55:14,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:55:14,356 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 07:55:14,357 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 07:55:14,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:55:14,359 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 07:55:14,359 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 07:55:15,568 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:55:15,569 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:55:15,570 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:55:15,570 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:55:15,571 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 07:55:15,572 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 07:55:15,988 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:55:15,989 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:55:15,990 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:55:15,991 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:55:15,992 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 07:55:15,992 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 07:55:44,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:55:44,346 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 07:55:44,346 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 07:55:44,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9409) 的命令: GET_ALL_FRIENDS
2025-07-03 07:55:44,348 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 07:55:44,349 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 07:55:46,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ONLINE_FRIENDS
2025-07-03 07:55:46,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 07:55:46,349 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 07:55:46,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9356) 的命令: GET_ALL_FRIENDS
2025-07-03 07:55:46,352 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 07:55:46,353 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 07:55:56,060 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 9409) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:55:56,098 - db - INFO - DatabaseManager: 用户 1028 在线状态已清除。
2025-07-03 07:55:56,099 - server - INFO - SecureChatServer: 已清理用户 8 (ID: 1028) 的会话并更新离线状态。
2025-07-03 07:55:56,099 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9409) 的连接已关闭。
2025-07-03 07:55:56,680 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 9356) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 07:55:56,690 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 07:55:56,690 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 07:55:56,691 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9356) 的连接已关闭。
2025-07-03 08:05:01,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的新连接。
2025-07-03 08:05:01,347 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 12033) 启动。
2025-07-03 08:05:01,360 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: LOGIN
2025-07-03 08:05:01,400 - db - INFO - DatabaseManager: 用户 '8' 认证成功。
2025-07-03 08:05:01,413 - db - INFO - DatabaseManager: 用户 1028 在线状态更新成功: 10.21.139.34:12034。
2025-07-03 08:05:01,414 - server - INFO - SecureChatServer: 用户 8 (ID: 1028) 从 ('127.0.0.1', 12033) 登录。
2025-07-03 08:05:01,415 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:05:01,417 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个在线好友信息。
2025-07-03 08:05:01,418 - server - INFO - SecureChatServer: 向 8 提供了 0 个在线好友列表。
2025-07-03 08:05:01,419 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ALL_FRIENDS
2025-07-03 08:05:01,425 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:05:01,426 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:05:03,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:05:03,351 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个在线好友信息。
2025-07-03 08:05:03,352 - server - INFO - SecureChatServer: 向 8 提供了 0 个在线好友列表。
2025-07-03 08:05:03,353 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ALL_FRIENDS
2025-07-03 08:05:03,354 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:05:03,355 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:05:04,107 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:05:04,109 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个在线好友信息。
2025-07-03 08:05:04,110 - server - INFO - SecureChatServer: 向 8 提供了 0 个在线好友列表。
2025-07-03 08:05:04,111 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ALL_FRIENDS
2025-07-03 08:05:04,112 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:05:04,113 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:05:06,707 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的新连接。
2025-07-03 08:05:06,708 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 12054) 启动。
2025-07-03 08:05:06,708 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: LOGIN
2025-07-03 08:05:06,717 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 08:05:06,719 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:12055。
2025-07-03 08:05:06,720 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 12054) 登录。
2025-07-03 08:05:06,721 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:05:06,722 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:05:06,722 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:05:06,723 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ALL_FRIENDS
2025-07-03 08:05:06,723 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:05:06,724 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:05:08,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:05:08,343 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:05:08,344 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:05:08,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ALL_FRIENDS
2025-07-03 08:05:08,345 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:05:08,346 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:05:09,052 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:05:09,053 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:05:09,054 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:05:09,055 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ALL_FRIENDS
2025-07-03 08:05:09,056 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:05:09,057 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:05:18,800 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:05:18,801 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:05:18,802 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:05:18,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ALL_FRIENDS
2025-07-03 08:05:18,804 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:05:18,804 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:05:28,412 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:05:28,413 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:05:28,414 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:05:28,415 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ALL_FRIENDS
2025-07-03 08:05:28,416 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:05:28,416 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:05:34,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:05:34,336 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:05:34,337 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:05:34,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ALL_FRIENDS
2025-07-03 08:05:34,339 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:05:34,340 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:05:39,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:05:39,336 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:05:39,336 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:05:39,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ALL_FRIENDS
2025-07-03 08:05:39,338 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:05:39,339 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:06:04,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:06:04,396 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:06:04,396 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:06:04,397 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ALL_FRIENDS
2025-07-03 08:06:04,407 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:06:04,410 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:06:09,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:06:09,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:06:09,348 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:06:09,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ALL_FRIENDS
2025-07-03 08:06:09,352 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:06:09,352 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:06:34,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:06:34,337 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:06:34,337 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:06:34,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ALL_FRIENDS
2025-07-03 08:06:34,340 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:06:34,340 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:06:39,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:06:39,341 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:06:39,343 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:06:39,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ALL_FRIENDS
2025-07-03 08:06:39,346 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:06:39,346 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:07:04,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:07:04,374 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:07:04,374 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:07:04,375 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12033) 的命令: GET_ALL_FRIENDS
2025-07-03 08:07:04,388 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:07:04,389 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:07:09,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:07:09,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:07:09,340 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:07:09,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 12054) 的命令: GET_ALL_FRIENDS
2025-07-03 08:07:09,342 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:07:09,342 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:07:20,304 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 12033) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 08:07:20,316 - db - INFO - DatabaseManager: 用户 1028 在线状态已清除。
2025-07-03 08:07:20,316 - server - INFO - SecureChatServer: 已清理用户 8 (ID: 1028) 的会话并更新离线状态。
2025-07-03 08:07:20,316 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 12033) 的连接已关闭。
2025-07-03 08:07:20,907 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 12054) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 08:07:20,923 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 08:07:20,923 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 08:07:20,923 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 12054) 的连接已关闭。
2025-07-03 08:12:15,592 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的新连接。
2025-07-03 08:12:15,594 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 13522) 启动。
2025-07-03 08:12:15,611 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: LOGIN
2025-07-03 08:12:15,689 - db - INFO - DatabaseManager: 用户 '8' 认证成功。
2025-07-03 08:12:15,713 - db - INFO - DatabaseManager: 用户 1028 在线状态更新成功: 10.21.139.34:13523。
2025-07-03 08:12:15,714 - server - INFO - SecureChatServer: 用户 8 (ID: 1028) 从 ('127.0.0.1', 13522) 登录。
2025-07-03 08:12:15,714 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:15,728 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个在线好友信息。
2025-07-03 08:12:15,729 - server - INFO - SecureChatServer: 向 8 提供了 0 个在线好友列表。
2025-07-03 08:12:15,729 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:15,744 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:12:15,745 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:12:17,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:17,375 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个在线好友信息。
2025-07-03 08:12:17,376 - server - INFO - SecureChatServer: 向 8 提供了 0 个在线好友列表。
2025-07-03 08:12:17,376 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:17,396 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:12:17,397 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:12:18,064 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:18,078 - db - INFO - DatabaseManager: 已为用户 1028 检索到 0 个在线好友信息。
2025-07-03 08:12:18,079 - server - INFO - SecureChatServer: 向 8 提供了 0 个在线好友列表。
2025-07-03 08:12:18,080 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:18,091 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:12:18,092 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:12:20,728 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的新连接。
2025-07-03 08:12:20,730 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 13557) 启动。
2025-07-03 08:12:20,731 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: LOGIN
2025-07-03 08:12:20,765 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 08:12:20,781 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:13558。
2025-07-03 08:12:20,783 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 13557) 登录。
2025-07-03 08:12:20,784 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:20,787 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:12:20,788 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:12:20,789 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:20,795 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:12:20,796 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:12:22,317 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:22,318 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:12:22,319 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:12:22,320 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:22,321 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:12:22,322 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:12:22,531 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:22,532 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:12:22,533 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:12:22,534 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:22,535 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:12:22,536 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:12:29,550 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:29,551 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:12:29,552 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:12:29,553 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:29,554 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:12:29,554 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:12:32,874 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:32,874 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:12:32,876 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:12:32,877 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:32,878 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:12:32,879 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:12:33,059 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:33,060 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:12:33,061 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:12:33,063 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:33,064 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:12:33,065 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:12:37,914 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:37,915 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:12:37,916 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:12:37,917 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:37,917 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:12:37,918 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:12:38,094 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:38,095 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:12:38,096 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:12:38,097 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:38,099 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:12:38,099 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:12:48,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:12:48,335 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:12:48,336 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:12:48,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:12:48,341 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:12:48,342 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:13:08,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:13:08,344 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:13:08,345 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:13:08,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:13:08,346 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:13:08,347 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:13:18,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:13:18,346 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:13:18,347 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:13:18,348 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:13:18,349 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:13:18,349 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:13:38,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:13:38,352 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:13:38,353 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:13:38,353 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:13:38,362 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:13:38,362 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:13:48,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:13:48,338 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:13:48,339 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:13:48,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:13:48,343 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:13:48,343 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:14:08,330 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:14:08,332 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:14:08,333 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:14:08,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:14:08,335 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:14:08,335 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:14:18,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:14:18,343 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:14:18,343 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:14:18,348 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:14:18,350 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:14:18,350 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:14:38,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:14:38,367 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:14:38,368 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:14:38,369 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:14:38,381 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:14:38,382 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:14:48,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:14:48,346 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:14:48,346 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:14:48,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:14:48,351 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:14:48,352 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:15:08,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:15:08,341 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:15:08,342 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:15:08,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:15:08,347 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:15:08,348 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:15:18,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:15:18,347 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:15:18,348 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:15:18,353 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:15:18,354 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:15:18,355 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:15:38,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:15:38,374 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:15:38,375 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:15:38,376 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:15:38,387 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:15:38,388 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:16:13,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:16:13,344 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:16:13,345 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:16:13,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:16:13,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:16:13,350 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:16:13,352 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:16:13,367 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:16:13,368 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:16:13,369 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:16:13,370 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:16:13,371 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:17:13,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:17:13,348 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:17:13,368 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:17:13,368 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:17:13,369 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:17:13,369 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:17:13,369 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:17:13,369 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:17:13,381 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:17:13,381 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:17:13,381 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:17:13,382 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:18:13,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:18:13,352 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:18:13,369 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:18:13,369 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:18:13,370 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:18:13,370 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:18:13,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:18:13,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:18:13,379 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:18:13,380 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:18:13,382 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:18:13,383 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:19:13,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:19:13,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:19:13,366 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:19:13,366 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:19:13,367 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:19:13,367 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:19:13,367 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13522) 的命令: GET_ALL_FRIENDS
2025-07-03 08:19:13,368 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13557) 的命令: GET_ALL_FRIENDS
2025-07-03 08:19:13,381 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:19:13,381 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:19:13,382 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:19:13,382 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:19:52,243 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 13522) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 08:19:52,245 - db - INFO - DatabaseManager: 用户 1028 在线状态已清除。
2025-07-03 08:19:52,246 - server - INFO - SecureChatServer: 已清理用户 8 (ID: 1028) 的会话并更新离线状态。
2025-07-03 08:19:52,246 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 13522) 的连接已关闭。
2025-07-03 08:19:52,880 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 13557) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 08:19:52,890 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 08:19:52,890 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 08:19:52,890 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 13557) 的连接已关闭。
2025-07-03 08:29:13,425 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的新连接。
2025-07-03 08:29:13,427 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2755) 启动。
2025-07-03 08:29:13,427 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: LOGIN
2025-07-03 08:29:13,463 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 08:29:13,475 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:2756。
2025-07-03 08:29:13,476 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 2755) 登录。
2025-07-03 08:29:13,477 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:29:13,481 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:29:13,482 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:29:13,482 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ALL_FRIENDS
2025-07-03 08:29:13,489 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:29:13,490 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:29:15,038 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:29:15,039 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:29:15,041 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:29:15,041 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ALL_FRIENDS
2025-07-03 08:29:15,042 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:29:15,042 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:29:15,738 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:29:15,740 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:29:15,741 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:29:15,743 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ALL_FRIENDS
2025-07-03 08:29:15,744 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:29:15,745 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:29:19,105 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的新连接。
2025-07-03 08:29:19,106 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2788) 启动。
2025-07-03 08:29:19,107 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: LOGIN
2025-07-03 08:29:19,114 - db - INFO - DatabaseManager: 用户 '8' 认证成功。
2025-07-03 08:29:19,117 - db - INFO - DatabaseManager: 用户 1028 在线状态更新成功: 10.21.139.34:2789。
2025-07-03 08:29:19,118 - server - INFO - SecureChatServer: 用户 8 (ID: 1028) 从 ('127.0.0.1', 2788) 登录。
2025-07-03 08:29:19,118 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:29:19,119 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:29:19,120 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:29:19,121 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ALL_FRIENDS
2025-07-03 08:29:19,123 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:29:19,124 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:29:20,647 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:29:20,648 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:29:20,650 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:29:20,651 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ALL_FRIENDS
2025-07-03 08:29:20,652 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:29:20,653 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:29:20,863 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:29:20,864 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:29:20,865 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:29:20,866 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ALL_FRIENDS
2025-07-03 08:29:20,866 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:29:20,867 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:29:23,596 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:29:23,597 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:29:23,598 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:29:23,599 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ALL_FRIENDS
2025-07-03 08:29:23,600 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:29:23,600 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:29:45,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:29:45,357 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:29:45,358 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:29:45,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ALL_FRIENDS
2025-07-03 08:29:45,381 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:29:45,381 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:29:50,723 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:29:50,747 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:29:50,747 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:29:50,749 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ALL_FRIENDS
2025-07-03 08:29:50,759 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:29:50,760 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:30:15,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:30:15,343 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:30:15,344 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:30:15,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ALL_FRIENDS
2025-07-03 08:30:15,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:30:15,351 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:30:21,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:30:21,339 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:30:21,339 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:30:21,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ALL_FRIENDS
2025-07-03 08:30:21,346 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:30:21,347 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:30:45,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:30:45,369 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:30:45,371 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:30:45,372 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2755) 的命令: GET_ALL_FRIENDS
2025-07-03 08:30:45,374 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:30:45,375 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:30:51,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:30:51,370 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:30:51,371 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:30:51,371 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2788) 的命令: GET_ALL_FRIENDS
2025-07-03 08:30:51,386 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:30:51,387 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:31:07,101 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2788) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 08:31:07,133 - db - INFO - DatabaseManager: 用户 1028 在线状态已清除。
2025-07-03 08:31:07,133 - server - INFO - SecureChatServer: 已清理用户 8 (ID: 1028) 的会话并更新离线状态。
2025-07-03 08:31:07,134 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2788) 的连接已关闭。
2025-07-03 08:31:07,743 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2755) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 08:31:07,745 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 08:31:07,746 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 08:31:07,746 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2755) 的连接已关闭。
2025-07-03 08:32:17,441 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的新连接。
2025-07-03 08:32:17,441 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3251) 启动。
2025-07-03 08:32:17,442 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: LOGIN
2025-07-03 08:32:17,463 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 08:32:17,474 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:3252。
2025-07-03 08:32:17,475 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 3251) 登录。
2025-07-03 08:32:17,475 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:32:17,478 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:32:17,478 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:32:17,479 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ALL_FRIENDS
2025-07-03 08:32:17,484 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:32:17,484 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:32:19,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:32:19,347 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:32:19,348 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:32:19,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ALL_FRIENDS
2025-07-03 08:32:19,349 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:32:19,351 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:32:19,978 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:32:19,979 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:32:19,980 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:32:19,980 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ALL_FRIENDS
2025-07-03 08:32:19,981 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:32:19,982 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:32:21,267 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的新连接。
2025-07-03 08:32:21,268 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3275) 启动。
2025-07-03 08:32:21,269 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: LOGIN
2025-07-03 08:32:21,275 - db - INFO - DatabaseManager: 用户 '8' 认证成功。
2025-07-03 08:32:21,278 - db - INFO - DatabaseManager: 用户 1028 在线状态更新成功: 10.21.139.34:3276。
2025-07-03 08:32:21,279 - server - INFO - SecureChatServer: 用户 8 (ID: 1028) 从 ('127.0.0.1', 3275) 登录。
2025-07-03 08:32:21,281 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:32:21,282 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:32:21,283 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:32:21,284 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ALL_FRIENDS
2025-07-03 08:32:21,285 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:32:21,286 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:32:22,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:32:22,810 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:32:22,811 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:32:22,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ALL_FRIENDS
2025-07-03 08:32:22,813 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:32:22,814 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:32:23,035 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:32:23,036 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:32:23,037 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:32:23,039 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ALL_FRIENDS
2025-07-03 08:32:23,040 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:32:23,041 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:32:29,499 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:32:29,500 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:32:29,501 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:32:29,502 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ALL_FRIENDS
2025-07-03 08:32:29,503 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:32:29,504 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:32:50,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:32:50,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:32:50,341 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:32:50,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ALL_FRIENDS
2025-07-03 08:32:50,344 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:32:50,345 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:32:52,206 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:32:52,207 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:32:52,207 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:32:52,208 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ALL_FRIENDS
2025-07-03 08:32:52,209 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:32:52,210 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:32:52,436 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:32:52,437 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:32:52,438 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:32:52,439 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ALL_FRIENDS
2025-07-03 08:32:52,440 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:32:52,440 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:33:20,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:33:20,380 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:33:20,381 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:33:20,382 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ALL_FRIENDS
2025-07-03 08:33:20,396 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:33:20,397 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:33:22,331 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:33:22,332 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:33:22,333 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:33:22,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ALL_FRIENDS
2025-07-03 08:33:22,335 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:33:22,336 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:33:50,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:33:50,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:33:50,341 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:33:50,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3251) 的命令: GET_ALL_FRIENDS
2025-07-03 08:33:50,342 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:33:50,343 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:33:52,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:33:52,337 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:33:52,338 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:33:52,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3275) 的命令: GET_ALL_FRIENDS
2025-07-03 08:33:52,339 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:33:52,340 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:34:13,050 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 3275) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 08:34:13,081 - db - INFO - DatabaseManager: 用户 1028 在线状态已清除。
2025-07-03 08:34:13,081 - server - INFO - SecureChatServer: 已清理用户 8 (ID: 1028) 的会话并更新离线状态。
2025-07-03 08:34:13,081 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3275) 的连接已关闭。
2025-07-03 08:34:13,682 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 3251) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 08:34:13,684 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 08:34:13,685 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 08:34:13,686 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3251) 的连接已关闭。
2025-07-03 08:37:28,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的新连接。
2025-07-03 08:37:28,800 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4113) 启动。
2025-07-03 08:37:28,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: LOGIN
2025-07-03 08:37:28,855 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 08:37:28,877 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:4114。
2025-07-03 08:37:28,878 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 4113) 登录。
2025-07-03 08:37:28,879 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:37:28,888 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:37:28,889 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:37:28,889 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:37:28,899 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:37:28,900 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:37:31,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:37:31,357 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:37:31,357 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:37:31,357 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:37:31,369 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:37:31,371 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:37:32,247 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:37:32,248 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:37:32,249 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:37:32,250 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:37:32,251 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:37:32,251 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:37:32,648 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的新连接。
2025-07-03 08:37:32,649 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4137) 启动。
2025-07-03 08:37:32,663 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: LOGIN
2025-07-03 08:37:32,676 - db - INFO - DatabaseManager: 用户 '8' 认证成功。
2025-07-03 08:37:32,685 - db - INFO - DatabaseManager: 用户 1028 在线状态更新成功: 10.21.139.34:4138。
2025-07-03 08:37:32,687 - server - INFO - SecureChatServer: 用户 8 (ID: 1028) 从 ('127.0.0.1', 4137) 登录。
2025-07-03 08:37:32,687 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:37:32,689 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:37:32,691 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:37:32,692 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:37:32,693 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:37:32,693 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:37:34,223 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:37:34,225 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:37:34,225 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:37:34,226 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:37:34,229 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:37:34,229 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:37:34,449 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:37:34,450 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:37:34,451 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:37:34,453 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:37:34,454 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:37:34,454 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:37:38,297 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:37:38,299 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:37:38,299 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:37:38,300 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:37:38,302 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:37:38,303 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:38:01,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:38:01,527 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:38:01,529 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:38:01,530 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:38:01,531 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:38:01,531 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:38:04,302 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:38:04,303 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:38:04,304 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:38:04,305 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:38:04,306 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:38:04,307 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:38:32,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:38:32,360 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:38:32,361 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:38:32,362 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:38:32,376 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:38:32,377 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:38:34,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:38:34,366 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:38:34,367 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:38:34,368 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:38:34,380 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:38:34,381 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:39:01,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:39:01,552 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:39:01,552 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:39:01,553 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:39:01,560 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:39:01,560 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:39:04,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:39:04,334 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:39:04,335 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:39:04,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:39:04,337 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:39:04,337 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:39:32,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:39:32,364 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:39:32,365 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:39:32,366 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:39:32,368 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:39:32,369 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:39:34,331 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:39:34,332 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:39:34,333 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:39:34,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:39:34,333 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:39:34,334 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:40:02,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:40:02,362 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:40:02,364 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:40:02,365 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:40:02,375 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:40:02,377 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:40:04,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:40:04,341 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:40:04,342 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:40:04,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:40:04,344 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:40:04,346 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:40:32,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:40:32,344 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:40:32,344 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:40:32,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:40:32,346 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:40:32,347 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:40:34,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:40:34,341 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:40:34,342 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:40:34,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:40:34,342 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:40:34,344 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:41:13,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:41:13,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:41:13,368 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:41:13,369 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:41:13,370 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:41:13,370 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:41:13,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:41:13,371 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:41:13,383 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:41:13,384 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:41:13,384 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:41:13,384 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:41:41,450 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:41:41,451 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:41:41,452 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:41:41,455 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:41:41,456 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:41:41,457 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:42:00,040 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:42:00,064 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:42:00,066 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:42:00,067 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:42:00,076 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:42:00,077 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:42:02,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:42:02,333 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:42:02,335 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:42:02,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:42:02,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:42:02,340 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:42:04,303 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:42:04,305 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:42:04,306 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:42:04,307 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:42:04,308 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:42:04,308 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:42:32,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:42:32,345 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:42:32,349 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:42:32,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:42:32,350 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:42:32,352 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:42:34,331 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:42:34,342 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:42:34,342 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:42:34,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:42:34,344 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:42:34,344 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:43:04,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:43:04,372 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:43:04,374 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:43:04,375 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4137) 的命令: GET_ALL_FRIENDS
2025-07-03 08:43:04,388 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:43:04,389 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:43:13,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:43:13,338 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:43:13,338 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:43:13,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4113) 的命令: GET_ALL_FRIENDS
2025-07-03 08:43:13,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:43:13,341 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:44:03,676 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4137) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 08:44:03,716 - db - INFO - DatabaseManager: 用户 1028 在线状态已清除。
2025-07-03 08:44:03,717 - server - INFO - SecureChatServer: 已清理用户 8 (ID: 1028) 的会话并更新离线状态。
2025-07-03 08:44:03,717 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4137) 的连接已关闭。
2025-07-03 08:44:04,258 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4113) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 08:44:04,274 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-03 08:44:04,274 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-03 08:44:04,274 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4113) 的连接已关闭。
2025-07-03 08:45:32,918 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的新连接。
2025-07-03 08:45:32,918 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5674) 启动。
2025-07-03 08:45:32,919 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: LOGIN
2025-07-03 08:45:32,944 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-03 08:45:32,958 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:5675。
2025-07-03 08:45:32,958 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 5674) 登录。
2025-07-03 08:45:32,959 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:45:32,961 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:45:32,962 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:45:32,962 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:45:32,971 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:45:32,971 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:45:35,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:45:35,345 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:45:35,346 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:45:35,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:45:35,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:45:35,349 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:45:35,990 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:45:35,991 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-03 08:45:35,992 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-03 08:45:35,993 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:45:35,994 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:45:35,995 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:45:36,613 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的新连接。
2025-07-03 08:45:36,614 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5705) 启动。
2025-07-03 08:45:36,614 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: LOGIN
2025-07-03 08:45:36,616 - db - INFO - DatabaseManager: 用户 '8' 认证成功。
2025-07-03 08:45:36,618 - db - INFO - DatabaseManager: 用户 1028 在线状态更新成功: 10.21.139.34:5706。
2025-07-03 08:45:36,619 - server - INFO - SecureChatServer: 用户 8 (ID: 1028) 从 ('127.0.0.1', 5705) 登录。
2025-07-03 08:45:36,620 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:45:36,621 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:45:36,622 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:45:36,623 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:45:36,624 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:45:36,625 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:45:38,352 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:45:38,354 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:45:38,355 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:45:38,356 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:45:38,357 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:45:38,357 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:45:39,331 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:45:39,332 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:45:39,333 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:45:39,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:45:39,335 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:45:39,335 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:45:39,672 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:45:39,673 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:45:39,674 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:45:39,675 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:45:39,676 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:45:39,677 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:45:43,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:45:43,352 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:45:43,353 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:45:43,354 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:45:43,356 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:45:43,357 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:46:05,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:46:05,509 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:46:05,510 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:46:05,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:46:05,512 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:46:05,513 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:46:09,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:46:09,346 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:46:09,347 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:46:09,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:46:09,352 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:46:09,353 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:46:09,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:46:09,836 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:46:09,837 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:46:09,838 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:46:09,849 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:46:09,850 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:46:10,267 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:46:10,282 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:46:10,283 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:46:10,284 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:46:10,293 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:46:10,294 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:46:39,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:46:39,356 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:46:39,357 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:46:39,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:46:39,366 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:46:39,367 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:46:39,999 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:46:40,000 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:46:40,001 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:46:40,001 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:46:40,002 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:46:40,003 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:47:09,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:47:09,342 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:47:09,342 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:47:09,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:47:09,346 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:47:09,346 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:47:09,999 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:47:10,001 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:47:10,002 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:47:10,002 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:47:10,002 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:47:10,003 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:47:39,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:47:39,363 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:47:39,364 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:47:39,365 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:47:39,387 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:47:39,389 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:47:40,000 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:47:40,001 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:47:40,002 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:47:40,003 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:47:40,005 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:47:40,006 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:48:09,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:48:09,338 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:48:09,339 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:48:09,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:48:09,342 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:48:09,343 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:48:10,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:48:10,334 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:48:10,334 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:48:10,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:48:10,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:48:10,340 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:48:39,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:48:39,364 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:48:39,364 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:48:39,365 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:48:39,373 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:48:39,374 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:48:40,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:48:40,337 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:48:40,338 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:48:40,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:48:40,342 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:48:40,343 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:49:10,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:49:10,333 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-03 08:49:10,334 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-03 08:49:10,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5674) 的命令: GET_ALL_FRIENDS
2025-07-03 08:49:10,337 - db - INFO - DatabaseManager: 已为用户 1021 检索到 6 个所有好友信息。
2025-07-03 08:49:10,338 - server - INFO - SecureChatServer: 向 1 提供了 6 个所有好友列表。
2025-07-03 08:49:13,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ONLINE_FRIENDS
2025-07-03 08:49:13,341 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个在线好友信息。
2025-07-03 08:49:13,342 - server - INFO - SecureChatServer: 向 8 提供了 1 个在线好友列表。
2025-07-03 08:49:13,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5705) 的命令: GET_ALL_FRIENDS
2025-07-03 08:49:13,346 - db - INFO - DatabaseManager: 已为用户 1028 检索到 1 个所有好友信息。
2025-07-03 08:49:13,346 - server - INFO - SecureChatServer: 向 8 提供了 1 个所有好友列表。
2025-07-03 08:56:20,695 - __main__ - INFO - 服务器程序启动。
2025-07-03 08:56:20,697 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-03 08:56:20,846 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-03 08:56:20,858 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-03 08:56:20,869 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-03 08:56:20,887 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-03 08:56:20,887 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-03 08:56:20,888 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-03 08:56:20,889 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-03 09:07:51,577 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19992) 的新连接。
2025-07-03 09:07:51,579 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 19992) 启动。
2025-07-03 09:07:51,579 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19992) 的命令: REGISTER
2025-07-03 09:07:51,625 - db - INFO - DatabaseManager: 用户 'A' 注册成功。
2025-07-03 09:07:51,627 - server - INFO - SecureChatServer: 用户 A 已注册。
2025-07-03 09:07:51,628 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 19992) 断开连接，用户未登录。
2025-07-03 09:07:51,630 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 19992) 的连接已关闭。
2025-07-03 09:08:01,062 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20012) 的新连接。
2025-07-03 09:08:01,063 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 20012) 启动。
2025-07-03 09:08:01,065 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20012) 的命令: REGISTER
2025-07-03 09:08:01,068 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-07-03 09:08:01,069 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-07-03 09:08:01,071 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 20012) 断开连接，用户未登录。
2025-07-03 09:08:01,071 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 20012) 的连接已关闭。
2025-07-03 09:08:11,602 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的新连接。
2025-07-03 09:08:11,602 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 20036) 启动。
2025-07-03 09:08:11,614 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: LOGIN
2025-07-03 09:08:11,618 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 09:08:11,626 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:20037。
2025-07-03 09:08:11,627 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 20036) 登录。
2025-07-03 09:08:11,627 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:11,632 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:08:11,633 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:08:11,634 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:11,637 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:08:11,638 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:08:13,164 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:13,166 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:08:13,169 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:08:13,170 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:13,173 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:08:13,175 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:08:13,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:13,348 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:08:13,349 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:08:13,354 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:13,358 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:08:13,368 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:08:15,309 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:15,312 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:08:15,315 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:08:15,316 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:15,319 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:08:15,322 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:08:20,122 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的新连接。
2025-07-03 09:08:20,124 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 20060) 启动。
2025-07-03 09:08:20,157 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: LOGIN
2025-07-03 09:08:20,167 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 09:08:20,178 - db - INFO - DatabaseManager: 用户 4024 在线状态更新成功: 10.21.240.25:20061。
2025-07-03 09:08:20,180 - server - INFO - SecureChatServer: 用户 B (ID: 4024) 从 ('127.0.0.1', 20060) 登录。
2025-07-03 09:08:20,181 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:20,183 - db - INFO - DatabaseManager: 已为用户 4024 检索到 0 个在线好友信息。
2025-07-03 09:08:20,185 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 09:08:20,186 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:20,188 - db - INFO - DatabaseManager: 已为用户 4024 检索到 0 个所有好友信息。
2025-07-03 09:08:20,189 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 09:08:21,732 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:21,736 - db - INFO - DatabaseManager: 已为用户 4024 检索到 0 个在线好友信息。
2025-07-03 09:08:21,740 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 09:08:21,741 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:21,745 - db - INFO - DatabaseManager: 已为用户 4024 检索到 0 个所有好友信息。
2025-07-03 09:08:21,748 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 09:08:22,025 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:22,026 - db - INFO - DatabaseManager: 已为用户 4024 检索到 0 个在线好友信息。
2025-07-03 09:08:22,027 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 09:08:22,031 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:22,035 - db - INFO - DatabaseManager: 已为用户 4024 检索到 0 个所有好友信息。
2025-07-03 09:08:22,036 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 09:08:24,003 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:24,004 - db - INFO - DatabaseManager: 已为用户 4024 检索到 0 个在线好友信息。
2025-07-03 09:08:24,005 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 09:08:24,006 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:24,007 - db - INFO - DatabaseManager: 已为用户 4024 检索到 0 个所有好友信息。
2025-07-03 09:08:24,008 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 09:08:37,331 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:37,338 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:08:37,339 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:08:37,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:37,342 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:08:37,343 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:08:43,310 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:43,313 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:08:43,314 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:08:43,315 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:43,318 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:08:43,322 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:08:48,668 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_USERS
2025-07-03 09:08:48,671 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-03 09:08:48,671 - server - INFO - SecureChatServer: 向 A 提供了所有注册用户列表。
2025-07-03 09:08:49,219 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: ADD_FRIEND
2025-07-03 09:08:49,229 - db - INFO - DatabaseManager: 用户 4023 添加好友 4024 成功。
2025-07-03 09:08:49,230 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 4024) 为好友成功。
2025-07-03 09:08:49,231 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:49,240 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:08:49,241 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:08:49,243 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:49,258 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:08:49,266 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:08:52,499 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:52,501 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:08:52,502 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:08:52,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:52,517 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:08:52,518 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:08:54,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:08:54,350 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:08:54,353 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:08:54,355 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:08:54,356 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:08:54,357 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:09:13,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:09:13,517 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:09:13,520 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:09:13,541 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:09:13,544 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:09:13,546 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:09:22,012 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:09:22,013 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:09:22,014 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:09:22,015 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ALL_FRIENDS
2025-07-03 09:09:22,017 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:09:22,018 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:09:43,308 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:09:43,320 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:09:43,321 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:09:43,323 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:09:43,325 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:09:43,327 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:09:52,505 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:09:52,508 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:09:52,509 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:09:52,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20060) 的命令: GET_ALL_FRIENDS
2025-07-03 09:09:52,520 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:09:52,522 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:10:13,508 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:10:13,510 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:10:13,511 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:10:13,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 20036) 的命令: GET_ALL_FRIENDS
2025-07-03 09:10:13,517 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:10:13,518 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:10:15,288 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 20036) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:10:15,292 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 09:10:15,293 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 09:10:15,293 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 20036) 的连接已关闭。
2025-07-03 09:10:16,079 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 20060) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:10:16,085 - db - INFO - DatabaseManager: 用户 4024 在线状态已清除。
2025-07-03 09:10:16,086 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4024) 的会话并更新离线状态。
2025-07-03 09:10:16,086 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 20060) 的连接已关闭。
2025-07-03 09:11:08,774 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的新连接。
2025-07-03 09:11:08,775 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 29748) 启动。
2025-07-03 09:11:08,776 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: LOGIN
2025-07-03 09:11:08,777 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 09:11:08,780 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:29749。
2025-07-03 09:11:08,780 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 29748) 登录。
2025-07-03 09:11:08,781 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:11:08,781 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:11:08,783 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:11:08,783 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:11:08,784 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:11:08,784 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:11:10,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:11:10,519 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:11:10,521 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:11:10,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:11:10,522 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:11:10,524 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:11:10,605 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:11:10,606 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:11:10,607 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:11:10,610 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:11:10,611 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:11:10,612 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:11:14,217 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的新连接。
2025-07-03 09:11:14,217 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 29768) 启动。
2025-07-03 09:11:14,218 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: LOGIN
2025-07-03 09:11:14,220 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 09:11:14,223 - db - INFO - DatabaseManager: 用户 4024 在线状态更新成功: 10.21.240.25:29769。
2025-07-03 09:11:14,224 - server - INFO - SecureChatServer: 用户 B (ID: 4024) 从 ('127.0.0.1', 29768) 登录。
2025-07-03 09:11:14,224 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:11:14,225 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:11:14,226 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:11:14,227 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ALL_FRIENDS
2025-07-03 09:11:14,228 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:11:14,229 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:11:16,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:11:16,523 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:11:16,525 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:11:16,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ALL_FRIENDS
2025-07-03 09:11:16,528 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:11:16,529 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:11:16,718 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:11:16,721 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:11:16,723 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:11:16,724 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ALL_FRIENDS
2025-07-03 09:11:16,726 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:11:16,727 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:11:17,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:11:17,812 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:11:17,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:11:17,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:11:17,817 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:11:17,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:11:42,228 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:11:42,230 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:11:42,233 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:11:42,254 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:11:42,258 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:11:42,259 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:11:47,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:11:47,522 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:11:47,524 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:11:47,535 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ALL_FRIENDS
2025-07-03 09:11:47,537 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:11:47,538 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:12:11,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:12:11,519 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:12:11,521 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:12:11,531 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:12:11,533 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:12:11,535 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:12:17,516 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:12:17,518 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:12:17,521 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:12:17,523 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ALL_FRIENDS
2025-07-03 09:12:17,525 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:12:17,527 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:12:41,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:12:41,514 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:12:41,515 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:12:41,516 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:12:41,518 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:12:41,518 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:12:47,516 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:12:47,517 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:12:47,520 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:12:47,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ALL_FRIENDS
2025-07-03 09:12:47,532 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:12:47,533 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:13:11,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:13:11,514 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:13:11,515 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:13:11,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:13:11,528 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:13:11,530 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:13:17,516 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:13:17,518 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:13:17,520 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:13:17,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ALL_FRIENDS
2025-07-03 09:13:17,533 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:13:17,535 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:13:41,514 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:13:41,515 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:13:41,515 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:13:41,516 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:13:41,517 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:13:41,518 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:13:47,514 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:13:47,515 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:13:47,515 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:13:47,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ALL_FRIENDS
2025-07-03 09:13:47,517 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:13:47,518 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:14:11,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:14:11,517 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:14:11,517 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:14:11,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:14:11,523 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:14:11,525 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:14:17,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:14:17,512 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:14:17,513 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:14:17,516 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ALL_FRIENDS
2025-07-03 09:14:17,517 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:14:17,517 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:15:10,531 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:15:10,532 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:15:10,536 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:15:10,539 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:15:10,546 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29768) 的命令: GET_ALL_FRIENDS
2025-07-03 09:15:10,549 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:15:10,550 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:15:10,552 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:15:10,553 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:15:10,556 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29748) 的命令: GET_ALL_FRIENDS
2025-07-03 09:15:10,558 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:15:10,559 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:15:26,261 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 29748) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:15:26,265 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 09:15:26,266 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 09:15:26,267 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 29748) 的连接已关闭。
2025-07-03 09:15:28,683 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 29768) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:15:28,692 - db - INFO - DatabaseManager: 用户 4024 在线状态已清除。
2025-07-03 09:15:28,693 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4024) 的会话并更新离线状态。
2025-07-03 09:15:28,694 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 29768) 的连接已关闭。
2025-07-03 09:15:40,842 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的新连接。
2025-07-03 09:15:40,843 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 30352) 启动。
2025-07-03 09:15:40,843 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: LOGIN
2025-07-03 09:15:40,844 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 09:15:40,846 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:30353。
2025-07-03 09:15:40,846 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 30352) 登录。
2025-07-03 09:15:40,847 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:15:40,847 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:15:40,850 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:15:40,851 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ALL_FRIENDS
2025-07-03 09:15:40,852 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:15:40,853 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:15:42,399 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:15:42,401 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:15:42,406 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:15:42,409 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ALL_FRIENDS
2025-07-03 09:15:42,414 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:15:42,417 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:15:42,675 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:15:42,677 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:15:42,679 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:15:42,680 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ALL_FRIENDS
2025-07-03 09:15:42,681 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:15:42,682 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:16:00,173 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的新连接。
2025-07-03 09:16:00,174 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 30400) 启动。
2025-07-03 09:16:00,186 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: LOGIN
2025-07-03 09:16:00,187 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 09:16:00,190 - db - INFO - DatabaseManager: 用户 4024 在线状态更新成功: 10.21.240.25:30401。
2025-07-03 09:16:00,191 - server - INFO - SecureChatServer: 用户 B (ID: 4024) 从 ('127.0.0.1', 30400) 登录。
2025-07-03 09:16:00,191 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:16:00,193 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:16:00,193 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:16:00,194 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ALL_FRIENDS
2025-07-03 09:16:00,196 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:16:00,196 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:16:01,745 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:16:01,749 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:16:01,761 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:16:01,764 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ALL_FRIENDS
2025-07-03 09:16:01,766 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:16:01,768 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:16:01,941 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:16:01,942 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:16:01,943 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:16:01,944 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ALL_FRIENDS
2025-07-03 09:16:01,945 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:16:01,946 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:16:13,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:16:13,510 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:16:13,512 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:16:13,528 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ALL_FRIENDS
2025-07-03 09:16:13,530 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:16:13,533 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:16:32,510 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:16:32,512 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:16:32,514 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:16:32,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ALL_FRIENDS
2025-07-03 09:16:32,528 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:16:32,530 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:16:43,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:16:43,517 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:16:43,519 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:16:43,538 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ALL_FRIENDS
2025-07-03 09:16:43,542 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:16:43,545 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:17:02,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:17:02,521 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:17:02,523 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:17:02,539 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ALL_FRIENDS
2025-07-03 09:17:02,542 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:17:02,544 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:17:13,505 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:17:13,507 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:17:13,508 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:17:13,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ALL_FRIENDS
2025-07-03 09:17:13,517 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:17:13,519 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:17:32,507 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:17:32,508 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:17:32,509 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:17:32,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30400) 的命令: GET_ALL_FRIENDS
2025-07-03 09:17:32,513 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:17:32,514 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:17:43,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:17:43,520 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:17:43,520 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:17:43,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30352) 的命令: GET_ALL_FRIENDS
2025-07-03 09:17:43,533 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:17:43,535 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:17:44,870 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 30400) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:17:44,873 - db - INFO - DatabaseManager: 用户 4024 在线状态已清除。
2025-07-03 09:17:44,874 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4024) 的会话并更新离线状态。
2025-07-03 09:17:44,874 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 30400) 的连接已关闭。
2025-07-03 09:17:50,503 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 30352) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:17:50,511 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 09:17:50,512 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 09:17:50,512 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 30352) 的连接已关闭。
2025-07-03 09:18:10,331 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的新连接。
2025-07-03 09:18:10,331 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 30682) 启动。
2025-07-03 09:18:10,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: LOGIN
2025-07-03 09:18:10,335 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 09:18:10,338 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:30683。
2025-07-03 09:18:10,339 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 30682) 登录。
2025-07-03 09:18:10,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:18:10,341 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:18:10,342 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:18:10,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: GET_ALL_FRIENDS
2025-07-03 09:18:10,343 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:18:10,344 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:18:12,539 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:18:12,541 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:18:12,542 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:18:12,543 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: GET_ALL_FRIENDS
2025-07-03 09:18:12,545 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:18:12,546 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:18:12,685 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:18:12,687 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:18:12,690 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:18:12,695 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: GET_ALL_FRIENDS
2025-07-03 09:18:12,698 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:18:12,700 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:18:17,224 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的新连接。
2025-07-03 09:18:17,225 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 30707) 启动。
2025-07-03 09:18:17,227 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: LOGIN
2025-07-03 09:18:17,230 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 09:18:17,246 - db - INFO - DatabaseManager: 用户 4024 在线状态更新成功: 10.21.240.25:30708。
2025-07-03 09:18:17,247 - server - INFO - SecureChatServer: 用户 B (ID: 4024) 从 ('127.0.0.1', 30707) 登录。
2025-07-03 09:18:17,247 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:18:17,250 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:18:17,250 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:18:17,252 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: GET_ALL_FRIENDS
2025-07-03 09:18:17,253 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:18:17,254 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:18:19,530 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:18:19,532 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:18:19,534 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:18:19,536 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: GET_ALL_FRIENDS
2025-07-03 09:18:19,540 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:18:19,542 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:18:19,721 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:18:19,723 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:18:19,725 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:18:19,729 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: GET_ALL_FRIENDS
2025-07-03 09:18:19,730 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:18:19,731 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:18:43,217 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:18:43,220 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:18:43,222 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:18:43,237 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: GET_ALL_FRIENDS
2025-07-03 09:18:43,239 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:18:43,240 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:18:50,508 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:18:50,514 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:18:50,519 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:18:50,528 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: GET_ALL_FRIENDS
2025-07-03 09:18:50,530 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:18:50,531 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:19:13,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:19:13,512 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:19:13,515 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:19:13,523 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30682) 的命令: GET_ALL_FRIENDS
2025-07-03 09:19:13,525 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:19:13,527 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:19:20,507 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:19:20,508 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:19:20,509 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:19:20,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30707) 的命令: GET_ALL_FRIENDS
2025-07-03 09:19:20,512 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:19:20,513 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:19:31,951 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 30682) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:19:31,964 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 09:19:31,965 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 09:19:31,966 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 30682) 的连接已关闭。
2025-07-03 09:19:33,613 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 30707) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:19:33,621 - db - INFO - DatabaseManager: 用户 4024 在线状态已清除。
2025-07-03 09:19:33,622 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4024) 的会话并更新离线状态。
2025-07-03 09:19:33,623 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 30707) 的连接已关闭。
2025-07-03 09:20:22,457 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的新连接。
2025-07-03 09:20:22,458 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 31012) 启动。
2025-07-03 09:20:22,459 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: LOGIN
2025-07-03 09:20:22,461 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 09:20:22,464 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:31013。
2025-07-03 09:20:22,464 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 31012) 登录。
2025-07-03 09:20:22,465 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:20:22,466 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:20:22,467 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:20:22,468 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:20:22,469 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:20:22,470 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:20:23,998 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:20:23,999 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:20:24,002 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:20:24,002 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:20:24,003 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:20:24,004 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:20:24,099 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:20:24,100 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:20:24,101 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:20:24,102 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:20:24,103 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:20:24,105 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:20:26,068 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的新连接。
2025-07-03 09:20:26,068 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 31027) 启动。
2025-07-03 09:20:26,069 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: LOGIN
2025-07-03 09:20:26,071 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 09:20:26,072 - db - INFO - DatabaseManager: 用户 4024 在线状态更新成功: 10.21.240.25:31028。
2025-07-03 09:20:26,073 - server - INFO - SecureChatServer: 用户 B (ID: 4024) 从 ('127.0.0.1', 31027) 登录。
2025-07-03 09:20:26,074 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:20:26,075 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:20:26,075 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:20:26,078 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ALL_FRIENDS
2025-07-03 09:20:26,080 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:20:26,081 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:20:27,620 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:20:27,623 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:20:27,624 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:20:27,627 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ALL_FRIENDS
2025-07-03 09:20:27,630 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:20:27,632 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:20:27,765 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:20:27,768 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:20:27,769 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:20:27,771 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ALL_FRIENDS
2025-07-03 09:20:27,773 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:20:27,774 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:20:36,243 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:20:36,245 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:20:36,246 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:20:36,247 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:20:36,248 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:20:36,249 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:20:54,074 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:20:54,075 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:20:54,076 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:20:54,077 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:20:54,078 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:20:54,078 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:20:57,739 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:20:57,744 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:20:57,750 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:20:57,752 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ALL_FRIENDS
2025-07-03 09:20:57,759 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:20:57,764 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:21:24,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:21:24,519 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:21:24,521 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:21:24,534 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:21:24,537 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:21:24,538 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:21:28,507 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:21:28,509 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:21:28,513 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:21:28,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ALL_FRIENDS
2025-07-03 09:21:28,521 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:21:28,523 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:21:38,223 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:21:38,224 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:21:38,226 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:21:38,227 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:21:38,228 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:21:38,229 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:21:38,397 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:21:38,398 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:21:38,399 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:21:38,402 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:21:38,403 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:21:38,403 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:21:58,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:21:58,515 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:21:58,517 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:21:58,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ALL_FRIENDS
2025-07-03 09:21:58,529 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:21:58,531 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:22:08,348 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:22:08,350 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:22:08,352 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:22:08,355 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:22:08,357 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:22:08,359 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:22:28,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:22:28,517 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:22:28,518 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:22:28,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ALL_FRIENDS
2025-07-03 09:22:28,520 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:22:28,521 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:22:38,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:22:38,513 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:22:38,515 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:22:38,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:22:38,520 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:22:38,521 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:22:57,735 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:22:57,736 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:22:57,737 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:22:57,739 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ALL_FRIENDS
2025-07-03 09:22:57,739 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:22:57,740 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:23:08,354 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:23:08,355 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:23:08,356 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:23:08,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:23:08,359 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:23:08,360 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:23:27,742 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:23:27,745 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:23:27,748 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:23:27,751 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31027) 的命令: GET_ALL_FRIENDS
2025-07-03 09:23:27,754 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:23:27,756 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:23:38,354 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:23:38,357 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:23:38,359 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:23:38,362 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31012) 的命令: GET_ALL_FRIENDS
2025-07-03 09:23:38,364 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:23:38,367 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:23:52,723 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 31012) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:23:52,728 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 09:23:52,729 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 09:23:52,730 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 31012) 的连接已关闭。
2025-07-03 09:23:54,290 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 31027) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:23:54,294 - db - INFO - DatabaseManager: 用户 4024 在线状态已清除。
2025-07-03 09:23:54,295 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4024) 的会话并更新离线状态。
2025-07-03 09:23:54,296 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 31027) 的连接已关闭。
2025-07-03 09:36:27,791 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的新连接。
2025-07-03 09:36:27,792 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 33829) 启动。
2025-07-03 09:36:27,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: LOGIN
2025-07-03 09:36:27,822 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 09:36:27,832 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:33830。
2025-07-03 09:36:27,832 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 33829) 登录。
2025-07-03 09:36:27,834 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:36:27,840 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:36:27,841 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:36:27,841 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: GET_ALL_FRIENDS
2025-07-03 09:36:27,844 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:36:27,845 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:36:29,390 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:36:29,401 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:36:29,402 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:36:29,402 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: GET_ALL_FRIENDS
2025-07-03 09:36:29,416 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:36:29,418 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:36:29,853 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:36:29,856 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:36:29,856 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:36:29,857 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: GET_ALL_FRIENDS
2025-07-03 09:36:29,858 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:36:29,859 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:36:31,531 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33856) 的新连接。
2025-07-03 09:36:31,533 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 33856) 启动。
2025-07-03 09:36:31,534 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33856) 的命令: LOGIN
2025-07-03 09:36:31,536 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 09:36:31,544 - db - INFO - DatabaseManager: 用户 4024 在线状态更新成功: 10.21.240.25:33857。
2025-07-03 09:36:31,545 - server - INFO - SecureChatServer: 用户 B (ID: 4024) 从 ('127.0.0.1', 33856) 登录。
2025-07-03 09:36:31,546 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33856) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:36:31,549 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:36:31,551 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:36:31,553 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33856) 的命令: GET_ALL_FRIENDS
2025-07-03 09:36:31,556 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:36:31,558 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:36:33,097 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33856) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:36:33,099 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:36:33,101 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:36:33,103 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33856) 的命令: GET_ALL_FRIENDS
2025-07-03 09:36:33,106 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:36:33,107 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:36:33,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33856) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:36:33,344 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:36:33,345 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:36:33,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33856) 的命令: GET_ALL_FRIENDS
2025-07-03 09:36:33,349 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:36:33,351 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:36:37,431 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:36:37,433 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:36:37,434 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:36:37,435 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: GET_ALL_FRIENDS
2025-07-03 09:36:37,436 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:36:37,437 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:36:59,780 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:36:59,783 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:36:59,783 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:36:59,785 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33829) 的命令: GET_ALL_FRIENDS
2025-07-03 09:36:59,786 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:36:59,788 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:37:03,508 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33856) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:37:03,509 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个在线好友信息。
2025-07-03 09:37:03,510 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:37:03,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 33856) 的命令: GET_ALL_FRIENDS
2025-07-03 09:37:03,518 - db - INFO - DatabaseManager: 已为用户 4024 检索到 1 个所有好友信息。
2025-07-03 09:37:03,521 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:37:25,822 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 33856) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:37:25,828 - db - INFO - DatabaseManager: 用户 4024 在线状态已清除。
2025-07-03 09:37:25,830 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4024) 的会话并更新离线状态。
2025-07-03 09:37:25,830 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 33856) 的连接已关闭。
2025-07-03 09:37:28,997 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 33829) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:37:29,005 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 09:37:29,006 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 09:37:29,006 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 33829) 的连接已关闭。
2025-07-03 09:40:27,747 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的新连接。
2025-07-03 09:40:27,748 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 34532) 启动。
2025-07-03 09:40:27,749 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: LOGIN
2025-07-03 09:40:27,781 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 09:40:27,792 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:34533。
2025-07-03 09:40:27,793 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 34532) 登录。
2025-07-03 09:40:27,794 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:27,801 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:40:27,802 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:40:27,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:27,809 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:40:27,809 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:40:29,331 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:29,333 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:40:29,333 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:40:29,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:29,337 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:40:29,338 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:40:29,454 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:29,456 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:40:29,456 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:40:29,460 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:29,461 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:40:29,461 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:40:31,450 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:31,452 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:40:31,454 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:40:31,455 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:31,457 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:40:31,460 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:40:38,836 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34584) 的新连接。
2025-07-03 09:40:38,837 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 34584) 启动。
2025-07-03 09:40:38,849 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34584) 的命令: REGISTER
2025-07-03 09:40:38,855 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-07-03 09:40:38,857 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-07-03 09:40:38,860 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 34584) 断开连接，用户未登录。
2025-07-03 09:40:38,862 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 34584) 的连接已关闭。
2025-07-03 09:40:42,985 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:42,987 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:40:42,988 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:40:42,989 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:42,990 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 09:40:42,991 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 09:40:48,121 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的新连接。
2025-07-03 09:40:48,122 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 34602) 启动。
2025-07-03 09:40:48,132 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: LOGIN
2025-07-03 09:40:48,137 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 09:40:48,147 - db - INFO - DatabaseManager: 用户 4025 在线状态更新成功: 10.21.240.25:34603。
2025-07-03 09:40:48,148 - server - INFO - SecureChatServer: 用户 B (ID: 4025) 从 ('127.0.0.1', 34602) 登录。
2025-07-03 09:40:48,149 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:48,157 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 09:40:48,158 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 09:40:48,159 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:48,164 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个所有好友信息。
2025-07-03 09:40:48,165 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 09:40:49,693 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:49,704 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 09:40:49,706 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 09:40:49,708 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:49,715 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个所有好友信息。
2025-07-03 09:40:49,716 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 09:40:49,955 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:49,959 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 09:40:49,959 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 09:40:49,960 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:49,961 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个所有好友信息。
2025-07-03 09:40:49,963 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 09:40:51,925 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:51,936 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 09:40:51,938 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 09:40:51,939 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:51,945 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个所有好友信息。
2025-07-03 09:40:51,946 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 09:40:52,118 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_USERS
2025-07-03 09:40:52,121 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-03 09:40:52,123 - server - INFO - SecureChatServer: 向 A 提供了所有注册用户列表。
2025-07-03 09:40:52,962 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: ADD_FRIEND
2025-07-03 09:40:52,972 - db - INFO - DatabaseManager: 用户 4023 添加好友 4025 成功。
2025-07-03 09:40:52,974 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 4025) 为好友成功。
2025-07-03 09:40:52,974 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:52,981 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:40:52,983 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:40:52,984 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:52,989 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:40:52,990 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:40:56,487 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:56,489 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:40:56,490 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:40:56,492 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:56,494 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:40:56,496 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:40:59,459 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:40:59,461 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:40:59,463 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:40:59,480 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:40:59,483 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:40:59,486 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:41:19,936 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:41:19,937 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:41:19,938 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:41:19,939 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ALL_FRIENDS
2025-07-03 09:41:19,940 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:41:19,940 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:41:30,767 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:41:30,768 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:41:30,770 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:41:30,790 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:41:30,791 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:41:30,792 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:41:49,930 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:41:49,966 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:41:49,970 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:41:49,993 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ALL_FRIENDS
2025-07-03 09:41:50,005 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:41:50,006 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:41:59,457 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:41:59,477 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:41:59,480 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:41:59,483 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:41:59,493 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:41:59,496 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:42:14,289 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:42:14,290 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:42:14,292 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:42:14,295 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:42:14,299 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:42:14,301 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:42:14,523 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:42:14,525 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:42:14,526 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:42:14,527 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:42:14,528 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:42:14,529 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:42:19,961 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:42:19,965 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:42:19,966 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:42:19,970 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ALL_FRIENDS
2025-07-03 09:42:19,973 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:42:19,977 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:42:44,455 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:42:44,458 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:42:44,460 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:42:44,463 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34532) 的命令: GET_ALL_FRIENDS
2025-07-03 09:42:44,464 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:42:44,465 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:42:49,925 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:42:49,938 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:42:49,940 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:42:49,943 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 34602) 的命令: GET_ALL_FRIENDS
2025-07-03 09:42:49,961 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:42:49,965 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:44:14,771 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 34602) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:44:14,827 - db - INFO - DatabaseManager: 用户 4025 在线状态已清除。
2025-07-03 09:44:14,828 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4025) 的会话并更新离线状态。
2025-07-03 09:44:14,828 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 34602) 的连接已关闭。
2025-07-03 09:44:16,242 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 34532) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:44:16,252 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 09:44:16,253 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 09:44:16,254 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 34532) 的连接已关闭。
2025-07-03 09:51:04,791 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的新连接。
2025-07-03 09:51:04,792 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 36403) 启动。
2025-07-03 09:51:04,793 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: LOGIN
2025-07-03 09:51:04,820 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 09:51:04,834 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:36404。
2025-07-03 09:51:04,835 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 36403) 登录。
2025-07-03 09:51:04,837 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:51:04,844 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:51:04,846 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:51:04,846 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:51:04,852 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:51:04,853 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:51:06,389 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:51:06,391 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:51:06,394 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:51:06,396 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:51:06,399 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:51:06,406 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:51:06,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:51:06,809 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:51:06,810 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:51:06,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:51:06,818 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:51:06,821 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:51:37,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:51:37,526 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:51:37,531 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:51:37,532 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:51:37,539 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:51:37,541 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:52:07,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:52:07,527 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:52:07,529 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:52:07,530 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:52:07,539 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:52:07,540 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:52:37,502 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:52:37,503 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 09:52:37,504 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 09:52:37,507 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:52:37,507 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:52:37,508 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:52:41,325 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的新连接。
2025-07-03 09:52:41,327 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 36709) 启动。
2025-07-03 09:52:41,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: LOGIN
2025-07-03 09:52:41,350 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 09:52:41,369 - db - INFO - DatabaseManager: 用户 4025 在线状态更新成功: 10.21.240.25:36710。
2025-07-03 09:52:41,372 - server - INFO - SecureChatServer: 用户 B (ID: 4025) 从 ('127.0.0.1', 36709) 登录。
2025-07-03 09:52:41,375 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:52:41,387 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:52:41,388 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:52:41,391 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:52:41,407 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:52:41,411 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:52:42,955 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:52:42,965 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:52:42,966 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:52:42,968 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:52:42,980 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:52:42,981 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:52:43,164 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:52:43,177 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:52:43,178 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:52:43,179 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:52:43,191 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:52:43,195 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:52:49,074 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:52:49,084 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:52:49,085 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:52:49,087 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:52:49,093 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:52:49,095 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:53:06,731 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:53:06,747 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:53:06,749 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:53:06,753 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:53:06,764 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:53:06,768 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:53:13,505 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:53:13,506 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:53:13,507 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:53:13,533 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:53:13,537 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:53:13,539 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:53:36,728 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:53:36,732 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:53:36,734 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:53:36,737 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:53:36,740 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:53:36,741 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:53:43,514 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:53:43,517 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:53:43,518 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:53:43,543 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:53:43,546 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:53:43,548 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:54:07,530 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:54:07,548 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:54:07,551 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:54:07,555 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:54:07,572 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:54:07,575 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:54:13,540 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:54:13,543 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:54:13,544 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:54:13,547 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:54:13,549 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:54:13,551 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:54:37,312 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:54:37,314 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:54:37,315 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:54:37,316 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:54:37,322 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:54:37,323 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:54:43,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:54:43,511 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:54:43,515 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:54:43,537 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:54:43,541 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:54:43,542 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:55:07,505 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:55:07,515 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:55:07,518 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:55:07,524 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:55:07,534 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:55:07,536 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:55:13,510 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:55:13,512 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:55:13,513 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:55:13,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:55:13,520 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:55:13,521 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:55:37,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:55:37,511 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:55:37,513 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:55:37,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:55:37,524 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:55:37,526 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:55:43,506 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:55:43,507 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:55:43,508 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:55:43,510 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:55:43,511 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:55:43,512 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:56:07,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:56:07,539 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 09:56:07,541 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 09:56:07,546 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36403) 的命令: GET_ALL_FRIENDS
2025-07-03 09:56:07,562 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 09:56:07,565 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 09:57:10,508 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:57:10,517 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:57:10,518 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:57:10,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:57:10,527 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:57:10,528 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:58:10,527 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:58:10,547 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 09:58:10,549 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 09:58:10,551 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:58:10,559 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:58:10,560 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 09:59:09,882 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 36403) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 09:59:09,889 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 09:59:09,890 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 09:59:09,891 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 36403) 的连接已关闭。
2025-07-03 09:59:10,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 09:59:10,518 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 09:59:10,518 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 09:59:10,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 09:59:10,524 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 09:59:10,525 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:00:10,528 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:00:10,556 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 10:00:10,559 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:00:10,561 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 10:00:10,570 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:00:10,573 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:01:10,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:01:10,529 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 10:01:10,530 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:01:10,533 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 10:01:10,540 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:01:10,541 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:02:10,524 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:02:10,543 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 10:02:10,545 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:02:10,547 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 10:02:10,556 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:02:10,557 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:03:10,536 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:03:10,566 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 10:03:10,567 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:03:10,569 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 10:03:10,578 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:03:10,579 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:04:10,516 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:04:10,532 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 10:04:10,533 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:04:10,535 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 10:04:10,542 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:04:10,544 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:05:10,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:05:10,560 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 10:05:10,563 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:05:10,564 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 10:05:10,573 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:05:10,573 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:06:10,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:06:10,532 - db - INFO - DatabaseManager: 已为用户 4025 检索到 0 个在线好友信息。
2025-07-03 10:06:10,533 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:06:10,533 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 36709) 的命令: GET_ALL_FRIENDS
2025-07-03 10:06:10,545 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:06:10,546 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:07:10,288 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 36709) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:07:10,295 - db - INFO - DatabaseManager: 用户 4025 在线状态已清除。
2025-07-03 10:07:10,296 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4025) 的会话并更新离线状态。
2025-07-03 10:07:10,297 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 36709) 的连接已关闭。
2025-07-03 10:07:26,642 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 40158) 的新连接。
2025-07-03 10:07:26,643 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 40158) 启动。
2025-07-03 10:07:26,645 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 40158) 的命令: LOGIN
2025-07-03 10:07:26,648 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 10:07:26,655 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:40159。
2025-07-03 10:07:26,655 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 40158) 登录。
2025-07-03 10:07:26,657 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 40158) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:07:26,664 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:07:26,665 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:07:26,666 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 40158) 的命令: GET_ALL_FRIENDS
2025-07-03 10:07:26,673 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:07:26,673 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:07:28,207 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 40158) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:07:28,209 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:07:28,210 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:07:28,211 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 40158) 的命令: GET_ALL_FRIENDS
2025-07-03 10:07:28,211 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:07:28,212 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:07:28,581 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 40158) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:07:28,582 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:07:28,584 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:07:28,586 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 40158) 的命令: GET_ALL_FRIENDS
2025-07-03 10:07:28,589 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:07:28,590 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:07:59,504 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 40158) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:07:59,505 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:07:59,505 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:07:59,508 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 40158) 的命令: GET_ALL_FRIENDS
2025-07-03 10:07:59,509 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:07:59,509 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:08:18,871 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 40158) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:08:18,878 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 10:08:18,881 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 10:08:18,882 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 40158) 的连接已关闭。
2025-07-03 10:12:10,135 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的新连接。
2025-07-03 10:12:10,143 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 41097) 启动。
2025-07-03 10:12:10,146 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: LOGIN
2025-07-03 10:12:10,198 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 10:12:10,206 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:41098。
2025-07-03 10:12:10,208 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 41097) 登录。
2025-07-03 10:12:10,208 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:12:10,215 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:12:10,216 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:12:10,216 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:12:10,224 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:12:10,228 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:12:12,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:12:12,519 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:12:12,521 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:12:12,523 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:12:12,526 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:12:12,527 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:12:12,721 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:12:12,722 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:12:12,723 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:12:12,727 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:12:12,730 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:12:12,730 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:12:16,234 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的新连接。
2025-07-03 10:12:16,235 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 41120) 启动。
2025-07-03 10:12:16,235 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: LOGIN
2025-07-03 10:12:16,237 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 10:12:16,241 - db - INFO - DatabaseManager: 用户 4025 在线状态更新成功: 10.21.240.25:41121。
2025-07-03 10:12:16,242 - server - INFO - SecureChatServer: 用户 B (ID: 4025) 从 ('127.0.0.1', 41120) 登录。
2025-07-03 10:12:16,243 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:12:16,246 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:12:16,249 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:12:16,250 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:12:16,252 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:12:16,254 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:12:17,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:12:17,818 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:12:17,822 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:12:17,825 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:12:17,832 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:12:17,834 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:12:18,211 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:12:18,212 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:12:18,213 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:12:18,216 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:12:18,218 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:12:18,219 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:12:26,179 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:12:26,180 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:12:26,182 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:12:26,184 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:12:26,186 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:12:26,187 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:12:43,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:12:43,535 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:12:43,536 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:12:43,541 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:12:43,565 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:12:43,568 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:12:48,131 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:12:48,134 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:12:48,135 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:12:48,136 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:12:48,139 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:12:48,139 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:13:13,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:13:13,517 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:13:13,518 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:13:13,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:13:13,522 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:13:13,524 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:13:18,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:13:18,514 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:13:18,515 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:13:18,516 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:13:18,518 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:13:18,520 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:13:43,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:13:43,526 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:13:43,526 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:13:43,527 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:13:43,533 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:13:43,534 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:13:48,505 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:13:48,521 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:13:48,523 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:13:48,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:13:48,536 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:13:48,537 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:14:13,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:14:13,532 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:14:13,533 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:14:13,534 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:14:13,540 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:14:13,542 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:14:18,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:14:18,516 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:14:18,517 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:14:18,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:14:18,523 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:14:18,525 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:14:42,658 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:14:42,665 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:14:42,666 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:14:42,667 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:14:42,674 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:14:42,675 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:14:48,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:14:48,532 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:14:48,534 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:14:48,537 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:14:48,547 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:14:48,547 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:15:13,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:15:13,532 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:15:13,534 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:15:13,541 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:15:13,550 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:15:13,552 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:15:18,137 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:15:18,138 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:15:18,140 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:15:18,143 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:15:18,147 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:15:18,149 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:15:43,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:15:43,517 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:15:43,518 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:15:43,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:15:43,522 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:15:43,523 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:15:48,514 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:15:48,526 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:15:48,528 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:15:48,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:15:48,539 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:15:48,541 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:16:13,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:16:13,510 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:16:13,511 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:16:13,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41097) 的命令: GET_ALL_FRIENDS
2025-07-03 10:16:13,518 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:16:13,518 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:16:18,502 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:16:18,503 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:16:18,504 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:16:18,507 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41120) 的命令: GET_ALL_FRIENDS
2025-07-03 10:16:18,507 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:16:18,508 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:16:22,871 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 41097) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:16:22,874 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 10:16:22,874 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 10:16:22,874 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 41097) 的连接已关闭。
2025-07-03 10:16:27,882 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 41120) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:16:27,885 - db - INFO - DatabaseManager: 用户 4025 在线状态已清除。
2025-07-03 10:16:27,886 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4025) 的会话并更新离线状态。
2025-07-03 10:16:27,886 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 41120) 的连接已关闭。
2025-07-03 10:25:20,572 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的新连接。
2025-07-03 10:25:20,573 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 43859) 启动。
2025-07-03 10:25:20,577 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: LOGIN
2025-07-03 10:25:20,632 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 10:25:20,649 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:43860。
2025-07-03 10:25:20,651 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 43859) 登录。
2025-07-03 10:25:20,652 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:25:20,665 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:25:20,668 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:25:20,669 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ALL_FRIENDS
2025-07-03 10:25:20,688 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:25:20,692 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:25:22,253 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:25:22,256 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:25:22,257 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:25:22,258 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ALL_FRIENDS
2025-07-03 10:25:22,260 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:25:22,262 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:25:22,701 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:25:22,702 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:25:22,703 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:25:22,704 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ALL_FRIENDS
2025-07-03 10:25:22,705 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:25:22,706 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:25:30,077 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的新连接。
2025-07-03 10:25:30,079 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 43922) 启动。
2025-07-03 10:25:30,082 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: LOGIN
2025-07-03 10:25:30,085 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 10:25:30,090 - db - INFO - DatabaseManager: 用户 4025 在线状态更新成功: 10.21.240.25:43923。
2025-07-03 10:25:30,091 - server - INFO - SecureChatServer: 用户 B (ID: 4025) 从 ('127.0.0.1', 43922) 登录。
2025-07-03 10:25:30,092 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:25:30,096 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:25:30,098 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:25:30,100 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: GET_ALL_FRIENDS
2025-07-03 10:25:30,101 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:25:30,102 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:25:31,652 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:25:31,658 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:25:31,661 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:25:31,665 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: GET_ALL_FRIENDS
2025-07-03 10:25:31,672 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:25:31,677 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:25:31,948 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:25:31,949 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:25:31,950 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:25:31,951 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: GET_ALL_FRIENDS
2025-07-03 10:25:31,952 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:25:31,953 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:25:42,449 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:25:42,457 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:25:42,458 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:25:42,459 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ALL_FRIENDS
2025-07-03 10:25:42,466 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:25:42,467 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:25:52,597 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:25:52,605 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:25:52,608 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:25:52,610 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ALL_FRIENDS
2025-07-03 10:25:52,621 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:25:52,623 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:26:01,849 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:26:01,858 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:26:01,859 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:26:01,863 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: GET_ALL_FRIENDS
2025-07-03 10:26:01,874 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:26:01,874 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:26:23,514 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:26:23,515 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:26:23,516 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:26:23,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43859) 的命令: GET_ALL_FRIENDS
2025-07-03 10:26:23,522 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:26:23,524 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:26:32,508 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:26:32,510 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:26:32,511 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:26:32,531 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 43922) 的命令: GET_ALL_FRIENDS
2025-07-03 10:26:32,534 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:26:32,534 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:26:34,031 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 43859) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:26:34,033 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 10:26:34,035 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 10:26:34,035 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 43859) 的连接已关闭。
2025-07-03 10:26:34,253 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 43922) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:26:34,256 - db - INFO - DatabaseManager: 用户 4025 在线状态已清除。
2025-07-03 10:26:34,257 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4025) 的会话并更新离线状态。
2025-07-03 10:26:34,257 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 43922) 的连接已关闭。
2025-07-03 10:27:19,714 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的新连接。
2025-07-03 10:27:19,716 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 44275) 启动。
2025-07-03 10:27:19,719 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: LOGIN
2025-07-03 10:27:19,722 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 10:27:19,732 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:44276。
2025-07-03 10:27:19,734 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 44275) 登录。
2025-07-03 10:27:19,736 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:27:19,743 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:27:19,745 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:27:19,746 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: GET_ALL_FRIENDS
2025-07-03 10:27:19,751 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:27:19,752 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:27:21,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:27:21,519 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:27:21,521 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:27:21,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: GET_ALL_FRIENDS
2025-07-03 10:27:21,524 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:27:21,525 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:27:21,676 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:27:21,678 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:27:21,680 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:27:21,682 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: GET_ALL_FRIENDS
2025-07-03 10:27:21,684 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:27:21,687 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:27:24,657 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44298) 的新连接。
2025-07-03 10:27:24,658 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 44298) 启动。
2025-07-03 10:27:24,659 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44298) 的命令: LOGIN
2025-07-03 10:27:24,665 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 10:27:24,667 - db - INFO - DatabaseManager: 用户 4025 在线状态更新成功: 10.21.240.25:44299。
2025-07-03 10:27:24,668 - server - INFO - SecureChatServer: 用户 B (ID: 4025) 从 ('127.0.0.1', 44298) 登录。
2025-07-03 10:27:24,669 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44298) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:27:24,670 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:27:24,670 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:27:24,671 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44298) 的命令: GET_ALL_FRIENDS
2025-07-03 10:27:24,672 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:27:24,673 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:27:26,233 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44298) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:27:26,236 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:27:26,238 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:27:26,241 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44298) 的命令: GET_ALL_FRIENDS
2025-07-03 10:27:26,243 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:27:26,246 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:27:26,442 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44298) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:27:26,443 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:27:26,443 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:27:26,446 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44298) 的命令: GET_ALL_FRIENDS
2025-07-03 10:27:26,447 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:27:26,449 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:27:34,758 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:27:34,760 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:27:34,762 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:27:34,763 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: GET_ALL_FRIENDS
2025-07-03 10:27:34,764 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:27:34,765 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:27:52,506 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:27:52,508 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:27:52,509 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:27:52,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44275) 的命令: GET_ALL_FRIENDS
2025-07-03 10:27:52,519 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:27:52,522 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:27:56,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44298) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:27:56,539 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:27:56,541 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:27:56,543 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 44298) 的命令: GET_ALL_FRIENDS
2025-07-03 10:27:56,551 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:27:56,552 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:28:06,444 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 44275) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:28:06,456 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 10:28:06,456 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 10:28:06,457 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 44275) 的连接已关闭。
2025-07-03 10:28:08,103 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 44298) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:28:08,108 - db - INFO - DatabaseManager: 用户 4025 在线状态已清除。
2025-07-03 10:28:08,109 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4025) 的会话并更新离线状态。
2025-07-03 10:28:08,109 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 44298) 的连接已关闭。
2025-07-03 10:35:58,588 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的新连接。
2025-07-03 10:35:58,590 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 45788) 启动。
2025-07-03 10:35:58,590 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: LOGIN
2025-07-03 10:35:58,609 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 10:35:58,622 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:45789。
2025-07-03 10:35:58,624 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 45788) 登录。
2025-07-03 10:35:58,625 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:35:58,635 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:35:58,636 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:35:58,637 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ALL_FRIENDS
2025-07-03 10:35:58,647 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:35:58,650 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:36:00,550 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:36:00,553 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:36:00,558 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:36:00,561 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ALL_FRIENDS
2025-07-03 10:36:00,563 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:36:00,567 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:36:00,964 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:36:00,966 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:36:00,968 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:36:00,969 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ALL_FRIENDS
2025-07-03 10:36:00,971 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:36:00,972 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:36:07,100 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的新连接。
2025-07-03 10:36:07,101 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 45828) 启动。
2025-07-03 10:36:07,105 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: LOGIN
2025-07-03 10:36:07,109 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 10:36:07,122 - db - INFO - DatabaseManager: 用户 4025 在线状态更新成功: 10.21.240.25:45829。
2025-07-03 10:36:07,124 - server - INFO - SecureChatServer: 用户 B (ID: 4025) 从 ('127.0.0.1', 45828) 登录。
2025-07-03 10:36:07,126 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:36:07,129 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:36:07,131 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:36:07,133 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:36:07,135 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:36:07,136 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:36:09,548 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:36:09,552 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:36:09,556 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:36:09,560 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:36:09,568 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:36:09,571 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:36:09,736 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:36:09,738 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:36:09,740 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:36:09,743 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:36:09,744 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:36:09,745 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:36:11,553 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:36:11,555 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:36:11,556 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:36:11,558 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ALL_FRIENDS
2025-07-03 10:36:11,560 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:36:11,562 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:36:31,507 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:36:31,510 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:36:31,512 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:36:31,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ALL_FRIENDS
2025-07-03 10:36:31,524 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:36:31,527 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:36:40,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:36:40,542 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:36:40,545 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:36:40,548 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:36:40,562 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:36:40,565 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:37:01,508 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:37:01,522 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:37:01,525 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:37:01,528 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ALL_FRIENDS
2025-07-03 10:37:01,539 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:37:01,541 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:37:10,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:37:10,523 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:37:10,525 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:37:10,546 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:37:10,548 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:37:10,550 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:37:31,510 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:37:31,512 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:37:31,516 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:37:31,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ALL_FRIENDS
2025-07-03 10:37:31,521 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:37:31,525 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:37:40,504 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:37:40,506 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:37:40,507 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:37:40,510 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:37:40,511 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:37:40,512 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:38:01,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:38:01,520 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:38:01,522 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:38:01,523 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45788) 的命令: GET_ALL_FRIENDS
2025-07-03 10:38:01,529 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:38:01,530 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:38:10,501 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:38:10,504 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:38:10,504 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:38:10,508 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:38:10,509 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:38:10,510 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:38:22,369 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 45788) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:38:22,380 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 10:38:22,380 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 10:38:22,380 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 45788) 的连接已关闭。
2025-07-03 10:38:38,581 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的新连接。
2025-07-03 10:38:38,581 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 46305) 启动。
2025-07-03 10:38:38,582 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: LOGIN
2025-07-03 10:38:38,585 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 10:38:38,592 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:46306。
2025-07-03 10:38:38,593 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 46305) 登录。
2025-07-03 10:38:38,593 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:38:38,598 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:38:38,599 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:38:38,600 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ALL_FRIENDS
2025-07-03 10:38:38,606 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:38:38,607 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:38:39,674 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:38:39,676 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:38:39,677 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:38:39,679 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:38:39,681 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:38:39,683 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:38:40,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:38:40,528 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:38:40,531 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:38:40,534 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ALL_FRIENDS
2025-07-03 10:38:40,539 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:38:40,547 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:38:40,623 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:38:40,627 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:38:40,629 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:38:40,631 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:38:40,635 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:38:40,638 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:38:40,759 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:38:40,762 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:38:40,763 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:38:40,763 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ALL_FRIENDS
2025-07-03 10:38:40,765 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:38:40,765 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:38:40,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:38:40,825 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:38:40,827 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:38:40,829 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:38:40,831 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:38:40,833 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:38:58,690 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:38:58,702 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:38:58,706 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:38:58,709 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:38:58,726 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:38:58,730 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:38:58,902 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:38:58,905 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个在线好友信息。
2025-07-03 10:38:58,906 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:38:58,907 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 45828) 的命令: GET_ALL_FRIENDS
2025-07-03 10:38:58,909 - db - INFO - DatabaseManager: 已为用户 4025 检索到 1 个所有好友信息。
2025-07-03 10:38:58,910 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:39:08,390 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 45828) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:39:08,395 - db - INFO - DatabaseManager: 用户 4025 在线状态已清除。
2025-07-03 10:39:08,396 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4025) 的会话并更新离线状态。
2025-07-03 10:39:08,397 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 45828) 的连接已关闭。
2025-07-03 10:39:11,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:39:11,527 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:39:11,528 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:39:11,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ALL_FRIENDS
2025-07-03 10:39:11,536 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:39:11,537 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:39:41,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:39:41,523 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:39:41,526 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:39:41,530 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ALL_FRIENDS
2025-07-03 10:39:41,533 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:39:41,536 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:40:11,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:40:11,532 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:40:11,534 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:40:11,535 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ALL_FRIENDS
2025-07-03 10:40:11,549 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:40:11,551 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:40:41,510 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:40:41,532 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:40:41,535 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:40:41,537 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ALL_FRIENDS
2025-07-03 10:40:41,549 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:40:41,550 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:40:48,899 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46849) 的新连接。
2025-07-03 10:40:48,900 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 46849) 启动。
2025-07-03 10:40:48,901 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46849) 的命令: REGISTER
2025-07-03 10:40:48,930 - db - WARNING - DatabaseManager: 注册失败: 用户名 'B' 已存在。
2025-07-03 10:40:48,931 - server - WARNING - SecureChatServer: 用户 B 注册失败，可能已存在。
2025-07-03 10:40:48,932 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 46849) 断开连接，用户未登录。
2025-07-03 10:40:48,935 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 46849) 的连接已关闭。
2025-07-03 10:41:11,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:41:11,546 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:41:11,549 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:41:11,550 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46305) 的命令: GET_ALL_FRIENDS
2025-07-03 10:41:11,561 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 10:41:11,564 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 10:41:15,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46888) 的新连接。
2025-07-03 10:41:15,799 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 46888) 启动。
2025-07-03 10:41:15,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 46888) 的命令: REGISTER
2025-07-03 10:41:15,813 - db - WARNING - DatabaseManager: 注册失败: 用户名 'B' 已存在。
2025-07-03 10:41:15,815 - server - WARNING - SecureChatServer: 用户 B 注册失败，可能已存在。
2025-07-03 10:41:15,816 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 46888) 断开连接，用户未登录。
2025-07-03 10:41:15,818 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 46888) 的连接已关闭。
2025-07-03 10:41:24,765 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 46305) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:41:24,779 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 10:41:24,782 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 10:41:24,783 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 46305) 的连接已关闭。
2025-07-03 10:41:33,589 - __main__ - INFO - 服务器程序启动。
2025-07-03 10:41:33,589 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-03 10:41:33,726 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-03 10:41:33,754 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-03 10:41:33,763 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-03 10:41:33,773 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-03 10:41:33,774 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-03 10:41:33,776 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-03 10:41:33,777 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-03 10:41:58,236 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47005) 的新连接。
2025-07-03 10:41:58,237 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 47005) 启动。
2025-07-03 10:41:58,252 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47005) 的命令: REGISTER
2025-07-03 10:41:58,267 - db - WARNING - DatabaseManager: 注册失败: 用户名 'B' 已存在。
2025-07-03 10:41:58,268 - server - WARNING - SecureChatServer: 用户 B 注册失败，可能已存在。
2025-07-03 10:41:58,268 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 47005) 断开连接，用户未登录。
2025-07-03 10:41:58,269 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 47005) 的连接已关闭。
2025-07-03 10:42:36,200 - __main__ - INFO - 服务器程序启动。
2025-07-03 10:42:36,200 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-03 10:42:36,286 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-03 10:42:36,301 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-03 10:42:36,312 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-03 10:42:36,323 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-03 10:42:36,324 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-03 10:42:36,325 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-03 10:42:36,325 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-03 10:42:48,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的新连接。
2025-07-03 10:42:48,340 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 47111) 启动。
2025-07-03 10:42:48,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: LOGIN
2025-07-03 10:42:48,347 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 10:42:48,357 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:47112。
2025-07-03 10:42:48,358 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 47111) 登录。
2025-07-03 10:42:48,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:42:48,367 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:42:48,368 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:42:48,369 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:42:48,378 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 10:42:48,379 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 10:42:50,535 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:42:50,537 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:42:50,542 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:42:50,544 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:42:50,550 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 10:42:50,561 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 10:42:50,777 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:42:50,778 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:42:50,779 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:42:50,782 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:42:50,782 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 10:42:50,784 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 10:42:50,879 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47129) 的新连接。
2025-07-03 10:42:50,880 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 47129) 启动。
2025-07-03 10:42:50,880 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47129) 的命令: REGISTER
2025-07-03 10:42:50,884 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-07-03 10:42:50,885 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-07-03 10:42:50,886 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 47129) 断开连接，用户未登录。
2025-07-03 10:42:50,887 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 47129) 的连接已关闭。
2025-07-03 10:42:53,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:42:53,518 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 10:42:53,519 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 10:42:53,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:42:53,521 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 10:42:53,522 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 10:42:57,260 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的新连接。
2025-07-03 10:42:57,263 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 47148) 启动。
2025-07-03 10:42:57,268 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: LOGIN
2025-07-03 10:42:57,271 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 10:42:57,281 - db - INFO - DatabaseManager: 用户 4029 在线状态更新成功: 10.21.240.25:47149。
2025-07-03 10:42:57,283 - server - INFO - SecureChatServer: 用户 B (ID: 4029) 从 ('127.0.0.1', 47148) 登录。
2025-07-03 10:42:57,285 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:42:57,288 - db - INFO - DatabaseManager: 已为用户 4029 检索到 0 个在线好友信息。
2025-07-03 10:42:57,290 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:42:57,292 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:42:57,295 - db - INFO - DatabaseManager: 已为用户 4029 检索到 0 个所有好友信息。
2025-07-03 10:42:57,298 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 10:42:59,539 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:42:59,541 - db - INFO - DatabaseManager: 已为用户 4029 检索到 0 个在线好友信息。
2025-07-03 10:42:59,543 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:42:59,545 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:42:59,548 - db - INFO - DatabaseManager: 已为用户 4029 检索到 0 个所有好友信息。
2025-07-03 10:42:59,550 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 10:42:59,896 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:42:59,898 - db - INFO - DatabaseManager: 已为用户 4029 检索到 0 个在线好友信息。
2025-07-03 10:42:59,901 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:42:59,904 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:42:59,905 - db - INFO - DatabaseManager: 已为用户 4029 检索到 0 个所有好友信息。
2025-07-03 10:42:59,908 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 10:43:02,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:43:02,517 - db - INFO - DatabaseManager: 已为用户 4029 检索到 0 个在线好友信息。
2025-07-03 10:43:02,518 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:43:02,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:43:02,521 - db - INFO - DatabaseManager: 已为用户 4029 检索到 0 个所有好友信息。
2025-07-03 10:43:02,523 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 10:43:03,189 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_USERS
2025-07-03 10:43:03,191 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-03 10:43:03,192 - server - INFO - SecureChatServer: 向 A 提供了所有注册用户列表。
2025-07-03 10:43:03,934 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: ADD_FRIEND
2025-07-03 10:43:03,946 - db - INFO - DatabaseManager: 用户 4023 添加好友 4029 成功。
2025-07-03 10:43:03,948 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 4029) 为好友成功。
2025-07-03 10:43:03,949 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:43:03,961 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:43:03,962 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:43:03,965 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:43:03,976 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:43:03,979 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:43:06,032 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:43:06,034 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:43:06,035 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:43:06,048 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:43:06,054 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:43:06,069 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:43:06,219 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:43:06,220 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:43:06,222 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:43:06,227 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:43:06,229 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:43:06,230 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:43:12,205 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:43:12,207 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:43:12,209 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:43:12,210 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:43:12,212 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:43:12,214 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:43:30,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:43:30,520 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:43:30,521 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:43:30,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:43:30,528 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:43:30,529 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:43:36,508 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:43:36,510 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:43:36,513 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:43:36,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:43:36,523 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:43:36,526 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:44:00,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:44:00,510 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:44:00,513 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:44:00,523 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:44:00,525 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:44:00,528 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:44:06,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:44:06,520 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:44:06,522 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:44:06,534 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:44:06,538 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:44:06,541 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:44:30,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:44:30,523 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:44:30,524 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:44:30,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:44:30,532 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:44:30,532 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:44:36,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:44:36,542 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:44:36,545 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:44:36,548 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:44:36,565 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:44:36,569 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:45:00,506 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:45:00,517 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:45:00,519 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:45:00,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:45:00,523 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:45:00,524 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:45:06,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:45:06,517 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:45:06,519 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:45:06,532 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:45:06,537 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:45:06,540 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:45:30,510 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:45:30,525 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:45:30,528 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:45:30,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:45:30,537 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:45:30,539 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:45:36,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:45:36,539 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:45:36,542 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:45:36,545 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:45:36,556 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:45:36,559 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:46:00,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:46:00,534 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:46:00,535 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:46:00,536 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:46:00,544 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:46:00,546 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:46:06,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:46:06,505 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:46:06,506 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:46:06,510 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:46:06,513 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:46:06,516 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:47:10,538 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:47:10,542 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:47:10,570 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:47:10,572 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:47:10,573 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:47:10,574 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:47:10,575 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:47:10,576 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:47:10,579 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:47:10,579 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:47:10,582 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:47:10,583 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:48:10,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:48:10,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:48:10,545 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:48:10,546 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:48:10,548 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:48:10,552 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:48:10,553 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:48:10,555 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:48:10,555 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:48:10,556 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:48:10,557 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:48:10,558 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:49:05,535 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:49:05,614 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:49:05,616 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:49:05,618 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:49:05,635 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:49:05,638 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:49:10,545 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:49:10,550 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:49:10,558 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:49:10,563 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:49:10,568 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:49:10,571 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:49:30,502 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:49:30,505 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 10:49:30,506 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 10:49:30,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:49:30,516 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:49:30,518 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:49:36,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:49:36,519 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 10:49:36,522 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 10:49:36,553 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47111) 的命令: GET_ALL_FRIENDS
2025-07-03 10:49:36,556 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 10:49:36,561 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 10:49:50,372 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 47111) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:49:50,384 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 10:49:50,385 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 10:49:50,386 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 47111) 的连接已关闭。
2025-07-03 10:50:00,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ONLINE_FRIENDS
2025-07-03 10:50:00,533 - db - INFO - DatabaseManager: 已为用户 4029 检索到 0 个在线好友信息。
2025-07-03 10:50:00,533 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 10:50:00,546 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 47148) 的命令: GET_ALL_FRIENDS
2025-07-03 10:50:00,553 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 10:50:00,558 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 10:54:08,380 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 47148) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 10:54:08,430 - db - INFO - DatabaseManager: 用户 4029 在线状态已清除。
2025-07-03 10:54:08,431 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4029) 的会话并更新离线状态。
2025-07-03 10:54:08,432 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 47148) 的连接已关闭。
2025-07-03 11:40:48,147 - __main__ - INFO - 服务器程序启动。
2025-07-03 11:40:48,148 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-03 11:40:48,293 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-03 11:40:48,336 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-03 11:40:48,352 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-03 11:40:48,364 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-03 11:40:48,364 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-03 11:40:48,366 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-03 11:40:48,366 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-03 11:41:06,496 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的新连接。
2025-07-03 11:41:06,497 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 25785) 启动。
2025-07-03 11:41:06,498 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: LOGIN
2025-07-03 11:41:06,524 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 11:41:06,560 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:25786。
2025-07-03 11:41:06,561 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 25785) 登录。
2025-07-03 11:41:06,562 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:41:06,569 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:41:06,570 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:41:06,571 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:41:06,581 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:41:06,582 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:41:08,510 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:41:08,521 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:41:08,523 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:41:08,523 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:41:08,532 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:41:08,534 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:41:08,723 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:41:08,731 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:41:08,733 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:41:08,734 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:41:08,741 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:41:08,743 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:41:12,163 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的新连接。
2025-07-03 11:41:12,165 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 25822) 启动。
2025-07-03 11:41:12,168 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: LOGIN
2025-07-03 11:41:12,177 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 11:41:12,192 - db - INFO - DatabaseManager: 用户 4029 在线状态更新成功: 10.21.240.25:25823。
2025-07-03 11:41:12,194 - server - INFO - SecureChatServer: 用户 B (ID: 4029) 从 ('127.0.0.1', 25822) 登录。
2025-07-03 11:41:12,195 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:41:12,203 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 11:41:12,204 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 11:41:12,207 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ALL_FRIENDS
2025-07-03 11:41:12,214 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 11:41:12,216 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 11:41:14,545 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:41:14,553 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 11:41:14,554 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 11:41:14,557 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ALL_FRIENDS
2025-07-03 11:41:14,563 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 11:41:14,564 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 11:41:14,775 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:41:14,777 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 11:41:14,779 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 11:41:14,780 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ALL_FRIENDS
2025-07-03 11:41:14,783 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 11:41:14,785 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 11:41:17,872 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:41:17,881 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:41:17,882 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:41:17,883 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:41:17,889 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:41:17,890 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:41:38,640 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:41:38,682 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:41:38,683 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:41:38,684 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:41:38,694 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:41:38,696 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:41:45,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:41:45,532 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 11:41:45,533 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 11:41:45,534 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ALL_FRIENDS
2025-07-03 11:41:45,540 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 11:41:45,541 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 11:42:09,507 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:42:09,522 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:42:09,523 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:42:09,524 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:42:09,531 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:42:09,532 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:42:15,514 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:42:15,516 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 11:42:15,516 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 11:42:15,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ALL_FRIENDS
2025-07-03 11:42:15,520 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 11:42:15,522 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 11:42:39,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:42:39,526 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:42:39,527 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:42:39,528 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:42:39,535 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:42:39,538 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:42:45,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:42:45,523 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 11:42:45,524 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 11:42:45,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ALL_FRIENDS
2025-07-03 11:42:45,529 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 11:42:45,530 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 11:43:09,504 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:43:09,520 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:43:09,521 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:43:09,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:43:09,529 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:43:09,530 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:43:15,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:43:15,521 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个在线好友信息。
2025-07-03 11:43:15,522 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 11:43:15,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25822) 的命令: GET_ALL_FRIENDS
2025-07-03 11:43:15,531 - db - INFO - DatabaseManager: 已为用户 4029 检索到 1 个所有好友信息。
2025-07-03 11:43:15,533 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 11:43:39,527 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:43:39,532 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:43:39,534 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:43:39,559 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:43:39,562 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:43:39,564 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:44:09,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:44:09,524 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:44:09,526 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:44:09,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:44:09,536 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:44:09,537 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:45:10,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:45:10,550 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:45:10,554 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:45:10,565 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:45:10,585 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:45:10,589 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:46:10,577 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:46:10,611 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:46:10,612 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:46:10,614 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:46:10,624 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:46:10,625 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:47:10,529 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:47:10,572 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:47:10,573 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:47:10,574 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:47:10,582 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:47:10,583 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:47:39,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:47:39,542 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 11:47:39,543 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 11:47:39,546 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 25785) 的命令: GET_ALL_FRIENDS
2025-07-03 11:47:39,555 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:47:39,557 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:47:44,173 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 25822) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 11:47:44,180 - db - INFO - DatabaseManager: 用户 4029 在线状态已清除。
2025-07-03 11:47:44,180 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4029) 的会话并更新离线状态。
2025-07-03 11:47:44,180 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 25822) 的连接已关闭。
2025-07-03 11:47:46,364 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 25785) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 11:47:46,367 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 11:47:46,368 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 11:47:46,368 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 25785) 的连接已关闭。
2025-07-03 11:54:45,524 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的新连接。
2025-07-03 11:54:45,525 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 28297) 启动。
2025-07-03 11:54:45,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: LOGIN
2025-07-03 11:54:45,561 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 11:54:45,573 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:28298。
2025-07-03 11:54:45,575 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 28297) 登录。
2025-07-03 11:54:45,576 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:54:45,588 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:54:45,589 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:54:45,590 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:54:45,600 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:54:45,601 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:54:47,125 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:54:47,134 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:54:47,136 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:54:47,137 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:54:47,147 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:54:47,148 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:54:47,281 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:54:47,291 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:54:47,292 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:54:47,293 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:54:47,303 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:54:47,305 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:55:17,253 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:55:17,263 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:55:17,264 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:55:17,265 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:55:17,271 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:55:17,272 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:55:47,248 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:55:47,250 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:55:47,251 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:55:47,260 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:55:47,264 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:55:47,266 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:56:17,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:56:17,535 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:56:17,538 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:56:17,541 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:56:17,550 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:56:17,553 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:56:47,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:56:47,503 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:56:47,508 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:56:47,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:56:47,523 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:56:47,526 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:57:17,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:57:17,526 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:57:17,526 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:57:17,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:57:17,530 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:57:17,530 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:57:47,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:57:47,526 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:57:47,530 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:57:47,547 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:57:47,550 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:57:47,551 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:58:28,983 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:58:28,994 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:58:28,995 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:58:28,996 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:58:29,003 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:58:29,005 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:58:47,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:58:47,511 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:58:47,511 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:58:47,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:58:47,519 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:58:47,519 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 11:59:17,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 11:59:17,537 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 11:59:17,540 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 11:59:17,540 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 11:59:17,549 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 11:59:17,555 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:00:10,505 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:00:10,524 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:00:10,524 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:00:10,524 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 12:00:10,531 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:00:10,531 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:01:10,508 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:01:10,515 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:01:10,515 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:01:10,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 12:01:10,521 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:01:10,524 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:01:17,257 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:01:17,258 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:01:17,259 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:01:17,261 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 12:01:17,262 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:01:17,263 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:01:27,580 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:01:27,591 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:01:27,592 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:01:27,593 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 12:01:27,601 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:01:27,603 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:01:27,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:01:27,817 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:01:27,818 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:01:27,829 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 12:01:27,830 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:01:27,831 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:01:29,046 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:01:29,047 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:01:29,049 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:01:29,051 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 12:01:29,052 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:01:29,053 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:01:29,300 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:01:29,301 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:01:29,302 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:01:29,304 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 12:01:29,305 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:01:29,306 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:01:39,451 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:01:39,463 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:01:39,465 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:01:39,467 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 12:01:39,479 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:01:39,483 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:01:39,733 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:01:39,735 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:01:39,737 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:01:39,739 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 28297) 的命令: GET_ALL_FRIENDS
2025-07-03 12:01:39,740 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:01:39,741 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:01:44,801 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 28297) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 12:01:44,808 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 12:01:44,810 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 12:01:44,810 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 28297) 的连接已关闭。
2025-07-03 12:02:22,437 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29766) 的新连接。
2025-07-03 12:02:22,442 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 29766) 启动。
2025-07-03 12:02:22,444 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29766) 的命令: LOGIN
2025-07-03 12:02:22,454 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 12:02:22,472 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:29767。
2025-07-03 12:02:22,472 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 29766) 登录。
2025-07-03 12:02:22,473 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29766) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:02:22,475 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:02:22,475 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:02:22,475 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29766) 的命令: GET_ALL_FRIENDS
2025-07-03 12:02:22,481 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:02:22,486 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:02:24,028 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29766) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:02:24,029 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:02:24,030 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:02:24,031 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29766) 的命令: GET_ALL_FRIENDS
2025-07-03 12:02:24,032 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:02:24,033 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:02:24,263 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29766) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:02:24,266 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:02:24,267 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:02:24,270 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29766) 的命令: GET_ALL_FRIENDS
2025-07-03 12:02:24,271 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:02:24,272 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:02:54,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29766) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:02:54,521 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:02:54,521 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:02:54,523 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 29766) 的命令: GET_ALL_FRIENDS
2025-07-03 12:02:54,538 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:02:54,539 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:03:22,408 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 29766) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 12:03:22,420 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 12:03:22,420 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 12:03:22,421 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 29766) 的连接已关闭。
2025-07-03 12:06:10,471 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的新连接。
2025-07-03 12:06:10,471 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 30609) 启动。
2025-07-03 12:06:10,471 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: LOGIN
2025-07-03 12:06:10,535 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 12:06:10,541 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:30610。
2025-07-03 12:06:10,541 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 30609) 登录。
2025-07-03 12:06:10,541 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:06:10,550 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:06:10,552 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:06:10,552 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ALL_FRIENDS
2025-07-03 12:06:10,552 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:06:10,552 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:06:12,122 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:06:12,124 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:06:12,124 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:06:12,124 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ALL_FRIENDS
2025-07-03 12:06:12,130 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:06:12,131 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:06:12,482 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:06:12,483 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:06:12,484 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:06:12,485 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ALL_FRIENDS
2025-07-03 12:06:12,486 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:06:12,488 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:06:38,119 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:06:38,121 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:06:38,122 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:06:42,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:06:42,338 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:06:42,338 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:06:42,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ALL_FRIENDS
2025-07-03 12:06:42,338 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:06:42,338 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:07:01,822 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:07:01,832 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:07:01,833 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:07:12,330 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:07:12,347 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:07:12,349 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:07:12,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ALL_FRIENDS
2025-07-03 12:07:12,359 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:07:12,362 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:07:42,514 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:07:42,518 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:07:42,518 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:07:42,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 30609) 的命令: GET_ALL_FRIENDS
2025-07-03 12:07:42,518 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:07:42,518 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:09:24,698 - __main__ - INFO - 服务器程序启动。
2025-07-03 12:09:24,699 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-03 12:09:24,768 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-03 12:09:24,786 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-03 12:09:24,796 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-03 12:09:24,811 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-03 12:09:24,811 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-03 12:09:24,813 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-03 12:09:24,813 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-03 12:09:58,790 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的新连接。
2025-07-03 12:09:58,790 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 31338) 启动。
2025-07-03 12:09:58,790 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: LOGIN
2025-07-03 12:09:58,810 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 12:09:58,831 - db - INFO - DatabaseManager: 用户 4023 在线状态更新成功: 10.21.240.25:31339。
2025-07-03 12:09:58,833 - server - INFO - SecureChatServer: 用户 A (ID: 4023) 从 ('127.0.0.1', 31338) 登录。
2025-07-03 12:09:58,833 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:09:58,839 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:09:58,839 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:09:58,844 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:09:58,846 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 12:09:58,846 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:10:00,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:00,523 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:10:00,524 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:10:00,524 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:00,525 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 12:10:00,526 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:10:00,818 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:00,821 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:10:00,825 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:10:00,827 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:00,830 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 12:10:00,832 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:10:03,505 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:03,507 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:10:03,510 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:10:03,510 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:03,512 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 12:10:03,513 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:10:09,777 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31368) 的新连接。
2025-07-03 12:10:09,779 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 31368) 启动。
2025-07-03 12:10:09,819 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31368) 的命令: REGISTER
2025-07-03 12:10:09,830 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-07-03 12:10:09,834 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-07-03 12:10:09,837 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 31368) 断开连接，用户未登录。
2025-07-03 12:10:09,837 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 31368) 的连接已关闭。
2025-07-03 12:10:15,839 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的新连接。
2025-07-03 12:10:15,840 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 31388) 启动。
2025-07-03 12:10:15,841 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: LOGIN
2025-07-03 12:10:15,847 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 12:10:15,864 - db - INFO - DatabaseManager: 用户 4030 在线状态更新成功: 10.21.240.25:31389。
2025-07-03 12:10:15,864 - server - INFO - SecureChatServer: 用户 B (ID: 4030) 从 ('127.0.0.1', 31388) 登录。
2025-07-03 12:10:15,866 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:15,872 - db - INFO - DatabaseManager: 已为用户 4030 检索到 0 个在线好友信息。
2025-07-03 12:10:15,873 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 12:10:15,874 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:15,882 - db - INFO - DatabaseManager: 已为用户 4030 检索到 0 个所有好友信息。
2025-07-03 12:10:15,882 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 12:10:17,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:17,525 - db - INFO - DatabaseManager: 已为用户 4030 检索到 0 个在线好友信息。
2025-07-03 12:10:17,527 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 12:10:17,527 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:17,532 - db - INFO - DatabaseManager: 已为用户 4030 检索到 0 个所有好友信息。
2025-07-03 12:10:17,535 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 12:10:17,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:17,810 - db - INFO - DatabaseManager: 已为用户 4030 检索到 0 个在线好友信息。
2025-07-03 12:10:17,812 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 12:10:17,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:17,821 - db - INFO - DatabaseManager: 已为用户 4030 检索到 0 个所有好友信息。
2025-07-03 12:10:17,823 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 12:10:19,492 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:19,500 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个在线好友信息。
2025-07-03 12:10:19,501 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:10:19,502 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:19,510 - db - INFO - DatabaseManager: 已为用户 4023 检索到 0 个所有好友信息。
2025-07-03 12:10:19,512 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:10:20,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:20,522 - db - INFO - DatabaseManager: 已为用户 4030 检索到 0 个在线好友信息。
2025-07-03 12:10:20,524 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 12:10:20,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:20,536 - db - INFO - DatabaseManager: 已为用户 4030 检索到 0 个所有好友信息。
2025-07-03 12:10:20,538 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 12:10:23,033 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_USERS
2025-07-03 12:10:23,035 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-03 12:10:23,036 - server - INFO - SecureChatServer: 向 A 提供了所有注册用户列表。
2025-07-03 12:10:23,806 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: ADD_FRIEND
2025-07-03 12:10:23,817 - db - INFO - DatabaseManager: 用户 4023 添加好友 4030 成功。
2025-07-03 12:10:23,819 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 4030) 为好友成功。
2025-07-03 12:10:23,819 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:23,825 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 12:10:23,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 12:10:23,828 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:23,837 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:10:23,839 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:10:29,235 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:29,237 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个在线好友信息。
2025-07-03 12:10:29,238 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 12:10:29,240 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:29,243 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个所有好友信息。
2025-07-03 12:10:29,245 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 12:10:31,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:31,513 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 12:10:31,514 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 12:10:31,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:31,521 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:10:31,521 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:10:47,609 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:10:47,609 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个在线好友信息。
2025-07-03 12:10:47,609 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 12:10:47,609 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ALL_FRIENDS
2025-07-03 12:10:47,615 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个所有好友信息。
2025-07-03 12:10:47,615 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 12:11:00,603 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:11:00,605 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 12:11:00,607 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 12:11:00,609 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:11:00,612 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:11:00,615 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:11:17,609 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:11:17,617 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个在线好友信息。
2025-07-03 12:11:17,619 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 12:11:17,619 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ALL_FRIENDS
2025-07-03 12:11:17,627 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个所有好友信息。
2025-07-03 12:11:17,627 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 12:11:30,609 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:11:30,618 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 12:11:30,618 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 12:11:30,620 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:11:30,623 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:11:30,623 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:11:48,515 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:11:48,519 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个在线好友信息。
2025-07-03 12:11:48,519 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 12:11:48,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ALL_FRIENDS
2025-07-03 12:11:48,521 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个所有好友信息。
2025-07-03 12:11:48,522 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 12:12:01,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:12:01,514 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 12:12:01,516 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 12:12:01,521 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:12:01,525 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:12:01,527 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:12:17,617 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:12:17,626 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个在线好友信息。
2025-07-03 12:12:17,627 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 12:12:17,628 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ALL_FRIENDS
2025-07-03 12:12:17,640 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个所有好友信息。
2025-07-03 12:12:17,644 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 12:12:30,593 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:12:30,603 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 12:12:30,603 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 12:12:30,605 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:12:30,609 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:12:30,613 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:12:47,620 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:12:47,635 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个在线好友信息。
2025-07-03 12:12:47,637 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 12:12:47,641 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31388) 的命令: GET_ALL_FRIENDS
2025-07-03 12:12:47,652 - db - INFO - DatabaseManager: 已为用户 4030 检索到 1 个所有好友信息。
2025-07-03 12:12:47,654 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 12:13:00,593 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:13:00,599 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个在线好友信息。
2025-07-03 12:13:00,602 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 12:13:00,602 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 31338) 的命令: GET_ALL_FRIENDS
2025-07-03 12:13:00,605 - db - INFO - DatabaseManager: 已为用户 4023 检索到 1 个所有好友信息。
2025-07-03 12:13:00,605 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:13:09,871 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 31338) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 12:13:09,876 - db - INFO - DatabaseManager: 用户 4023 在线状态已清除。
2025-07-03 12:13:09,877 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4023) 的会话并更新离线状态。
2025-07-03 12:13:09,878 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 31338) 的连接已关闭。
2025-07-03 12:15:12,782 - __main__ - INFO - 服务器程序启动。
2025-07-03 12:15:12,782 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-03 12:15:12,846 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-03 12:15:12,857 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-03 12:15:12,866 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-03 12:15:12,874 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-03 12:15:12,875 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-03 12:15:12,876 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-03 12:15:12,876 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-03 12:16:02,101 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32290) 的新连接。
2025-07-03 12:16:02,101 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 32290) 启动。
2025-07-03 12:16:02,101 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32290) 的命令: REGISTER
2025-07-03 12:16:02,111 - db - INFO - DatabaseManager: 用户 'A' 注册成功。
2025-07-03 12:16:02,111 - server - INFO - SecureChatServer: 用户 A 已注册。
2025-07-03 12:16:02,111 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 32290) 断开连接，用户未登录。
2025-07-03 12:16:02,111 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 32290) 的连接已关闭。
2025-07-03 12:16:09,589 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的新连接。
2025-07-03 12:16:09,589 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 32310) 启动。
2025-07-03 12:16:09,593 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的命令: LOGIN
2025-07-03 12:16:09,593 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 12:16:09,605 - db - INFO - DatabaseManager: 用户 4031 在线状态更新成功: 10.21.240.25:32311。
2025-07-03 12:16:09,605 - server - INFO - SecureChatServer: 用户 A (ID: 4031) 从 ('127.0.0.1', 32310) 登录。
2025-07-03 12:16:09,605 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:09,613 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个在线好友信息。
2025-07-03 12:16:09,613 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:16:09,613 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:09,620 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个所有好友信息。
2025-07-03 12:16:09,620 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:16:11,140 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:11,141 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个在线好友信息。
2025-07-03 12:16:11,142 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:16:11,143 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:11,147 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个所有好友信息。
2025-07-03 12:16:11,150 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:16:11,258 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:11,259 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个在线好友信息。
2025-07-03 12:16:11,259 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:16:11,264 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:11,265 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个所有好友信息。
2025-07-03 12:16:11,265 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:16:13,237 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:13,239 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个在线好友信息。
2025-07-03 12:16:13,241 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:16:13,242 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:13,245 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个所有好友信息。
2025-07-03 12:16:13,247 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:16:19,753 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32310) 的命令: LOGOUT
2025-07-03 12:16:19,758 - db - INFO - DatabaseManager: 用户 4031 在线状态已清除。
2025-07-03 12:16:19,759 - server - INFO - SecureChatServer: 用户 A (ID: 4031) 已登出。
2025-07-03 12:16:19,760 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 32310) 断开连接，用户未登录。
2025-07-03 12:16:19,761 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 32310) 的连接已关闭。
2025-07-03 12:16:24,856 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的新连接。
2025-07-03 12:16:24,856 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 32351) 启动。
2025-07-03 12:16:24,856 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: LOGIN
2025-07-03 12:16:24,865 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-03 12:16:24,870 - db - INFO - DatabaseManager: 用户 4031 在线状态更新成功: 10.21.240.25:32352。
2025-07-03 12:16:24,872 - server - INFO - SecureChatServer: 用户 A (ID: 4031) 从 ('127.0.0.1', 32351) 登录。
2025-07-03 12:16:24,873 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:24,873 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个在线好友信息。
2025-07-03 12:16:24,873 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:16:24,880 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:24,882 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个所有好友信息。
2025-07-03 12:16:24,882 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:16:26,425 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:26,430 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个在线好友信息。
2025-07-03 12:16:26,432 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:16:26,432 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:26,440 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个所有好友信息。
2025-07-03 12:16:26,442 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:16:26,636 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:26,637 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个在线好友信息。
2025-07-03 12:16:26,638 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:16:26,640 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:26,640 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个所有好友信息。
2025-07-03 12:16:26,640 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:16:28,586 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:28,589 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个在线好友信息。
2025-07-03 12:16:28,590 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-03 12:16:28,592 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:28,592 - db - INFO - DatabaseManager: 已为用户 4031 检索到 0 个所有好友信息。
2025-07-03 12:16:28,596 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-03 12:16:38,038 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32385) 的新连接。
2025-07-03 12:16:38,044 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 32385) 启动。
2025-07-03 12:16:38,044 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32385) 的命令: REGISTER
2025-07-03 12:16:38,055 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-07-03 12:16:38,055 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-07-03 12:16:38,055 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 32385) 断开连接，用户未登录。
2025-07-03 12:16:38,055 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 32385) 的连接已关闭。
2025-07-03 12:16:44,488 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的新连接。
2025-07-03 12:16:44,503 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 32400) 启动。
2025-07-03 12:16:44,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: LOGIN
2025-07-03 12:16:44,503 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-03 12:16:44,519 - db - INFO - DatabaseManager: 用户 4032 在线状态更新成功: 10.21.240.25:32401。
2025-07-03 12:16:44,519 - server - INFO - SecureChatServer: 用户 B (ID: 4032) 从 ('127.0.0.1', 32400) 登录。
2025-07-03 12:16:44,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:44,535 - db - INFO - DatabaseManager: 已为用户 4032 检索到 0 个在线好友信息。
2025-07-03 12:16:44,535 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 12:16:44,535 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:44,539 - db - INFO - DatabaseManager: 已为用户 4032 检索到 0 个所有好友信息。
2025-07-03 12:16:44,539 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 12:16:46,092 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:46,117 - db - INFO - DatabaseManager: 已为用户 4032 检索到 0 个在线好友信息。
2025-07-03 12:16:46,120 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 12:16:46,122 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:46,133 - db - INFO - DatabaseManager: 已为用户 4032 检索到 0 个所有好友信息。
2025-07-03 12:16:46,136 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 12:16:46,404 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:46,405 - db - INFO - DatabaseManager: 已为用户 4032 检索到 0 个在线好友信息。
2025-07-03 12:16:46,405 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 12:16:46,407 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:46,409 - db - INFO - DatabaseManager: 已为用户 4032 检索到 0 个所有好友信息。
2025-07-03 12:16:46,411 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 12:16:48,377 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:48,381 - db - INFO - DatabaseManager: 已为用户 4032 检索到 0 个在线好友信息。
2025-07-03 12:16:48,382 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 12:16:48,384 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:48,390 - db - INFO - DatabaseManager: 已为用户 4032 检索到 0 个所有好友信息。
2025-07-03 12:16:48,391 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 12:16:53,298 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:53,307 - db - INFO - DatabaseManager: 已为用户 4032 检索到 0 个在线好友信息。
2025-07-03 12:16:53,309 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-03 12:16:53,310 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:53,314 - db - INFO - DatabaseManager: 已为用户 4032 检索到 0 个所有好友信息。
2025-07-03 12:16:53,314 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-03 12:16:55,786 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ALL_USERS
2025-07-03 12:16:55,790 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-03 12:16:55,790 - server - INFO - SecureChatServer: 向 B 提供了所有注册用户列表。
2025-07-03 12:16:56,600 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: ADD_FRIEND
2025-07-03 12:16:56,612 - db - INFO - DatabaseManager: 用户 4031 添加好友 4032 成功。
2025-07-03 12:16:56,614 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4031) 为好友成功。
2025-07-03 12:16:56,615 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:56,622 - db - INFO - DatabaseManager: 已为用户 4032 检索到 1 个在线好友信息。
2025-07-03 12:16:56,622 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 12:16:56,622 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:56,630 - db - INFO - DatabaseManager: 已为用户 4032 检索到 1 个所有好友信息。
2025-07-03 12:16:56,630 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 12:16:57,505 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:57,506 - db - INFO - DatabaseManager: 已为用户 4031 检索到 1 个在线好友信息。
2025-07-03 12:16:57,508 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 12:16:57,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:57,522 - db - INFO - DatabaseManager: 已为用户 4031 检索到 1 个所有好友信息。
2025-07-03 12:16:57,522 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:16:58,866 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:16:58,868 - db - INFO - DatabaseManager: 已为用户 4032 检索到 1 个在线好友信息。
2025-07-03 12:16:58,869 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 12:16:58,871 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ALL_FRIENDS
2025-07-03 12:16:58,873 - db - INFO - DatabaseManager: 已为用户 4032 检索到 1 个所有好友信息。
2025-07-03 12:16:58,874 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 12:17:16,372 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:17:16,372 - db - INFO - DatabaseManager: 已为用户 4032 检索到 1 个在线好友信息。
2025-07-03 12:17:16,372 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 12:17:16,381 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ALL_FRIENDS
2025-07-03 12:17:16,384 - db - INFO - DatabaseManager: 已为用户 4032 检索到 1 个所有好友信息。
2025-07-03 12:17:16,386 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 12:17:26,585 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:17:26,588 - db - INFO - DatabaseManager: 已为用户 4031 检索到 1 个在线好友信息。
2025-07-03 12:17:26,590 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 12:17:26,593 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ALL_FRIENDS
2025-07-03 12:17:26,595 - db - INFO - DatabaseManager: 已为用户 4031 检索到 1 个所有好友信息。
2025-07-03 12:17:26,597 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:17:46,376 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:17:46,391 - db - INFO - DatabaseManager: 已为用户 4032 检索到 1 个在线好友信息。
2025-07-03 12:17:46,392 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-03 12:17:46,393 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32400) 的命令: GET_ALL_FRIENDS
2025-07-03 12:17:46,395 - db - INFO - DatabaseManager: 已为用户 4032 检索到 1 个所有好友信息。
2025-07-03 12:17:46,398 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-03 12:17:56,592 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ONLINE_FRIENDS
2025-07-03 12:17:56,610 - db - INFO - DatabaseManager: 已为用户 4031 检索到 1 个在线好友信息。
2025-07-03 12:17:56,614 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-03 12:17:56,617 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 32351) 的命令: GET_ALL_FRIENDS
2025-07-03 12:17:56,630 - db - INFO - DatabaseManager: 已为用户 4031 检索到 1 个所有好友信息。
2025-07-03 12:17:56,633 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-03 12:18:08,838 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 32400) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 12:18:08,848 - db - INFO - DatabaseManager: 用户 4032 在线状态已清除。
2025-07-03 12:18:08,848 - server - INFO - SecureChatServer: 已清理用户 B (ID: 4032) 的会话并更新离线状态。
2025-07-03 12:18:08,848 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 32400) 的连接已关闭。
2025-07-03 12:18:10,913 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 32351) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-03 12:18:10,919 - db - INFO - DatabaseManager: 用户 4031 在线状态已清除。
2025-07-03 12:18:10,919 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4031) 的会话并更新离线状态。
2025-07-03 12:18:10,919 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 32351) 的连接已关闭。
