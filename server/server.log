2025-06-30 16:58:57,183 - __main__ - INFO - 服务器程序启动。
2025-06-30 16:58:57,183 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 16:58:57,593 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 16:58:57,612 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 16:58:57,620 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 16:58:57,878 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 16:58:57,879 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 16:58:57,880 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 16:58:57,881 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:10:28,820 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:10:28,820 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:10:28,967 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:10:28,995 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:10:29,004 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:10:29,013 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:10:29,013 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:10:29,014 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:10:29,015 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:10:39,607 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3014) 的新连接。
2025-06-30 22:10:39,610 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3014) 启动。
2025-06-30 22:10:39,615 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3014) 的命令: LOGIN
2025-06-30 22:10:39,685 - server - ERROR - SecureChatServer: 处理来自 ('127.0.0.1', 3014) 的客户端请求时出错: Unicode-objects must be encoded before hashing
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 103, in _handle_client
    user_id, public_key = self.db_manager.authenticate_user(username, password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 125, in authenticate_user
    password_hash = hash_password(password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\utils.py", line 10, in hash_password
    return hashlib.sha256(password).hexdigest()
TypeError: Unicode-objects must be encoded before hashing
2025-06-30 22:10:39,717 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 3014) 断开连接。
2025-06-30 22:10:39,718 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3014) 的连接已关闭。
2025-06-30 22:10:50,052 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3030) 的新连接。
2025-06-30 22:10:50,080 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3030) 启动。
2025-06-30 22:10:50,111 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3030) 的命令: LOGIN
2025-06-30 22:10:50,111 - server - ERROR - SecureChatServer: 处理来自 ('127.0.0.1', 3030) 的客户端请求时出错: Unicode-objects must be encoded before hashing
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 103, in _handle_client
    user_id, public_key = self.db_manager.authenticate_user(username, password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 125, in authenticate_user
    password_hash = hash_password(password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\utils.py", line 10, in hash_password
    return hashlib.sha256(password).hexdigest()
TypeError: Unicode-objects must be encoded before hashing
2025-06-30 22:10:50,123 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 3030) 断开连接。
2025-06-30 22:10:50,125 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3030) 的连接已关闭。
2025-06-30 22:11:11,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3058) 的新连接。
2025-06-30 22:11:11,509 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3058) 启动。
2025-06-30 22:11:11,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3058) 的命令: REGISTER
2025-06-30 22:11:11,509 - server - ERROR - SecureChatServer: 处理来自 ('127.0.0.1', 3058) 的客户端请求时出错: Unicode-objects must be encoded before hashing
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 85, in _handle_client
    if self.db_manager.register_user(username, password, public_key):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 97, in register_user
    password_hash = hash_password(password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\utils.py", line 10, in hash_password
    return hashlib.sha256(password).hexdigest()
TypeError: Unicode-objects must be encoded before hashing
2025-06-30 22:11:11,513 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 3058) 断开连接。
2025-06-30 22:11:11,513 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3058) 的连接已关闭。
2025-06-30 22:11:19,625 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3062) 的新连接。
2025-06-30 22:11:19,625 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3062) 启动。
2025-06-30 22:11:19,625 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3062) 的命令: REGISTER
2025-06-30 22:11:19,625 - server - ERROR - SecureChatServer: 处理来自 ('127.0.0.1', 3062) 的客户端请求时出错: Unicode-objects must be encoded before hashing
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 85, in _handle_client
    if self.db_manager.register_user(username, password, public_key):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 97, in register_user
    password_hash = hash_password(password)
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\utils.py", line 10, in hash_password
    return hashlib.sha256(password).hexdigest()
TypeError: Unicode-objects must be encoded before hashing
2025-06-30 22:11:19,625 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 3062) 断开连接。
2025-06-30 22:11:19,625 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3062) 的连接已关闭。
2025-06-30 22:12:26,047 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:12:26,047 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:12:27,215 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:12:27,236 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:12:27,248 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:12:27,257 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:12:27,257 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:12:27,259 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:12:27,259 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:12:37,414 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3221) 的新连接。
2025-06-30 22:12:37,451 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3221) 启动。
2025-06-30 22:12:37,476 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3221) 的命令: LOGIN
2025-06-30 22:12:37,781 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:12:37,797 - db - INFO - DatabaseManager: 用户 2 在线状态更新成功: 10.21.240.25:3222。
2025-06-30 22:12:37,801 - server - INFO - SecureChatServer: 用户 ztz (ID: 2) 从 ('127.0.0.1', 3221) 登录。
2025-06-30 22:12:37,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3221) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:12:37,811 - db - INFO - DatabaseManager: 已为用户 2 检索到 0 个在线好友信息。
2025-06-30 22:12:37,811 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个在线好友列表。
2025-06-30 22:15:38,302 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 3221) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:15:38,334 - db - INFO - DatabaseManager: 用户 2 在线状态已清除。
2025-06-30 22:15:38,342 - server - INFO - SecureChatServer: 已清理用户 ztz (ID: 2) 的会话并更新离线状态。
2025-06-30 22:15:38,343 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3221) 的连接已关闭。
2025-06-30 22:15:51,585 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3582) 的新连接。
2025-06-30 22:15:51,585 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3582) 启动。
2025-06-30 22:15:51,585 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3582) 的命令: LOGIN
2025-06-30 22:15:51,594 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:15:51,618 - db - INFO - DatabaseManager: 用户 1 在线状态更新成功: 10.21.240.25:3583。
2025-06-30 22:15:51,622 - server - INFO - SecureChatServer: 用户 ddd (ID: 1) 从 ('127.0.0.1', 3582) 登录。
2025-06-30 22:15:51,626 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3582) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:15:51,635 - db - INFO - DatabaseManager: 已为用户 1 检索到 0 个在线好友信息。
2025-06-30 22:15:51,637 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个在线好友列表。
2025-06-30 22:16:54,750 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 3582) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:16:54,759 - db - INFO - DatabaseManager: 用户 1 在线状态已清除。
2025-06-30 22:16:54,761 - server - INFO - SecureChatServer: 已清理用户 ddd (ID: 1) 的会话并更新离线状态。
2025-06-30 22:16:54,761 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 3582) 的连接已关闭。
2025-06-30 22:17:12,789 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的新连接。
2025-06-30 22:17:12,791 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 3781) 启动。
2025-06-30 22:17:12,792 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: LOGIN
2025-06-30 22:17:12,825 - db - INFO - DatabaseManager: 用户 'syn' 认证成功。
2025-06-30 22:17:12,839 - db - INFO - DatabaseManager: 用户 3 在线状态更新成功: 10.21.240.25:3782。
2025-06-30 22:17:12,839 - server - INFO - SecureChatServer: 用户 syn (ID: 3) 从 ('127.0.0.1', 3781) 登录。
2025-06-30 22:17:12,842 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:17:12,843 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:17:12,851 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:17:14,388 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:17:14,391 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:17:14,393 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:17:14,394 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ALL_FRIENDS
2025-06-30 22:17:14,398 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=3 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:17:14,401 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-06-30 22:17:59,151 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: ADD_FRIEND
2025-06-30 22:17:59,301 - db - INFO - DatabaseManager: 用户 2 添加好友 3 成功。
2025-06-30 22:17:59,301 - server - INFO - SecureChatServer: 用户 syn 添加 ztz (ID: 2) 为好友成功。
2025-06-30 22:17:59,303 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:17:59,313 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:17:59,313 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:19:34,725 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:19:34,872 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:19:34,873 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:19:34,875 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 3781) 的命令: GET_ALL_FRIENDS
2025-06-30 22:19:34,878 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=3 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:19:34,878 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-06-30 22:19:46,306 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4073) 的新连接。
2025-06-30 22:19:46,308 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4073) 启动。
2025-06-30 22:19:46,309 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4073) 的命令: LOGIN
2025-06-30 22:19:46,322 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:19:46,334 - db - INFO - DatabaseManager: 用户 2 在线状态更新成功: 10.21.240.25:4074。
2025-06-30 22:19:46,335 - server - INFO - SecureChatServer: 用户 ztz (ID: 2) 从 ('127.0.0.1', 4073) 登录。
2025-06-30 22:19:46,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4073) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:19:46,342 - db - INFO - DatabaseManager: 已为用户 2 检索到 1 个在线好友信息。
2025-06-30 22:19:46,343 - server - INFO - SecureChatServer: 向 ztz 提供了 1 个在线好友列表。
2025-06-30 22:19:49,247 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4086) 的新连接。
2025-06-30 22:19:49,248 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4086) 启动。
2025-06-30 22:19:49,249 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4086) 的命令: LOGIN
2025-06-30 22:19:49,280 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:19:49,281 - server - WARNING - SecureChatServer: 用户 ztz 尝试重复登录。
2025-06-30 22:19:49,282 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4086) 断开连接。
2025-06-30 22:19:49,282 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4086) 的连接已关闭。
2025-06-30 22:19:57,800 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4114) 的新连接。
2025-06-30 22:19:57,800 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4114) 启动。
2025-06-30 22:19:57,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4114) 的命令: LOGIN
2025-06-30 22:19:57,802 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:19:57,802 - server - WARNING - SecureChatServer: 用户 ztz 尝试重复登录。
2025-06-30 22:19:57,802 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4114) 断开连接。
2025-06-30 22:19:57,802 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4114) 的连接已关闭。
2025-06-30 22:20:38,413 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4204) 的新连接。
2025-06-30 22:20:38,414 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4204) 启动。
2025-06-30 22:20:38,415 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4204) 的命令: LOGIN
2025-06-30 22:20:38,419 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:20:38,443 - db - INFO - DatabaseManager: 用户 1 在线状态更新成功: 10.21.240.25:4205。
2025-06-30 22:20:38,444 - server - INFO - SecureChatServer: 用户 ddd (ID: 1) 从 ('127.0.0.1', 4204) 登录。
2025-06-30 22:20:38,445 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4204) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:20:38,452 - db - INFO - DatabaseManager: 已为用户 1 检索到 1 个在线好友信息。
2025-06-30 22:20:38,453 - server - INFO - SecureChatServer: 向 ddd 提供了 1 个在线好友列表。
2025-06-30 22:20:51,096 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4204) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:20:51,096 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4073) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:20:51,113 - db - INFO - DatabaseManager: 用户 1 在线状态已清除。
2025-06-30 22:20:51,113 - server - INFO - SecureChatServer: 已清理用户 ddd (ID: 1) 的会话并更新离线状态。
2025-06-30 22:20:51,113 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4204) 的连接已关闭。
2025-06-30 22:20:51,115 - db - INFO - DatabaseManager: 用户 2 在线状态已清除。
2025-06-30 22:20:51,116 - server - INFO - SecureChatServer: 已清理用户 ztz (ID: 2) 的会话并更新离线状态。
2025-06-30 22:20:51,116 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4073) 的连接已关闭。
2025-06-30 22:22:28,140 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:22:28,140 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:22:28,253 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:22:28,277 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:22:28,286 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:22:28,292 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:22:28,292 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:22:28,295 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:22:28,295 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:22:47,741 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的新连接。
2025-06-30 22:22:47,749 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4443) 启动。
2025-06-30 22:22:47,750 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的命令: LOGIN
2025-06-30 22:22:47,861 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:22:47,895 - db - INFO - DatabaseManager: 用户 1 在线状态更新成功: 10.21.240.25:4444。
2025-06-30 22:22:47,897 - server - INFO - SecureChatServer: 用户 ddd (ID: 1) 从 ('127.0.0.1', 4443) 登录。
2025-06-30 22:22:47,897 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:22:47,901 - db - INFO - DatabaseManager: 已为用户 1 检索到 0 个在线好友信息。
2025-06-30 22:22:47,901 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个在线好友列表。
2025-06-30 22:22:49,438 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:22:49,439 - db - INFO - DatabaseManager: 已为用户 1 检索到 0 个在线好友信息。
2025-06-30 22:22:49,440 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个在线好友列表。
2025-06-30 22:22:49,440 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的命令: GET_ALL_FRIENDS
2025-06-30 22:22:49,442 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=1 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:22:49,443 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个所有好友列表。
2025-06-30 22:22:57,896 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4443) 的命令: ADD_FRIEND
2025-06-30 22:22:57,899 - db - INFO - DatabaseManager: 用户 1 和 2 已经是好友。
2025-06-30 22:22:57,899 - server - WARNING - SecureChatServer: 用户 ddd 无法添加 ztz 为好友，可能已是好友。
2025-06-30 22:23:26,486 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的新连接。
2025-06-30 22:23:26,513 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4548) 启动。
2025-06-30 22:23:26,528 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的命令: LOGIN
2025-06-30 22:23:26,623 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:23:26,655 - db - INFO - DatabaseManager: 用户 2 在线状态更新成功: 10.21.240.25:4549。
2025-06-30 22:23:26,655 - server - INFO - SecureChatServer: 用户 ztz (ID: 2) 从 ('127.0.0.1', 4548) 登录。
2025-06-30 22:23:26,655 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:23:26,670 - db - INFO - DatabaseManager: 已为用户 2 检索到 0 个在线好友信息。
2025-06-30 22:23:26,670 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个在线好友列表。
2025-06-30 22:23:28,240 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:23:28,242 - db - INFO - DatabaseManager: 已为用户 2 检索到 0 个在线好友信息。
2025-06-30 22:23:28,244 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个在线好友列表。
2025-06-30 22:23:28,246 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的命令: GET_ALL_FRIENDS
2025-06-30 22:23:28,247 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=2 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:23:28,249 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个所有好友列表。
2025-06-30 22:23:37,252 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4548) 的命令: ADD_FRIEND
2025-06-30 22:23:37,255 - db - INFO - DatabaseManager: 用户 1 和 2 已经是好友。
2025-06-30 22:23:37,255 - server - WARNING - SecureChatServer: 用户 ztz 无法添加 ddd 为好友，可能已是好友。
2025-06-30 22:24:19,960 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的新连接。
2025-06-30 22:24:19,960 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4606) 启动。
2025-06-30 22:24:19,968 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: LOGIN
2025-06-30 22:24:19,971 - db - INFO - DatabaseManager: 用户 'syn' 认证成功。
2025-06-30 22:24:19,977 - db - INFO - DatabaseManager: 用户 3 在线状态更新成功: 10.21.240.25:4607。
2025-06-30 22:24:19,977 - server - INFO - SecureChatServer: 用户 syn (ID: 3) 从 ('127.0.0.1', 4606) 登录。
2025-06-30 22:24:19,979 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:24:19,979 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:24:19,979 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:24:21,524 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:24:21,525 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:24:21,525 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:24:21,527 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: GET_ALL_FRIENDS
2025-06-30 22:24:21,528 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=3 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:24:21,529 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-06-30 22:24:44,889 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: ADD_FRIEND
2025-06-30 22:24:44,918 - db - INFO - DatabaseManager: 用户 1 添加好友 3 成功。
2025-06-30 22:24:44,918 - server - INFO - SecureChatServer: 用户 syn 添加 ddd (ID: 1) 为好友成功。
2025-06-30 22:24:44,918 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4606) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:24:44,939 - db - INFO - DatabaseManager: 已为用户 3 检索到 0 个在线好友信息。
2025-06-30 22:24:44,939 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-06-30 22:25:00,101 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4662) 的新连接。
2025-06-30 22:25:00,101 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4662) 启动。
2025-06-30 22:25:00,101 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4662) 的命令: LOGIN
2025-06-30 22:25:00,101 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:25:00,101 - server - WARNING - SecureChatServer: 用户 ddd 尝试重复登录。
2025-06-30 22:25:00,101 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4662) 断开连接。
2025-06-30 22:25:00,101 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4662) 的连接已关闭。
2025-06-30 22:26:23,212 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4805) 的新连接。
2025-06-30 22:26:23,214 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4805) 启动。
2025-06-30 22:26:23,217 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4805) 的命令: LOGIN
2025-06-30 22:26:23,263 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:26:23,263 - server - WARNING - SecureChatServer: 用户 ddd 尝试重复登录。
2025-06-30 22:26:23,265 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4805) 断开连接。
2025-06-30 22:26:23,265 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4805) 的连接已关闭。
2025-06-30 22:26:39,403 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4835) 的新连接。
2025-06-30 22:26:39,406 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4835) 启动。
2025-06-30 22:26:39,407 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4835) 的命令: LOGIN
2025-06-30 22:26:39,420 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:26:39,422 - server - WARNING - SecureChatServer: 用户 ddd 尝试重复登录。
2025-06-30 22:26:39,422 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4835) 断开连接。
2025-06-30 22:26:39,422 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4835) 的连接已关闭。
2025-06-30 22:27:02,382 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4548) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:27:02,402 - db - WARNING - DatabaseManager: 尝试清除用户 2 在线状态，但记录不存在。
2025-06-30 22:27:02,403 - server - INFO - SecureChatServer: 已清理用户 ztz (ID: 2) 的会话并更新离线状态。
2025-06-30 22:27:02,404 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4548) 的连接已关闭。
2025-06-30 22:27:12,114 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:27:12,114 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:27:12,261 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:27:12,275 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:27:12,278 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:27:12,289 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:27:12,289 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:27:12,293 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:27:12,293 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:27:59,549 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:27:59,549 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:27:59,632 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:27:59,643 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:27:59,650 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:27:59,655 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:27:59,655 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:27:59,657 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:27:59,657 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:28:25,719 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4999) 的新连接。
2025-06-30 22:28:25,719 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4999) 启动。
2025-06-30 22:28:25,719 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4999) 的命令: LOGIN
2025-06-30 22:28:25,725 - db - INFO - DatabaseManager: 用户 'ddd' 认证成功。
2025-06-30 22:28:25,747 - db - INFO - DatabaseManager: 用户 1 在线状态更新成功: 10.21.240.25:5002。
2025-06-30 22:28:25,747 - server - INFO - SecureChatServer: 用户 ddd (ID: 1) 从 ('127.0.0.1', 4999) 登录。
2025-06-30 22:28:25,751 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4999) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:28:25,756 - db - INFO - DatabaseManager: 已为用户 1 检索到 0 个在线好友信息。
2025-06-30 22:28:25,756 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个在线好友列表。
2025-06-30 22:28:27,311 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4999) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:28:27,314 - db - INFO - DatabaseManager: 已为用户 1 检索到 0 个在线好友信息。
2025-06-30 22:28:27,316 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个在线好友列表。
2025-06-30 22:28:27,318 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4999) 的命令: GET_ALL_FRIENDS
2025-06-30 22:28:27,321 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=1 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:28:27,327 - server - INFO - SecureChatServer: 向 ddd 提供了 0 个所有好友列表。
2025-06-30 22:28:39,500 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5014) 的新连接。
2025-06-30 22:28:39,500 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5014) 启动。
2025-06-30 22:28:39,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5014) 的命令: LOGIN
2025-06-30 22:28:39,505 - db - INFO - DatabaseManager: 用户 'ztz' 认证成功。
2025-06-30 22:28:39,511 - db - INFO - DatabaseManager: 用户 2 在线状态更新成功: 10.21.240.25:5015。
2025-06-30 22:28:39,511 - server - INFO - SecureChatServer: 用户 ztz (ID: 2) 从 ('127.0.0.1', 5014) 登录。
2025-06-30 22:28:39,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5014) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:28:39,511 - db - INFO - DatabaseManager: 已为用户 2 检索到 0 个在线好友信息。
2025-06-30 22:28:39,511 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个在线好友列表。
2025-06-30 22:28:41,047 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5014) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:28:41,048 - db - INFO - DatabaseManager: 已为用户 2 检索到 0 个在线好友信息。
2025-06-30 22:28:41,049 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个在线好友列表。
2025-06-30 22:28:41,049 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5014) 的命令: GET_ALL_FRIENDS
2025-06-30 22:28:41,060 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=2 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:28:41,060 - server - INFO - SecureChatServer: 向 ztz 提供了 0 个所有好友列表。
2025-06-30 22:29:04,196 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:29:04,196 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:29:04,338 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:29:04,353 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:29:04,360 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:29:04,368 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:29:04,368 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:29:04,368 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:29:04,368 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:30:48,699 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:30:48,700 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:30:48,825 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:30:48,843 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:30:48,851 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:30:48,859 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:30:48,859 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:30:48,860 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:30:48,862 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:31:58,562 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5352) 的新连接。
2025-06-30 22:31:58,563 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5352) 启动。
2025-06-30 22:31:58,565 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5352) 的命令: REGISTER
2025-06-30 22:31:58,605 - db - INFO - DatabaseManager: 用户 'A' 注册成功。
2025-06-30 22:31:58,608 - server - INFO - SecureChatServer: 用户 A 已注册。
2025-06-30 22:31:58,610 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 5352) 断开连接。
2025-06-30 22:31:58,612 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5352) 的连接已关闭。
2025-06-30 22:32:06,290 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5362) 的新连接。
2025-06-30 22:32:06,290 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5362) 启动。
2025-06-30 22:32:06,295 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5362) 的命令: LOGIN
2025-06-30 22:32:06,309 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:32:06,324 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:5363。
2025-06-30 22:32:06,325 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 5362) 登录。
2025-06-30 22:32:06,327 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5362) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:32:06,332 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:32:06,332 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:32:08,869 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5362) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:32:08,901 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:32:08,901 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:32:08,901 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5362) 的命令: GET_ALL_FRIENDS
2025-06-30 22:32:08,901 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=4 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:32:08,907 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:32:28,604 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5391) 的新连接。
2025-06-30 22:32:28,606 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5391) 启动。
2025-06-30 22:32:28,606 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5391) 的命令: REGISTER
2025-06-30 22:32:28,639 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-06-30 22:32:28,639 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-06-30 22:32:28,639 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 5391) 断开连接。
2025-06-30 22:32:28,639 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5391) 的连接已关闭。
2025-06-30 22:32:35,875 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的新连接。
2025-06-30 22:32:35,875 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5415) 启动。
2025-06-30 22:32:35,875 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: LOGIN
2025-06-30 22:32:35,875 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:32:35,906 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:5416。
2025-06-30 22:32:35,906 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 5415) 登录。
2025-06-30 22:32:35,906 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:32:35,914 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:32:35,914 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:32:37,858 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:32:37,875 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:32:37,877 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:32:37,877 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: GET_ALL_FRIENDS
2025-06-30 22:32:37,880 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=5 时出错: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 390, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42000', "[42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]关键字 'FROM' 附近有语法错误。 (156) (SQLExecDirectW); [42000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:32:37,880 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 22:33:00,551 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: ADD_FRIEND
2025-06-30 22:33:00,573 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:33:00,576 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 22:33:00,576 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5415) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:33:00,580 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:33:00,583 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:36:41,673 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:36:41,673 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:36:41,771 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:36:41,788 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:36:41,796 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:36:41,803 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:36:41,803 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:36:41,804 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:36:41,805 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:37:05,145 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5843) 的新连接。
2025-06-30 22:37:05,145 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5843) 启动。
2025-06-30 22:37:05,147 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5843) 的命令: LOGIN
2025-06-30 22:37:05,152 - db - WARNING - DatabaseManager: 用户 'A' 认证失败 (用户名或密码无效)。
2025-06-30 22:37:05,152 - server - WARNING - SecureChatServer: 用户 A 登录失败，凭据无效。
2025-06-30 22:37:05,156 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 5843) 断开连接。
2025-06-30 22:37:05,156 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5843) 的连接已关闭。
2025-06-30 22:37:10,049 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5845) 的新连接。
2025-06-30 22:37:10,049 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5845) 启动。
2025-06-30 22:37:10,057 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5845) 的命令: LOGIN
2025-06-30 22:37:10,059 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:37:10,080 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:5846。
2025-06-30 22:37:10,080 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 5845) 登录。
2025-06-30 22:37:10,080 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5845) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:37:10,092 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:37:10,092 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:37:11,850 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5845) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:37:11,852 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:37:11,852 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:37:11,854 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5845) 的命令: GET_ALL_FRIENDS
2025-06-30 22:37:11,856 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=4 时出错: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]列名 'u' 无效。 (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 392, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]列名 'u' 无效。 (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:37:11,856 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:37:22,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的新连接。
2025-06-30 22:37:22,335 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5855) 启动。
2025-06-30 22:37:22,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: LOGIN
2025-06-30 22:37:22,351 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:37:22,351 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:5856。
2025-06-30 22:37:22,351 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 5855) 登录。
2025-06-30 22:37:22,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:37:22,351 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:37:22,351 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:37:23,901 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:37:23,903 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:37:23,903 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:37:23,903 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: GET_ALL_FRIENDS
2025-06-30 22:37:23,906 - db - ERROR - DatabaseManager: 获取所有好友信息 UserID=5 时出错: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]列名 'u' 无效。 (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\db.py", line 392, in get_all_friends_info
    cursor.execute(sql, user_id, user_id, user_id, user_id)
pyodbc.ProgrammingError: ('42S22', "[42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]列名 'u' 无效。 (207) (SQLExecDirectW); [42S22] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]无法预定义语句。 (8180)")
2025-06-30 22:37:23,907 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 22:37:45,579 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: ADD_FRIEND
2025-06-30 22:37:45,605 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:37:45,615 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 22:37:45,616 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5855) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:37:45,616 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:37:45,616 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:39:27,699 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:39:27,699 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:39:27,853 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:39:27,867 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:39:27,875 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:39:27,881 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:39:27,881 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:39:27,882 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:39:27,882 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:40:50,321 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6205) 的新连接。
2025-06-30 22:40:50,321 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6205) 启动。
2025-06-30 22:40:50,321 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6205) 的命令: LOGIN
2025-06-30 22:40:50,347 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:40:50,356 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:6206。
2025-06-30 22:40:50,356 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 6205) 登录。
2025-06-30 22:40:50,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6205) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:40:50,366 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:40:50,366 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:40:52,868 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6205) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:40:52,876 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:40:52,878 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:40:52,880 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6205) 的命令: GET_ALL_FRIENDS
2025-06-30 22:40:52,898 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 22:40:52,899 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:40:59,884 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的新连接。
2025-06-30 22:40:59,884 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6222) 启动。
2025-06-30 22:40:59,884 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: LOGIN
2025-06-30 22:40:59,896 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:40:59,912 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:6223。
2025-06-30 22:40:59,912 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 6222) 登录。
2025-06-30 22:40:59,912 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:40:59,918 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:40:59,918 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:41:01,873 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:41:01,875 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:41:01,876 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:41:01,876 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: GET_ALL_FRIENDS
2025-06-30 22:41:01,881 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 22:41:01,881 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 22:41:11,259 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: ADD_FRIEND
2025-06-30 22:41:11,283 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:41:11,285 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 22:41:11,285 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6222) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:41:11,291 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:41:11,292 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:42:30,690 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6205) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:42:30,743 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 22:42:30,744 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 22:42:30,744 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6205) 的连接已关闭。
2025-06-30 22:43:19,356 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的新连接。
2025-06-30 22:43:19,358 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6358) 启动。
2025-06-30 22:43:19,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: LOGIN
2025-06-30 22:43:19,424 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:43:19,440 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:6359。
2025-06-30 22:43:19,440 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 6358) 登录。
2025-06-30 22:43:19,440 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:43:19,456 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:43:19,456 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:43:20,989 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:43:20,990 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:43:20,991 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:43:20,991 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ALL_FRIENDS
2025-06-30 22:43:20,993 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 22:43:21,008 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:43:30,271 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: ADD_FRIEND
2025-06-30 22:43:30,279 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:43:30,279 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 5) 为好友成功。
2025-06-30 22:43:30,281 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:43:30,286 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 22:43:30,287 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 22:43:32,093 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: ADD_FRIEND
2025-06-30 22:43:32,095 - db - INFO - DatabaseManager: 用户 4 和 5 已经是好友。
2025-06-30 22:43:32,098 - server - WARNING - SecureChatServer: 用户 A 无法添加 B 为好友，可能已是好友。
2025-06-30 22:43:57,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:43:57,372 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 22:43:57,373 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 22:44:05,435 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6395) 的新连接。
2025-06-30 22:44:05,435 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6395) 启动。
2025-06-30 22:44:05,442 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6395) 的命令: LOGIN
2025-06-30 22:44:05,444 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:44:05,444 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 22:44:05,444 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6395) 断开连接。
2025-06-30 22:44:05,444 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6395) 的连接已关闭。
2025-06-30 22:44:07,555 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6397) 的新连接。
2025-06-30 22:44:07,555 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6397) 启动。
2025-06-30 22:44:07,555 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6397) 的命令: LOGIN
2025-06-30 22:44:07,555 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:44:07,555 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 22:44:07,569 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6397) 断开连接。
2025-06-30 22:44:07,569 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6397) 的连接已关闭。
2025-06-30 22:44:19,626 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:44:19,641 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 22:44:19,641 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 22:44:22,497 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:44:22,498 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 22:44:22,498 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 22:44:22,750 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6358) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:44:22,751 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 22:44:22,751 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 22:45:56,915 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6358) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:45:56,960 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 22:45:56,961 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 22:45:56,961 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6358) 的连接已关闭。
2025-06-30 22:46:22,667 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6471) 的新连接。
2025-06-30 22:46:22,667 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6471) 启动。
2025-06-30 22:46:22,675 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6471) 的命令: LOGIN
2025-06-30 22:46:22,694 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:46:22,694 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:6472。
2025-06-30 22:46:22,694 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 6471) 登录。
2025-06-30 22:46:22,694 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6471) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:46:22,710 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:46:22,710 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:46:35,639 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6491) 的新连接。
2025-06-30 22:46:35,641 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6491) 启动。
2025-06-30 22:46:35,643 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6491) 的命令: LOGIN
2025-06-30 22:46:35,651 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:46:35,651 - server - WARNING - SecureChatServer: 用户 B 尝试重复登录。
2025-06-30 22:46:35,651 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6491) 断开连接。
2025-06-30 22:46:35,651 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6491) 的连接已关闭。
2025-06-30 22:47:00,526 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6505) 的新连接。
2025-06-30 22:47:00,526 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6505) 启动。
2025-06-30 22:47:00,543 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6505) 的命令: LOGIN
2025-06-30 22:47:00,544 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:47:00,544 - server - WARNING - SecureChatServer: 用户 B 尝试重复登录。
2025-06-30 22:47:00,544 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6505) 断开连接。
2025-06-30 22:47:00,544 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6505) 的连接已关闭。
2025-06-30 22:47:11,445 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6509) 的新连接。
2025-06-30 22:47:11,445 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6509) 启动。
2025-06-30 22:47:11,447 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6509) 的命令: LOGIN
2025-06-30 22:47:11,447 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:47:11,447 - server - WARNING - SecureChatServer: 用户 B 尝试重复登录。
2025-06-30 22:47:11,451 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 6509) 断开连接。
2025-06-30 22:47:11,451 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6509) 的连接已关闭。
2025-06-30 22:47:50,498 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:47:50,499 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:47:50,599 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:47:50,612 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:47:50,619 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:47:50,626 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:47:50,626 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:47:50,627 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:47:50,628 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:48:18,795 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6616) 的新连接。
2025-06-30 22:48:18,796 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6616) 启动。
2025-06-30 22:48:18,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6616) 的命令: LOGIN
2025-06-30 22:48:18,814 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:48:18,826 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:6617。
2025-06-30 22:48:18,827 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 6616) 登录。
2025-06-30 22:48:18,828 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6616) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:48:18,834 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:48:18,835 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:48:20,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6616) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:48:20,359 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:48:20,361 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:48:20,362 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6616) 的命令: GET_ALL_FRIENDS
2025-06-30 22:48:20,365 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 22:48:20,366 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:48:24,828 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的新连接。
2025-06-30 22:48:24,829 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6635) 启动。
2025-06-30 22:48:24,830 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: LOGIN
2025-06-30 22:48:24,834 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:48:24,836 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:6636。
2025-06-30 22:48:24,837 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 6635) 登录。
2025-06-30 22:48:24,837 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:48:24,838 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:48:24,839 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:48:26,386 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:48:26,389 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:48:26,390 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:48:26,391 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: GET_ALL_FRIENDS
2025-06-30 22:48:26,391 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 22:48:26,393 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 22:50:30,440 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: ADD_FRIEND
2025-06-30 22:50:30,490 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:50:30,491 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 22:50:30,491 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6635) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:50:30,496 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:50:30,496 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:51:50,724 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6635) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:51:50,747 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-06-30 22:51:50,748 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-06-30 22:51:50,748 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6635) 的连接已关闭。
2025-06-30 22:51:54,120 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6616) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:51:54,141 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 22:51:54,142 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 22:51:54,142 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6616) 的连接已关闭。
2025-06-30 22:52:24,773 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:52:24,773 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:52:24,868 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:52:24,878 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:52:24,883 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:52:24,890 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:52:24,890 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:52:24,891 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:52:24,891 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:53:05,465 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6834) 的新连接。
2025-06-30 22:53:05,466 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6834) 启动。
2025-06-30 22:53:05,466 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6834) 的命令: LOGIN
2025-06-30 22:53:05,510 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:53:05,523 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:6835。
2025-06-30 22:53:05,525 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 6834) 登录。
2025-06-30 22:53:05,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6834) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:53:05,527 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:53:05,528 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:53:07,054 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6834) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:53:07,056 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:53:07,057 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:53:07,057 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6834) 的命令: GET_ALL_FRIENDS
2025-06-30 22:53:07,062 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 22:53:07,063 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:53:17,955 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的新连接。
2025-06-30 22:53:17,955 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 6893) 启动。
2025-06-30 22:53:17,957 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: LOGIN
2025-06-30 22:53:17,960 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:53:17,962 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:6894。
2025-06-30 22:53:17,962 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 6893) 登录。
2025-06-30 22:53:17,963 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:53:17,964 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:53:17,964 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:53:19,512 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:53:19,515 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:53:19,518 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:53:19,519 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: GET_ALL_FRIENDS
2025-06-30 22:53:19,520 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 22:53:19,521 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 22:53:37,031 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: ADD_FRIEND
2025-06-30 22:53:37,055 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 22:53:37,056 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 22:53:37,056 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 6893) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:53:37,058 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:53:37,058 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:57:31,445 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6834) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:57:31,499 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 22:57:31,500 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 22:57:31,500 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6834) 的连接已关闭。
2025-06-30 22:57:41,750 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 6893) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 22:57:41,755 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-06-30 22:57:41,756 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-06-30 22:57:41,756 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 6893) 的连接已关闭。
2025-06-30 22:58:20,650 - __main__ - INFO - 服务器程序启动。
2025-06-30 22:58:20,650 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 22:58:20,733 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 22:58:20,744 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 22:58:20,747 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 22:58:20,747 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 22:58:20,747 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 22:58:20,747 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 22:58:20,747 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 22:58:42,273 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7103) 的新连接。
2025-06-30 22:58:42,274 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 7103) 启动。
2025-06-30 22:58:42,275 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7103) 的命令: LOGIN
2025-06-30 22:58:42,298 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 22:58:42,312 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:7104。
2025-06-30 22:58:42,313 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 7103) 登录。
2025-06-30 22:58:42,314 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7103) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:58:42,316 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:58:42,317 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:58:43,852 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7103) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:58:43,853 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 22:58:43,853 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 22:58:43,854 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7103) 的命令: GET_ALL_FRIENDS
2025-06-30 22:58:43,859 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 22:58:43,860 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 22:58:55,299 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的新连接。
2025-06-30 22:58:55,300 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 7127) 启动。
2025-06-30 22:58:55,300 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: LOGIN
2025-06-30 22:58:55,305 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 22:58:55,307 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:7128。
2025-06-30 22:58:55,307 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 7127) 登录。
2025-06-30 22:58:55,308 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:58:55,309 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:58:55,310 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:58:56,863 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: GET_ONLINE_FRIENDS
2025-06-30 22:58:56,866 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 22:58:56,866 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 22:58:56,867 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: GET_ALL_FRIENDS
2025-06-30 22:58:56,868 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 22:58:56,869 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 23:00:40,100 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: ADD_FRIEND
2025-06-30 23:00:40,150 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 23:00:40,152 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 23:00:40,153 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7127) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:00:40,154 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:00:40,155 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:01:48,037 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 7127) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:01:48,070 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-06-30 23:01:48,070 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-06-30 23:01:48,070 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 7127) 的连接已关闭。
2025-06-30 23:01:56,656 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 7103) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:01:56,671 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 23:01:56,671 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 23:01:56,671 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 7103) 的连接已关闭。
2025-06-30 23:25:51,896 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:25:51,896 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:25:51,936 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:25:51,937 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:25:51,937 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:25:51,938 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:25:51,938 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:25:51,939 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:25:51,939 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:26:15,132 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的新连接。
2025-06-30 23:26:15,133 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9435) 启动。
2025-06-30 23:26:15,135 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: LOGIN
2025-06-30 23:26:15,175 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:26:15,190 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:9436。
2025-06-30 23:26:15,191 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 9435) 登录。
2025-06-30 23:26:15,192 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:26:15,195 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:26:15,196 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:26:16,732 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:26:16,734 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:26:16,734 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:26:16,738 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: GET_ALL_FRIENDS
2025-06-30 23:26:16,760 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个所有好友信息。
2025-06-30 23:26:16,762 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-06-30 23:28:04,264 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:28:04,300 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:28:04,301 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:28:04,303 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9435) 的命令: GET_ALL_FRIENDS
2025-06-30 23:28:04,311 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个所有好友信息。
2025-06-30 23:28:04,312 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-06-30 23:28:11,257 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的新连接。
2025-06-30 23:28:11,258 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9728) 启动。
2025-06-30 23:28:11,258 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的命令: LOGIN
2025-06-30 23:28:11,269 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 23:28:11,280 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:9729。
2025-06-30 23:28:11,281 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 9728) 登录。
2025-06-30 23:28:11,281 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:28:11,283 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:28:11,284 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:28:12,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:28:12,842 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:28:12,843 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:28:12,844 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的命令: GET_ALL_FRIENDS
2025-06-30 23:28:12,856 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个所有好友信息。
2025-06-30 23:28:12,857 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-06-30 23:28:47,366 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9728) 的命令: ADD_FRIEND
2025-06-30 23:28:47,382 - db - INFO - DatabaseManager: 用户 4 和 5 已经是好友。
2025-06-30 23:28:47,383 - server - WARNING - SecureChatServer: 用户 B 无法添加 A 为好友，可能已是好友。
2025-06-30 23:29:15,158 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 9435) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:29:15,173 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 23:29:15,173 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 23:29:15,173 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9435) 的连接已关闭。
2025-06-30 23:30:24,782 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:30:24,782 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:30:24,911 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:30:24,934 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:30:24,946 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:30:24,956 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:30:24,956 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:30:24,958 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:30:24,958 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:30:44,685 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9908) 的新连接。
2025-06-30 23:30:44,685 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9908) 启动。
2025-06-30 23:30:44,686 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9908) 的命令: LOGIN
2025-06-30 23:30:44,704 - db - WARNING - DatabaseManager: 用户 'B' 认证失败 (用户名或密码无效)。
2025-06-30 23:30:44,705 - server - WARNING - SecureChatServer: 用户 B 登录失败，凭据无效。
2025-06-30 23:30:44,706 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 9908) 断开连接。
2025-06-30 23:30:44,706 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 9908) 的连接已关闭。
2025-06-30 23:30:57,882 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9928) 的新连接。
2025-06-30 23:30:57,883 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9928) 启动。
2025-06-30 23:30:57,884 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9928) 的命令: LOGIN
2025-06-30 23:30:57,885 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 23:30:57,904 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:9929。
2025-06-30 23:30:57,905 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 9928) 登录。
2025-06-30 23:30:57,906 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9928) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:30:57,908 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:30:57,909 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:30:59,848 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9928) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:30:59,850 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:30:59,851 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:30:59,852 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9928) 的命令: GET_ALL_FRIENDS
2025-06-30 23:30:59,858 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 23:30:59,859 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 23:31:07,455 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的新连接。
2025-06-30 23:31:07,455 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 9938) 启动。
2025-06-30 23:31:07,457 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: LOGIN
2025-06-30 23:31:07,462 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:31:07,463 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:9939。
2025-06-30 23:31:07,464 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 9938) 登录。
2025-06-30 23:31:07,465 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:31:07,466 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:31:07,466 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:31:09,002 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:31:09,005 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:31:09,006 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:31:09,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: GET_ALL_FRIENDS
2025-06-30 23:31:09,009 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 23:31:09,012 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 23:31:48,131 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: ADD_FRIEND
2025-06-30 23:31:48,146 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 23:31:48,147 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 5) 为好友成功。
2025-06-30 23:31:48,148 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:31:48,150 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 23:31:48,151 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 23:31:49,502 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 9938) 的命令: ADD_FRIEND
2025-06-30 23:31:49,505 - db - INFO - DatabaseManager: 用户 4 和 5 已经是好友。
2025-06-30 23:31:49,505 - server - WARNING - SecureChatServer: 用户 A 无法添加 B 为好友，可能已是好友。
2025-06-30 23:33:00,720 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:33:00,720 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:33:00,841 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:33:00,859 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:33:00,865 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:33:00,872 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:33:00,873 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:33:00,874 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:33:00,875 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:33:32,319 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的新连接。
2025-06-30 23:33:32,319 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10107) 启动。
2025-06-30 23:33:32,321 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: LOGIN
2025-06-30 23:33:32,331 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:33:32,342 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:10108。
2025-06-30 23:33:32,343 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 10107) 登录。
2025-06-30 23:33:32,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:33:32,347 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:33:32,347 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:33:33,889 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:33:33,891 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:33:33,891 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:33:33,893 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ALL_FRIENDS
2025-06-30 23:33:33,902 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 23:33:33,904 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 23:34:14,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: ADD_FRIEND
2025-06-30 23:34:14,516 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 23:34:14,517 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 5) 为好友成功。
2025-06-30 23:34:14,518 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:34:14,520 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:34:14,520 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:34:56,966 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:34:56,985 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:34:56,986 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:34:56,987 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10107) 的命令: GET_ALL_FRIENDS
2025-06-30 23:34:57,006 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个所有好友信息。
2025-06-30 23:34:57,008 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-06-30 23:35:05,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10260) 的新连接。
2025-06-30 23:35:05,342 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10260) 启动。
2025-06-30 23:35:05,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10260) 的命令: LOGIN
2025-06-30 23:35:05,347 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 23:35:05,360 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:10261。
2025-06-30 23:35:05,361 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 10260) 登录。
2025-06-30 23:35:05,362 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10260) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:35:05,363 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:35:05,363 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:35:06,881 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10260) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:35:06,881 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:35:06,882 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:35:06,882 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10260) 的命令: GET_ALL_FRIENDS
2025-06-30 23:35:06,883 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个所有好友信息。
2025-06-30 23:35:06,884 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-06-30 23:35:41,476 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 10260) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:35:41,487 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-06-30 23:35:41,488 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-06-30 23:35:41,488 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10260) 的连接已关闭。
2025-06-30 23:41:17,294 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:41:17,294 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:41:17,434 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:41:17,452 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:41:17,458 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:41:17,470 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:41:17,471 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:41:17,472 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:41:17,472 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:41:35,649 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10749) 的新连接。
2025-06-30 23:41:35,650 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10749) 启动。
2025-06-30 23:41:35,651 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10749) 的命令: LOGIN
2025-06-30 23:41:35,671 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:41:35,684 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:10750。
2025-06-30 23:41:35,685 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 10749) 登录。
2025-06-30 23:41:35,686 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10749) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:41:35,688 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:41:35,689 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:41:37,755 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10749) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:41:37,756 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:41:37,756 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:41:37,757 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10749) 的命令: GET_ALL_FRIENDS
2025-06-30 23:41:37,761 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 23:41:37,763 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 23:41:47,827 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的新连接。
2025-06-30 23:41:47,827 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10789) 启动。
2025-06-30 23:41:47,827 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: LOGIN
2025-06-30 23:41:47,833 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 23:41:47,835 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:10790。
2025-06-30 23:41:47,835 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 10789) 登录。
2025-06-30 23:41:47,836 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:41:47,837 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:41:47,837 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:41:49,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:41:49,371 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:41:49,372 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:41:49,374 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: GET_ALL_FRIENDS
2025-06-30 23:41:49,376 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 23:41:49,377 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 23:42:04,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: ADD_FRIEND
2025-06-30 23:42:04,353 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 23:42:04,354 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 23:42:04,355 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10789) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:42:04,356 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:42:04,356 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:42:14,191 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10912) 的新连接。
2025-06-30 23:42:14,192 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10912) 启动。
2025-06-30 23:42:14,193 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10912) 的命令: LOGIN
2025-06-30 23:42:14,199 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:42:14,200 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:42:14,201 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 10912) 断开连接。
2025-06-30 23:42:14,201 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10912) 的连接已关闭。
2025-06-30 23:42:39,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10940) 的新连接。
2025-06-30 23:42:39,817 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10940) 启动。
2025-06-30 23:42:39,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10940) 的命令: LOGIN
2025-06-30 23:42:39,827 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:42:39,829 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:42:39,830 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 10940) 断开连接。
2025-06-30 23:42:39,831 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10940) 的连接已关闭。
2025-06-30 23:42:46,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10944) 的新连接。
2025-06-30 23:42:46,803 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10944) 启动。
2025-06-30 23:42:46,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10944) 的命令: LOGIN
2025-06-30 23:42:46,806 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:42:46,807 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:42:46,808 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 10944) 断开连接。
2025-06-30 23:42:46,808 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10944) 的连接已关闭。
2025-06-30 23:42:55,699 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10959) 的新连接。
2025-06-30 23:42:55,701 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 10959) 启动。
2025-06-30 23:42:55,704 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 10959) 的命令: LOGIN
2025-06-30 23:42:55,705 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:42:55,707 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:42:55,709 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 10959) 断开连接。
2025-06-30 23:42:55,710 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10959) 的连接已关闭。
2025-06-30 23:43:16,679 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 10749) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:43:16,695 - db - WARNING - DatabaseManager: 尝试清除用户 4 在线状态，但记录不存在。
2025-06-30 23:43:16,696 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 23:43:16,696 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 10749) 的连接已关闭。
2025-06-30 23:43:34,738 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11009) 的新连接。
2025-06-30 23:43:34,738 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11009) 启动。
2025-06-30 23:43:34,739 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11009) 的命令: LOGIN
2025-06-30 23:43:34,749 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:43:34,764 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:11010。
2025-06-30 23:43:34,766 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 11009) 登录。
2025-06-30 23:43:34,767 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11009) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:43:34,772 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 23:43:34,773 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 23:43:36,548 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11011) 的新连接。
2025-06-30 23:43:36,550 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11011) 启动。
2025-06-30 23:43:36,551 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11011) 的命令: LOGIN
2025-06-30 23:43:36,567 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:43:36,568 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:43:36,570 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 11011) 断开连接。
2025-06-30 23:43:36,571 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 11011) 的连接已关闭。
2025-06-30 23:44:04,534 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11045) 的新连接。
2025-06-30 23:44:04,535 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11045) 启动。
2025-06-30 23:44:04,537 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11045) 的命令: LOGIN
2025-06-30 23:44:04,542 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:44:04,543 - server - WARNING - SecureChatServer: 用户 A 尝试重复登录。
2025-06-30 23:44:04,544 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 11045) 断开连接。
2025-06-30 23:44:04,544 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 11045) 的连接已关闭。
2025-06-30 23:44:29,908 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:44:29,908 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:44:30,050 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:44:30,061 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:44:30,068 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:44:30,076 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:44:30,076 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:44:30,077 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:44:30,077 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:44:33,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11064) 的新连接。
2025-06-30 23:44:33,350 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11064) 启动。
2025-06-30 23:44:33,352 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11064) 的命令: LOGIN
2025-06-30 23:44:33,378 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:44:33,394 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:11065。
2025-06-30 23:44:33,396 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 11064) 登录。
2025-06-30 23:44:33,397 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11064) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:44:33,399 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-06-30 23:44:33,400 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-06-30 23:44:37,629 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 11064) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:44:37,642 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 23:44:37,642 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 23:44:37,643 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 11064) 的连接已关闭。
2025-06-30 23:45:03,014 - __main__ - INFO - 服务器程序启动。
2025-06-30 23:45:03,014 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-06-30 23:45:03,105 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-06-30 23:45:03,121 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-06-30 23:45:03,128 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-06-30 23:45:03,136 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-06-30 23:45:03,136 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-06-30 23:45:03,137 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-06-30 23:45:03,138 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-06-30 23:45:21,470 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11101) 的新连接。
2025-06-30 23:45:21,470 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11101) 启动。
2025-06-30 23:45:21,472 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11101) 的命令: LOGIN
2025-06-30 23:45:21,483 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-06-30 23:45:21,490 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:11102。
2025-06-30 23:45:21,492 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 11101) 登录。
2025-06-30 23:45:21,493 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11101) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:45:21,495 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:45:21,495 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:45:23,863 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11101) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:45:23,865 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-06-30 23:45:23,866 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-06-30 23:45:23,868 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11101) 的命令: GET_ALL_FRIENDS
2025-06-30 23:45:23,887 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-06-30 23:45:23,890 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-06-30 23:45:35,079 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11119) 的新连接。
2025-06-30 23:45:35,080 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11119) 启动。
2025-06-30 23:45:35,080 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11119) 的命令: LOGIN
2025-06-30 23:45:35,086 - db - WARNING - DatabaseManager: 用户 'A' 认证失败 (用户名或密码无效)。
2025-06-30 23:45:35,086 - server - WARNING - SecureChatServer: 用户 A 登录失败，凭据无效。
2025-06-30 23:45:35,086 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 11119) 断开连接。
2025-06-30 23:45:35,087 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 11119) 的连接已关闭。
2025-06-30 23:45:40,502 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的新连接。
2025-06-30 23:45:40,502 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 11121) 启动。
2025-06-30 23:45:40,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: LOGIN
2025-06-30 23:45:40,504 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-06-30 23:45:40,505 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:11122。
2025-06-30 23:45:40,505 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 11121) 登录。
2025-06-30 23:45:40,505 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:45:40,506 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:45:40,506 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:45:42,851 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:45:42,852 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:45:42,852 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:45:42,852 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: GET_ALL_FRIENDS
2025-06-30 23:45:42,853 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-06-30 23:45:42,853 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-06-30 23:50:28,998 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: ADD_FRIEND
2025-06-30 23:50:29,045 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-06-30 23:50:29,046 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-06-30 23:50:29,046 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 11121) 的命令: GET_ONLINE_FRIENDS
2025-06-30 23:50:29,047 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-06-30 23:50:29,048 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-06-30 23:50:53,378 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 11101) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-06-30 23:50:53,395 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-06-30 23:50:53,397 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-06-30 23:50:53,397 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 11101) 的连接已关闭。
2025-07-01 00:05:21,008 - __main__ - INFO - 服务器程序启动。
2025-07-01 00:05:21,008 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 00:05:21,108 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 00:05:21,129 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 00:05:21,136 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 00:05:21,144 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 00:05:21,144 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 00:05:21,145 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 00:05:21,146 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 00:06:22,984 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13047) 的新连接。
2025-07-01 00:06:22,984 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 13047) 启动。
2025-07-01 00:06:22,985 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13047) 的命令: LOGIN
2025-07-01 00:06:23,000 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-01 00:06:23,017 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:13048。
2025-07-01 00:06:23,018 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 13047) 登录。
2025-07-01 00:06:23,018 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13047) 的命令: GET_ONLINE_FRIENDS
2025-07-01 00:06:23,022 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-07-01 00:06:23,023 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 00:06:24,541 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13047) 的命令: GET_ONLINE_FRIENDS
2025-07-01 00:06:24,543 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个在线好友信息。
2025-07-01 00:06:24,544 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 00:06:24,544 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13047) 的命令: GET_ALL_FRIENDS
2025-07-01 00:06:24,549 - db - INFO - DatabaseManager: 已为用户 4 检索到 0 个所有好友信息。
2025-07-01 00:06:24,550 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 00:06:46,919 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的新连接。
2025-07-01 00:06:46,920 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 13090) 启动。
2025-07-01 00:06:46,924 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: LOGIN
2025-07-01 00:06:46,942 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-01 00:06:46,955 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:13091。
2025-07-01 00:06:46,955 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 13090) 登录。
2025-07-01 00:06:46,956 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: GET_ONLINE_FRIENDS
2025-07-01 00:06:46,958 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-07-01 00:06:46,959 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-01 00:06:48,499 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: GET_ONLINE_FRIENDS
2025-07-01 00:06:48,500 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-07-01 00:06:48,501 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-01 00:06:48,503 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: GET_ALL_FRIENDS
2025-07-01 00:06:48,516 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个所有好友信息。
2025-07-01 00:06:48,517 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-01 00:07:05,695 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: ADD_FRIEND
2025-07-01 00:07:05,705 - db - INFO - DatabaseManager: 用户 4 添加好友 5 成功。
2025-07-01 00:07:05,706 - server - INFO - SecureChatServer: 用户 B 添加 A (ID: 4) 为好友成功。
2025-07-01 00:07:05,706 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13090) 的命令: GET_ONLINE_FRIENDS
2025-07-01 00:07:05,708 - db - INFO - DatabaseManager: 已为用户 5 检索到 0 个在线好友信息。
2025-07-01 00:07:05,708 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-01 00:07:27,651 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13117) 的新连接。
2025-07-01 00:07:27,651 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 13117) 启动。
2025-07-01 00:07:27,652 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 13117) 的命令: LOGIN
2025-07-01 00:07:27,655 - db - WARNING - DatabaseManager: 用户 'ddd' 认证失败 (用户名或密码无效)。
2025-07-01 00:07:27,656 - server - WARNING - SecureChatServer: 用户 ddd 登录失败，凭据无效。
2025-07-01 00:07:27,656 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 13117) 断开连接。
2025-07-01 00:07:27,657 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 13117) 的连接已关闭。
2025-07-01 00:07:57,915 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 13090) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 00:07:57,946 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-07-01 00:07:57,946 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-07-01 00:07:57,946 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 13090) 的连接已关闭。
2025-07-01 20:42:25,613 - __main__ - INFO - 服务器程序启动。
2025-07-01 20:42:25,613 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 20:42:25,723 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 20:42:25,735 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 20:42:25,747 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 20:42:25,754 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 20:42:25,754 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 20:42:25,754 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 20:42:25,762 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 20:43:45,793 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的新连接。
2025-07-01 20:43:45,793 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 64865) 启动。
2025-07-01 20:43:45,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: LOGIN
2025-07-01 20:43:46,417 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-01 20:43:46,423 - db - INFO - DatabaseManager: 用户 4 在线状态更新成功: 10.21.240.25:64866。
2025-07-01 20:43:46,431 - server - INFO - SecureChatServer: 用户 A (ID: 4) 从 ('127.0.0.1', 64865) 登录。
2025-07-01 20:43:46,435 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:43:46,452 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:43:46,454 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:43:46,463 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:43:46,467 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:43:46,606 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:43:48,176 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:43:48,181 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:43:48,182 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:43:48,187 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:43:48,188 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:43:48,188 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:43:48,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:43:48,353 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:43:48,353 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:43:48,354 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:43:48,355 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:43:48,356 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:44:19,106 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:44:19,109 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:44:19,109 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:44:19,109 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:44:19,111 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:44:19,111 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:44:39,970 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的新连接。
2025-07-01 20:44:39,980 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 64910) 启动。
2025-07-01 20:44:40,281 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: LOGIN
2025-07-01 20:44:40,345 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-01 20:44:40,626 - db - INFO - DatabaseManager: 用户 5 在线状态更新成功: 10.21.240.25:64911。
2025-07-01 20:44:40,626 - server - INFO - SecureChatServer: 用户 B (ID: 5) 从 ('127.0.0.1', 64910) 登录。
2025-07-01 20:44:40,628 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:44:40,639 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:44:40,754 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:44:40,761 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:44:40,870 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:44:40,871 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:44:42,402 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:44:42,621 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:44:42,625 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:44:42,626 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:44:42,629 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:44:42,762 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:44:45,280 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:44:45,579 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:44:45,583 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:44:45,585 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:44:45,586 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:44:45,590 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:44:49,120 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:44:49,122 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:44:49,124 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:44:49,124 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:44:49,131 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:44:49,131 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:45:14,104 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:45:14,107 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:45:14,107 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:45:14,107 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:45:14,111 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:45:14,112 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:45:18,294 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:45:18,294 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:45:18,302 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:45:18,303 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:45:18,306 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:45:18,308 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:45:44,118 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:45:44,123 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:45:44,123 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:45:44,131 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:45:44,131 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:45:44,131 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:45:49,113 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:45:49,132 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:45:49,134 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:45:49,136 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:45:49,144 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:45:49,146 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:46:14,111 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:46:14,118 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:46:14,122 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:46:14,125 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:46:14,130 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:46:14,131 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:46:19,118 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:46:19,118 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:46:19,118 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:46:19,118 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:46:19,118 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:46:19,128 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:46:44,112 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:46:44,121 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:46:44,121 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:46:44,129 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:46:44,129 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:46:44,129 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:46:49,109 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:46:49,122 - db - INFO - DatabaseManager: 已为用户 4 检索到 1 个在线好友信息。
2025-07-01 20:46:49,124 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 20:46:49,132 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64865) 的命令: GET_ALL_FRIENDS
2025-07-01 20:46:49,140 - db - INFO - DatabaseManager: 已为用户 4 检索到 4 个所有好友信息。
2025-07-01 20:46:49,141 - server - INFO - SecureChatServer: 向 A 提供了 4 个所有好友列表。
2025-07-01 20:47:14,111 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ONLINE_FRIENDS
2025-07-01 20:47:14,122 - db - INFO - DatabaseManager: 已为用户 5 检索到 1 个在线好友信息。
2025-07-01 20:47:14,122 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-01 20:47:14,127 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 64910) 的命令: GET_ALL_FRIENDS
2025-07-01 20:47:14,128 - db - INFO - DatabaseManager: 已为用户 5 检索到 3 个所有好友信息。
2025-07-01 20:47:14,128 - server - INFO - SecureChatServer: 向 B 提供了 3 个所有好友列表。
2025-07-01 20:47:42,620 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 64865) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 20:47:42,640 - db - INFO - DatabaseManager: 用户 4 在线状态已清除。
2025-07-01 20:47:42,640 - server - INFO - SecureChatServer: 已清理用户 A (ID: 4) 的会话并更新离线状态。
2025-07-01 20:47:42,642 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 64865) 的连接已关闭。
2025-07-01 20:47:43,431 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 64910) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 20:47:43,435 - db - INFO - DatabaseManager: 用户 5 在线状态已清除。
2025-07-01 20:47:43,435 - server - INFO - SecureChatServer: 已清理用户 B (ID: 5) 的会话并更新离线状态。
2025-07-01 20:47:43,437 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 64910) 的连接已关闭。
2025-07-01 20:49:18,899 - __main__ - INFO - 服务器程序启动。
2025-07-01 20:49:18,899 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 20:49:18,961 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 20:49:18,969 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 20:49:18,979 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 20:49:18,986 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 20:49:18,986 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 20:49:18,986 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 20:49:18,986 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 20:50:58,265 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 65283) 的新连接。
2025-07-01 20:50:58,274 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 65283) 启动。
2025-07-01 20:50:58,275 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 65283) 的命令: REGISTER
2025-07-01 20:50:58,324 - db - INFO - DatabaseManager: 用户 'ztz' 注册成功。
2025-07-01 20:50:58,324 - server - INFO - SecureChatServer: 用户 ztz 已注册。
2025-07-01 20:50:58,324 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 65283) 断开连接，用户未登录。
2025-07-01 20:50:58,331 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 65283) 的连接已关闭。
2025-07-01 20:51:16,771 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 65321) 的新连接。
2025-07-01 20:51:16,780 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 65321) 启动。
2025-07-01 20:51:16,781 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 65321) 的命令: REGISTER
2025-07-01 20:51:16,784 - db - INFO - DatabaseManager: 用户 'syn' 注册成功。
2025-07-01 20:51:16,788 - server - INFO - SecureChatServer: 用户 syn 已注册。
2025-07-01 20:51:16,788 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 65321) 断开连接，用户未登录。
2025-07-01 20:51:16,788 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 65321) 的连接已关闭。
2025-07-01 21:00:43,081 - __main__ - INFO - 服务器程序启动。
2025-07-01 21:00:43,081 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 21:00:43,148 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 21:00:43,161 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 21:00:43,168 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 21:00:43,173 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 21:00:43,173 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 21:00:43,173 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 21:00:43,173 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 21:01:05,762 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1405) 的新连接。
2025-07-01 21:01:05,766 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1405) 启动。
2025-07-01 21:01:05,766 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1405) 的命令: REGISTER
2025-07-01 21:01:05,791 - db - INFO - DatabaseManager: 用户 'ztz' 注册成功。
2025-07-01 21:01:05,793 - server - INFO - SecureChatServer: 用户 ztz 已注册。
2025-07-01 21:01:05,797 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 1405) 断开连接，用户未登录。
2025-07-01 21:01:05,798 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1405) 的连接已关闭。
2025-07-01 21:05:00,184 - __main__ - INFO - 服务器程序启动。
2025-07-01 21:05:00,184 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 21:05:00,255 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 21:05:00,267 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 21:05:00,274 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 21:05:00,276 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 21:05:00,276 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 21:05:00,283 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 21:05:00,283 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 21:05:33,029 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1684) 的新连接。
2025-07-01 21:05:33,031 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1684) 启动。
2025-07-01 21:05:33,031 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1684) 的命令: REGISTER
2025-07-01 21:05:33,047 - db - INFO - DatabaseManager: 用户 'syn' 注册成功。
2025-07-01 21:05:33,056 - server - INFO - SecureChatServer: 用户 syn 已注册。
2025-07-01 21:05:33,060 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 1684) 断开连接，用户未登录。
2025-07-01 21:05:33,063 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1684) 的连接已关闭。
2025-07-01 21:07:48,930 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的新连接。
2025-07-01 21:07:48,930 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2087) 启动。
2025-07-01 21:07:48,939 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: LOGIN
2025-07-01 21:07:48,992 - db - INFO - DatabaseManager: 用户 'syn' 认证成功。
2025-07-01 21:07:49,004 - db - INFO - DatabaseManager: 用户 1008 在线状态更新成功: 10.21.240.25:2088。
2025-07-01 21:07:49,004 - server - INFO - SecureChatServer: 用户 syn (ID: 1008) 从 ('127.0.0.1', 2087) 登录。
2025-07-01 21:07:49,012 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:07:49,029 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个在线好友信息。
2025-07-01 21:07:49,031 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-07-01 21:07:49,033 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ALL_FRIENDS
2025-07-01 21:07:49,039 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个所有好友信息。
2025-07-01 21:07:49,039 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-07-01 21:07:50,577 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:07:50,580 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个在线好友信息。
2025-07-01 21:07:50,581 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-07-01 21:07:50,582 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ALL_FRIENDS
2025-07-01 21:07:50,584 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个所有好友信息。
2025-07-01 21:07:50,587 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-07-01 21:07:50,752 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:07:50,753 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个在线好友信息。
2025-07-01 21:07:50,755 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-07-01 21:07:50,756 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ALL_FRIENDS
2025-07-01 21:07:50,756 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个所有好友信息。
2025-07-01 21:07:50,757 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-07-01 21:07:52,714 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:07:52,719 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个在线好友信息。
2025-07-01 21:07:52,722 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-07-01 21:07:52,724 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ALL_FRIENDS
2025-07-01 21:07:52,724 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个所有好友信息。
2025-07-01 21:07:52,724 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-07-01 21:08:21,113 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:08:21,116 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个在线好友信息。
2025-07-01 21:08:21,119 - server - INFO - SecureChatServer: 向 syn 提供了 0 个在线好友列表。
2025-07-01 21:08:21,119 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2087) 的命令: GET_ALL_FRIENDS
2025-07-01 21:08:21,121 - db - INFO - DatabaseManager: 已为用户 1008 检索到 0 个所有好友信息。
2025-07-01 21:08:21,123 - server - INFO - SecureChatServer: 向 syn 提供了 0 个所有好友列表。
2025-07-01 21:08:26,206 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2087) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 21:08:26,222 - db - INFO - DatabaseManager: 用户 1008 在线状态已清除。
2025-07-01 21:08:26,222 - server - INFO - SecureChatServer: 已清理用户 syn (ID: 1008) 的会话并更新离线状态。
2025-07-01 21:08:26,222 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2087) 的连接已关闭。
2025-07-01 21:10:59,061 - __main__ - INFO - 服务器程序启动。
2025-07-01 21:10:59,061 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 21:10:59,142 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 21:10:59,151 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 21:10:59,163 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 21:10:59,172 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 21:10:59,172 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 21:10:59,176 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 21:10:59,177 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 21:11:23,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2404) 的新连接。
2025-07-01 21:11:23,007 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2404) 启动。
2025-07-01 21:11:23,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2404) 的命令: REGISTER
2025-07-01 21:11:23,025 - db - INFO - DatabaseManager: 用户 'A' 注册成功。
2025-07-01 21:11:23,025 - server - INFO - SecureChatServer: 用户 A 已注册。
2025-07-01 21:11:23,034 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 2404) 断开连接，用户未登录。
2025-07-01 21:11:23,034 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2404) 的连接已关闭。
2025-07-01 21:12:08,700 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2511) 的新连接。
2025-07-01 21:12:08,708 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2511) 启动。
2025-07-01 21:12:08,708 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2511) 的命令: REGISTER
2025-07-01 21:12:08,733 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-07-01 21:12:08,733 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-07-01 21:12:08,733 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 2511) 断开连接，用户未登录。
2025-07-01 21:12:08,733 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2511) 的连接已关闭。
2025-07-01 21:13:21,613 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2611) 的新连接。
2025-07-01 21:13:21,617 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2611) 启动。
2025-07-01 21:13:21,618 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2611) 的命令: REGISTER
2025-07-01 21:13:21,660 - db - INFO - DatabaseManager: 用户 'C' 注册成功。
2025-07-01 21:13:21,660 - server - INFO - SecureChatServer: 用户 C 已注册。
2025-07-01 21:13:21,663 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 2611) 断开连接，用户未登录。
2025-07-01 21:13:21,663 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2611) 的连接已关闭。
2025-07-01 21:13:33,996 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的新连接。
2025-07-01 21:13:33,997 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2651) 启动。
2025-07-01 21:13:34,002 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: LOGIN
2025-07-01 21:13:34,009 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-01 21:13:34,019 - db - INFO - DatabaseManager: 用户 1009 在线状态更新成功: 10.21.240.25:2652。
2025-07-01 21:13:34,019 - server - INFO - SecureChatServer: 用户 A (ID: 1009) 从 ('127.0.0.1', 2651) 登录。
2025-07-01 21:13:34,019 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:34,029 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:13:34,032 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:13:34,034 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:34,036 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个所有好友信息。
2025-07-01 21:13:34,036 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 21:13:36,126 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:36,126 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:13:36,128 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:13:36,129 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:36,132 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个所有好友信息。
2025-07-01 21:13:36,133 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 21:13:36,330 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:36,330 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:13:36,330 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:13:36,330 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:36,330 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个所有好友信息。
2025-07-01 21:13:36,330 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 21:13:39,106 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:39,112 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:13:39,115 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:13:39,115 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:39,115 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个所有好友信息。
2025-07-01 21:13:39,115 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 21:13:39,877 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的新连接。
2025-07-01 21:13:39,877 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2665) 启动。
2025-07-01 21:13:39,883 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: LOGIN
2025-07-01 21:13:39,883 - db - INFO - DatabaseManager: 用户 'C' 认证成功。
2025-07-01 21:13:39,886 - db - INFO - DatabaseManager: 用户 1011 在线状态更新成功: 10.21.240.25:2666。
2025-07-01 21:13:39,886 - server - INFO - SecureChatServer: 用户 C (ID: 1011) 从 ('127.0.0.1', 2665) 登录。
2025-07-01 21:13:39,888 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:39,888 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:39,890 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:39,891 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:39,893 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:39,894 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:42,136 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:42,136 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:42,136 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:42,136 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:42,144 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:42,145 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:42,384 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:42,388 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:42,389 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:42,389 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:42,390 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:42,391 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:44,269 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:44,290 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:44,292 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:44,292 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:44,293 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:44,293 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:47,491 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:47,499 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:47,499 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:47,499 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:47,499 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:47,499 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:47,639 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:47,641 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:47,641 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:47,641 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:47,641 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:47,641 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:13:47,900 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:13:47,901 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个在线好友信息。
2025-07-01 21:13:47,902 - server - INFO - SecureChatServer: 向 C 提供了 0 个在线好友列表。
2025-07-01 21:13:47,902 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2665) 的命令: GET_ALL_FRIENDS
2025-07-01 21:13:47,904 - db - INFO - DatabaseManager: 已为用户 1011 检索到 0 个所有好友信息。
2025-07-01 21:13:47,905 - server - INFO - SecureChatServer: 向 C 提供了 0 个所有好友列表。
2025-07-01 21:14:07,117 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:14:07,119 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:14:07,119 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:14:07,120 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:14:07,121 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个所有好友信息。
2025-07-01 21:14:07,121 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-01 21:14:37,109 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:14:37,117 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:14:37,122 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:14:37,122 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:14:37,125 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:14:37,125 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:14:37,132 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:14:37,134 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:14:37,138 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:14:37,139 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2651) 的命令: GET_ALL_FRIENDS
2025-07-01 21:14:37,140 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:14:37,142 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:14:56,333 - __main__ - INFO - 服务器程序启动。
2025-07-01 21:14:56,333 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-01 21:14:56,399 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-01 21:14:56,405 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-01 21:14:56,413 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-01 21:14:56,416 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-01 21:14:56,416 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-01 21:14:56,423 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-01 21:14:56,423 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-01 21:15:15,105 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的新连接。
2025-07-01 21:15:15,105 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2761) 启动。
2025-07-01 21:15:15,112 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: LOGIN
2025-07-01 21:15:15,114 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-01 21:15:15,131 - db - INFO - DatabaseManager: 用户 1009 在线状态更新成功: 10.21.240.25:2762。
2025-07-01 21:15:15,131 - server - INFO - SecureChatServer: 用户 A (ID: 1009) 从 ('127.0.0.1', 2761) 登录。
2025-07-01 21:15:15,131 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:15,140 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:15:15,142 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:15:15,142 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:15,144 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:15:15,144 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:15:17,135 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:17,154 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:15:17,156 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:15:17,159 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:17,163 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:15:17,164 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:15:17,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:17,350 - db - INFO - DatabaseManager: 已为用户 1009 检索到 0 个在线好友信息。
2025-07-01 21:15:17,355 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-01 21:15:17,355 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:17,360 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:15:17,362 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:15:18,657 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的新连接。
2025-07-01 21:15:18,660 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2774) 启动。
2025-07-01 21:15:18,660 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: LOGIN
2025-07-01 21:15:18,673 - db - INFO - DatabaseManager: 用户 'C' 认证成功。
2025-07-01 21:15:18,698 - db - INFO - DatabaseManager: 用户 1011 在线状态更新成功: 10.21.240.25:2775。
2025-07-01 21:15:18,698 - server - INFO - SecureChatServer: 用户 C (ID: 1011) 从 ('127.0.0.1', 2774) 登录。
2025-07-01 21:15:18,698 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:18,706 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个在线好友信息。
2025-07-01 21:15:18,710 - server - INFO - SecureChatServer: 向 C 提供了 1 个在线好友列表。
2025-07-01 21:15:18,710 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:18,711 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个所有好友信息。
2025-07-01 21:15:18,711 - server - INFO - SecureChatServer: 向 C 提供了 1 个所有好友列表。
2025-07-01 21:15:21,118 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:21,121 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个在线好友信息。
2025-07-01 21:15:21,122 - server - INFO - SecureChatServer: 向 C 提供了 1 个在线好友列表。
2025-07-01 21:15:21,123 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:21,125 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个所有好友信息。
2025-07-01 21:15:21,125 - server - INFO - SecureChatServer: 向 C 提供了 1 个所有好友列表。
2025-07-01 21:15:21,312 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:21,312 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个在线好友信息。
2025-07-01 21:15:21,314 - server - INFO - SecureChatServer: 向 C 提供了 1 个在线好友列表。
2025-07-01 21:15:21,315 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:21,315 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个所有好友信息。
2025-07-01 21:15:21,315 - server - INFO - SecureChatServer: 向 C 提供了 1 个所有好友列表。
2025-07-01 21:15:24,918 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:24,928 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个在线好友信息。
2025-07-01 21:15:24,928 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 21:15:24,928 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:24,939 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:15:24,939 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:15:48,117 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:48,141 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个在线好友信息。
2025-07-01 21:15:48,149 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-01 21:15:48,156 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2761) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:48,160 - db - INFO - DatabaseManager: 已为用户 1009 检索到 1 个所有好友信息。
2025-07-01 21:15:48,164 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-01 21:15:52,105 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:15:52,108 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个在线好友信息。
2025-07-01 21:15:52,108 - server - INFO - SecureChatServer: 向 C 提供了 1 个在线好友列表。
2025-07-01 21:15:52,111 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ALL_FRIENDS
2025-07-01 21:15:52,113 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个所有好友信息。
2025-07-01 21:15:52,117 - server - INFO - SecureChatServer: 向 C 提供了 1 个所有好友列表。
2025-07-01 21:16:22,114 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ONLINE_FRIENDS
2025-07-01 21:16:22,129 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个在线好友信息。
2025-07-01 21:16:22,131 - server - INFO - SecureChatServer: 向 C 提供了 1 个在线好友列表。
2025-07-01 21:16:22,136 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2774) 的命令: GET_ALL_FRIENDS
2025-07-01 21:16:22,143 - db - INFO - DatabaseManager: 已为用户 1011 检索到 1 个所有好友信息。
2025-07-01 21:16:22,145 - server - INFO - SecureChatServer: 向 C 提供了 1 个所有好友列表。
2025-07-01 21:16:36,572 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2761) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 21:16:36,601 - db - INFO - DatabaseManager: 用户 1009 在线状态已清除。
2025-07-01 21:16:36,607 - server - INFO - SecureChatServer: 已清理用户 A (ID: 1009) 的会话并更新离线状态。
2025-07-01 21:16:36,607 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2761) 的连接已关闭。
2025-07-01 21:16:37,438 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2774) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "d:\Projects\Python\Instant_Secure_Communication\server_new\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-01 21:16:37,440 - db - INFO - DatabaseManager: 用户 1011 在线状态已清除。
2025-07-01 21:16:37,442 - server - INFO - SecureChatServer: 已清理用户 C (ID: 1011) 的会话并更新离线状态。
2025-07-01 21:16:37,443 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2774) 的连接已关闭。
2025-07-02 20:17:31,430 - __main__ - INFO - 服务器程序启动。
2025-07-02 20:17:31,431 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 20:17:31,474 - db - ERROR - DatabaseManager: 数据库连接失败! SQLSTATE: 28000 - ('28000', "[28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456) (SQLDriverConnect); [28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\db.py", line 28, in _get_connection
    conn = pyodbc.connect(self.conn_str, autocommit=True)
pyodbc.InterfaceError: ('28000', "[28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456) (SQLDriverConnect); [28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456)")
2025-07-02 20:17:31,474 - db - ERROR - DatabaseManager: 创建数据库表时出错: ('28000', "[28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456) (SQLDriverConnect); [28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456)")
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\db.py", line 40, in create_tables
    conn = self._get_connection()
  File "D:\Projects\Python\Instant_Secure_Communication\server\db.py", line 28, in _get_connection
    conn = pyodbc.connect(self.conn_str, autocommit=True)
pyodbc.InterfaceError: ('28000', "[28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456) (SQLDriverConnect); [28000] [Microsoft][ODBC Driver 17 for SQL Server][SQL Server]用户 'secure_chat_user' 登录失败。 (18456)")
2025-07-02 20:17:31,475 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 20:17:31,476 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 20:17:31,477 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 20:18:09,489 - __main__ - INFO - 服务器程序启动。
2025-07-02 20:18:09,489 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 20:18:09,562 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 20:18:09,573 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 20:18:09,581 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 20:18:09,589 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 20:18:09,590 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 20:18:09,591 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 20:18:09,592 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 20:24:03,821 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8103) 的新连接。
2025-07-02 20:24:03,823 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 8103) 启动。
2025-07-02 20:24:03,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8103) 的命令: REGISTER
2025-07-02 20:24:03,894 - db - INFO - DatabaseManager: 用户 'A' 注册成功。
2025-07-02 20:24:03,895 - server - INFO - SecureChatServer: 用户 A 已注册。
2025-07-02 20:24:03,896 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 8103) 断开连接，用户未登录。
2025-07-02 20:24:03,897 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 8103) 的连接已关闭。
2025-07-02 20:24:12,218 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的新连接。
2025-07-02 20:24:12,220 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 8123) 启动。
2025-07-02 20:24:12,253 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: LOGIN
2025-07-02 20:24:12,258 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:24:12,272 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:8124。
2025-07-02 20:24:12,273 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 8123) 登录。
2025-07-02 20:24:12,274 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:24:12,277 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:24:12,278 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:24:12,280 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:24:12,287 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:24:12,289 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:24:13,845 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:24:13,847 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:24:13,849 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:24:13,850 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:24:13,853 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:24:13,854 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:24:14,075 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:24:14,078 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:24:14,080 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:24:14,083 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:24:14,084 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:24:14,085 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:24:16,036 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:24:16,039 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:24:16,042 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:24:16,043 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:24:16,045 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:24:16,047 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:24:44,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:24:44,807 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:24:44,809 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:24:44,821 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:24:44,824 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:24:44,827 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:25:14,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:25:14,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:25:14,811 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:25:14,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:25:14,814 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:25:14,815 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:25:14,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:25:14,831 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:25:14,833 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:25:14,835 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:25:14,838 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:25:14,838 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:25:44,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:25:44,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:25:44,809 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:25:44,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:25:44,810 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:25:44,812 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:26:14,806 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:14,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:26:14,810 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:26:14,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:14,811 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:26:14,811 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:26:14,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:14,819 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:26:14,819 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:26:27,259 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1838) 的新连接。
2025-07-02 20:26:27,259 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1838) 启动。
2025-07-02 20:26:27,260 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1838) 的命令: REGISTER
2025-07-02 20:26:27,264 - db - INFO - DatabaseManager: 用户 'B' 注册成功。
2025-07-02 20:26:27,265 - server - INFO - SecureChatServer: 用户 B 已注册。
2025-07-02 20:26:27,265 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 1838) 断开连接，用户未登录。
2025-07-02 20:26:27,266 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1838) 的连接已关闭。
2025-07-02 20:26:32,740 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的新连接。
2025-07-02 20:26:32,742 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1859) 启动。
2025-07-02 20:26:32,754 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: LOGIN
2025-07-02 20:26:32,757 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:26:32,772 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:1860。
2025-07-02 20:26:32,773 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 1859) 登录。
2025-07-02 20:26:32,775 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:32,779 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:26:32,782 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:26:32,784 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:32,788 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个所有好友信息。
2025-07-02 20:26:32,789 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-02 20:26:34,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:34,343 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:26:34,345 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:26:34,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:34,348 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个所有好友信息。
2025-07-02 20:26:34,349 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-02 20:26:34,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:34,513 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:26:34,515 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:26:34,516 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:34,517 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个所有好友信息。
2025-07-02 20:26:34,517 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-02 20:26:36,474 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:36,478 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:26:36,480 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:26:36,481 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:36,484 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个所有好友信息。
2025-07-02 20:26:36,486 - server - INFO - SecureChatServer: 向 B 提供了 0 个所有好友列表。
2025-07-02 20:26:44,037 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:44,039 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:26:44,041 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:26:44,042 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:44,044 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个所有好友信息。
2025-07-02 20:26:44,046 - server - INFO - SecureChatServer: 向 A 提供了 0 个所有好友列表。
2025-07-02 20:26:45,981 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_USERS
2025-07-02 20:26:45,985 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-02 20:26:45,987 - server - INFO - SecureChatServer: 向 A 提供了所有注册用户列表。
2025-07-02 20:26:46,992 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_USERS
2025-07-02 20:26:46,994 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-02 20:26:46,995 - server - INFO - SecureChatServer: 向 A 提供了所有注册用户列表。
2025-07-02 20:26:48,168 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: ADD_FRIEND
2025-07-02 20:26:48,180 - db - INFO - DatabaseManager: 用户 3052 添加好友 3053 成功。
2025-07-02 20:26:48,181 - server - INFO - SecureChatServer: 用户 A 添加 B (ID: 3053) 为好友成功。
2025-07-02 20:26:48,182 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:48,184 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:26:48,185 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:26:51,027 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:51,029 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:26:51,030 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:26:51,031 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:51,039 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:26:51,041 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:26:51,206 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:51,207 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:26:51,207 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:26:51,208 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:51,209 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:26:51,210 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:26:55,829 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:26:55,831 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:26:55,832 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:26:55,833 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:26:55,835 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:26:55,836 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:27:04,806 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:27:04,810 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:27:04,812 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:27:04,826 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:27:04,848 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:27:04,852 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:27:21,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:27:21,812 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:27:21,813 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:27:21,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:27:21,822 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:27:21,822 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:27:34,796 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:27:34,797 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:27:34,798 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:27:34,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:27:34,806 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:27:34,807 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:27:51,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:27:51,810 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:27:51,811 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:27:51,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:27:51,814 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:27:51,816 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:28:04,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:28:04,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:28:04,812 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:28:04,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:28:04,833 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:28:04,835 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:28:21,804 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:28:21,811 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:28:21,812 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:28:21,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:28:21,821 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:28:21,823 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:28:34,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:28:34,812 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:28:34,813 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:28:34,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:28:34,817 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:28:34,818 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:28:51,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:28:51,800 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:28:51,801 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:28:51,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:28:51,802 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:28:51,803 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:29:04,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:29:04,803 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:29:04,804 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:29:04,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:29:04,816 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:29:04,818 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:29:21,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:29:21,816 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:29:21,817 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:29:21,818 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:29:21,825 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:29:21,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:29:34,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:29:34,815 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:29:34,816 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:29:34,818 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:29:34,824 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:29:34,824 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:29:51,204 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:29:51,207 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:29:51,209 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:29:51,210 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:29:51,213 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:29:51,214 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:30:13,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:30:13,800 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:30:13,801 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:30:13,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1859) 的命令: GET_ALL_FRIENDS
2025-07-02 20:30:13,804 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:30:13,805 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:30:21,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:30:21,805 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:30:21,806 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:30:21,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:30:21,823 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:30:21,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:30:51,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:30:51,828 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:30:51,832 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:30:51,833 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8123) 的命令: GET_ALL_FRIENDS
2025-07-02 20:30:51,857 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:30:51,860 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:30:55,837 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 8123) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:30:55,845 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:30:55,847 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:30:55,848 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 8123) 的连接已关闭。
2025-07-02 20:30:59,133 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 1859) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:30:59,139 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:30:59,141 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:30:59,142 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1859) 的连接已关闭。
2025-07-02 20:33:37,453 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的新连接。
2025-07-02 20:33:37,455 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1909) 启动。
2025-07-02 20:33:37,459 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: LOGIN
2025-07-02 20:33:37,490 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:33:37,505 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:1910。
2025-07-02 20:33:37,506 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 1909) 登录。
2025-07-02 20:33:37,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:37,511 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:33:37,512 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:33:37,513 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:37,518 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:33:37,519 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:33:39,044 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:39,047 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:33:39,048 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:33:39,049 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:39,053 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:33:39,055 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:33:39,452 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:39,453 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:33:39,455 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:33:39,458 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:39,459 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:33:39,461 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:33:41,436 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:41,438 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:33:41,439 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:33:41,440 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:41,443 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:33:41,444 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:33:49,751 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的新连接。
2025-07-02 20:33:49,752 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 1981) 启动。
2025-07-02 20:33:49,754 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: LOGIN
2025-07-02 20:33:49,769 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:33:49,782 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:1982。
2025-07-02 20:33:49,785 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 1981) 登录。
2025-07-02 20:33:49,786 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:49,787 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:33:49,788 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:33:49,789 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:49,796 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:33:49,800 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:33:51,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:51,355 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:33:51,357 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:33:51,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:51,362 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:33:51,364 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:33:51,593 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:51,595 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:33:51,597 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:33:51,599 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:51,601 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:33:51,603 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:33:54,269 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:33:54,272 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:33:54,273 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:33:54,275 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:33:54,276 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:33:54,280 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:34:09,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:34:09,805 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:34:09,809 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:34:09,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:34:09,816 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:34:09,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:34:21,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:34:21,520 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:34:21,521 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:34:21,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ALL_FRIENDS
2025-07-02 20:34:21,523 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:34:21,523 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:34:39,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:34:39,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:34:39,817 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:34:39,819 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:34:39,828 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:34:39,830 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:34:51,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:34:51,805 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:34:51,806 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:34:51,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1981) 的命令: GET_ALL_FRIENDS
2025-07-02 20:34:51,814 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:34:51,815 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:35:09,795 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:09,813 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:35:09,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:35:09,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 1909) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:09,821 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:35:09,823 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:35:18,157 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 1909) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:35:18,165 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:35:18,166 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:35:18,167 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1909) 的连接已关闭。
2025-07-02 20:35:19,857 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 1981) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:35:19,868 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:35:19,869 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:35:19,870 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 1981) 的连接已关闭。
2025-07-02 20:35:50,942 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的新连接。
2025-07-02 20:35:50,944 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2268) 启动。
2025-07-02 20:35:50,968 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: LOGIN
2025-07-02 20:35:50,989 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:35:51,008 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:2269。
2025-07-02 20:35:51,011 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 2268) 登录。
2025-07-02 20:35:51,013 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:51,017 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:35:51,019 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:35:51,020 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:51,029 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:35:51,031 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:35:52,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:52,819 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:35:52,820 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:35:52,821 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:52,823 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:35:52,824 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:35:53,114 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:53,117 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:35:53,118 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:35:53,120 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:53,129 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:35:53,131 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:35:55,870 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的新连接。
2025-07-02 20:35:55,871 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 2284) 启动。
2025-07-02 20:35:55,872 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: LOGIN
2025-07-02 20:35:55,876 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:35:55,887 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:2285。
2025-07-02 20:35:55,888 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 2284) 登录。
2025-07-02 20:35:55,889 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:55,891 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:35:55,891 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:35:55,892 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:55,899 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:35:55,900 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:35:57,459 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:57,465 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:35:57,466 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:35:57,469 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:57,480 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:35:57,482 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:35:57,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:35:57,801 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:35:57,802 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:35:57,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:35:57,808 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:35:57,810 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:36:06,991 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:36:06,994 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:36:06,996 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:36:06,998 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:36:07,009 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:36:07,012 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:36:23,022 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:36:23,023 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:36:23,024 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:36:23,026 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:36:23,026 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:36:23,027 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:36:27,721 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:36:27,723 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:36:27,726 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:36:27,729 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:36:27,731 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:36:27,733 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:36:53,795 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:36:53,799 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:36:53,801 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:36:53,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:36:53,816 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:36:53,819 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:36:57,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:36:57,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:36:57,810 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:36:57,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:36:57,822 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:36:57,824 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:37:23,818 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:37:23,821 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:37:23,823 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:37:23,825 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:37:23,836 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:37:23,838 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:37:27,714 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:37:27,720 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:37:27,724 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:37:27,726 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:37:27,728 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:37:27,729 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:37:53,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:37:53,804 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:37:53,805 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:37:53,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2268) 的命令: GET_ALL_FRIENDS
2025-07-02 20:37:53,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:37:53,817 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:37:57,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:37:57,801 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:37:57,802 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:37:57,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 2284) 的命令: GET_ALL_FRIENDS
2025-07-02 20:37:57,812 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:37:57,814 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:38:00,572 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2284) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:38:00,585 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:38:00,587 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:38:00,587 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2284) 的连接已关闭。
2025-07-02 20:38:02,108 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 2268) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:38:02,110 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:38:02,111 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:38:02,111 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 2268) 的连接已关闭。
2025-07-02 20:45:45,377 - __main__ - INFO - 服务器程序启动。
2025-07-02 20:45:45,377 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 20:45:45,454 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 20:45:45,468 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 20:45:45,479 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 20:45:45,488 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 20:45:45,488 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 20:45:45,489 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 20:45:45,489 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 20:46:02,066 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的新连接。
2025-07-02 20:46:02,067 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 35933) 启动。
2025-07-02 20:46:02,067 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: LOGIN
2025-07-02 20:46:02,077 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:46:02,088 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:35934。
2025-07-02 20:46:02,089 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 35933) 登录。
2025-07-02 20:46:02,089 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:02,091 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:46:02,091 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:46:02,091 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:02,097 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:46:02,104 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:46:03,818 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:03,820 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:46:03,822 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:46:03,823 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:03,827 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:46:03,829 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:46:04,141 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:04,142 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:46:04,144 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:46:04,149 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:04,151 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:46:04,152 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:46:09,837 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的新连接。
2025-07-02 20:46:09,837 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 35966) 启动。
2025-07-02 20:46:09,847 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: LOGIN
2025-07-02 20:46:09,854 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:46:09,856 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:35967。
2025-07-02 20:46:09,858 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 35966) 登录。
2025-07-02 20:46:09,859 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:09,863 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:46:09,864 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:46:09,868 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:09,870 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:46:09,870 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:46:11,403 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:11,405 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:46:11,406 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:46:11,407 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:11,408 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:46:11,408 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:46:11,651 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:11,653 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:46:11,655 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:46:11,656 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:11,657 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:46:11,658 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:46:21,182 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:21,184 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:46:21,186 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:46:21,187 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:21,188 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:46:21,189 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:46:34,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:34,813 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:46:34,815 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:46:34,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:34,826 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:46:34,828 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:46:41,584 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:46:41,586 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:46:41,587 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:46:41,588 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:46:41,596 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:46:41,597 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:47:04,796 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:47:04,798 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:47:04,799 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:47:04,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:47:04,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:47:04,809 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:47:11,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:47:11,804 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:47:11,805 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:47:11,808 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:47:11,810 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:47:11,812 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:47:34,808 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:47:34,809 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:47:34,809 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:47:34,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:47:34,819 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:47:34,821 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:47:41,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:47:41,799 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:47:41,801 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:47:41,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:47:41,813 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:47:41,815 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:48:04,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:04,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:48:04,809 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:48:04,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35933) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:04,825 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:48:04,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:48:11,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:11,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:48:11,809 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:48:11,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 35966) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:11,815 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:48:11,817 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:48:21,422 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 35933) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:48:21,436 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:48:21,443 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:48:21,443 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 35933) 的连接已关闭。
2025-07-02 20:48:22,156 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 35966) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:48:22,159 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:48:22,160 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:48:22,160 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 35966) 的连接已关闭。
2025-07-02 20:48:32,498 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的新连接。
2025-07-02 20:48:32,499 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 50155) 启动。
2025-07-02 20:48:32,499 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: LOGIN
2025-07-02 20:48:32,506 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:48:32,516 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:50156。
2025-07-02 20:48:32,516 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 50155) 登录。
2025-07-02 20:48:32,517 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:32,520 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:48:32,520 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:48:32,520 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:32,521 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:48:32,522 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:48:34,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:34,810 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:48:34,811 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:48:34,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:34,812 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:48:34,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:48:35,045 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:35,046 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:48:35,047 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:48:35,048 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:35,049 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:48:35,050 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:48:39,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的新连接。
2025-07-02 20:48:39,812 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 50196) 启动。
2025-07-02 20:48:39,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: LOGIN
2025-07-02 20:48:39,814 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:48:39,816 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:50197。
2025-07-02 20:48:39,817 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 50196) 登录。
2025-07-02 20:48:39,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:39,818 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:48:39,819 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:48:39,819 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:39,820 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:48:39,821 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:48:41,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:41,818 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:48:41,820 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:48:41,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:41,821 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:48:41,822 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:48:42,337 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:42,339 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:48:42,341 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:48:42,347 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:42,351 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:48:42,353 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:48:45,404 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:48:45,406 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:48:45,406 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:48:45,408 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:48:45,409 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:48:45,410 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:49:05,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:49:05,805 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:49:05,807 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:49:05,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:49:05,830 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:49:05,831 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:49:12,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:49:12,813 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:49:12,814 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:49:12,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:49:12,836 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:49:12,837 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:49:35,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:49:35,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:49:35,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:49:35,822 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:49:35,824 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:49:35,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:49:42,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:49:42,804 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:49:42,805 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:49:42,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:49:42,812 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:49:42,815 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:50:05,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:50:05,813 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:50:05,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:50:05,819 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:50:05,829 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:50:05,829 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:50:12,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:50:12,800 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:50:12,800 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:50:12,803 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:50:12,808 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:50:12,810 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:50:35,804 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:50:35,806 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:50:35,807 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:50:35,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50155) 的命令: GET_ALL_FRIENDS
2025-07-02 20:50:35,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:50:35,815 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:50:39,912 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 50155) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:50:39,925 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:50:39,926 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:50:39,927 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 50155) 的连接已关闭。
2025-07-02 20:50:42,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:50:42,815 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:50:42,817 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:50:42,819 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:50:42,822 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:50:42,823 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:51:12,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:12,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 20:51:12,808 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 20:51:12,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 50196) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:12,823 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:51:12,823 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:51:28,121 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 50196) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:51:28,126 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:51:28,126 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:51:28,126 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 50196) 的连接已关闭。
2025-07-02 20:51:45,246 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的新连接。
2025-07-02 20:51:45,247 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 39067) 启动。
2025-07-02 20:51:45,258 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: LOGIN
2025-07-02 20:51:45,268 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:51:45,278 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:39068。
2025-07-02 20:51:45,279 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 39067) 登录。
2025-07-02 20:51:45,279 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:45,282 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:51:45,284 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:51:45,285 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:45,296 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:51:45,298 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:51:47,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:47,813 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:51:47,813 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:51:47,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:47,816 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:51:47,817 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:51:47,941 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:47,943 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:51:47,944 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:51:47,945 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:47,946 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:51:47,947 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:51:50,129 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的新连接。
2025-07-02 20:51:50,129 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 39104) 启动。
2025-07-02 20:51:50,130 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: LOGIN
2025-07-02 20:51:50,131 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:51:50,133 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:39105。
2025-07-02 20:51:50,134 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 39104) 登录。
2025-07-02 20:51:50,134 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:50,135 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:51:50,135 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:51:50,135 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:50,136 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:51:50,137 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:51:51,659 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:51,661 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:51:51,661 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:51:51,662 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:51,663 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:51:51,663 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:51:51,839 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:51,840 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:51:51,841 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:51:51,842 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:51,843 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:51:51,843 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:51:55,417 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:51:55,419 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:51:55,420 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:51:55,433 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:51:55,435 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:51:55,436 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:52:18,808 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:52:18,811 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:52:18,811 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:52:18,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:52:18,820 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:52:18,822 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:52:21,782 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:52:21,785 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:52:21,785 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:52:21,786 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ALL_FRIENDS
2025-07-02 20:52:21,793 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:52:21,796 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:52:48,804 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:52:48,808 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:52:48,810 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:52:48,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39067) 的命令: GET_ALL_FRIENDS
2025-07-02 20:52:48,827 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:52:48,829 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:52:51,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:52:51,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:52:51,814 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:52:51,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39104) 的命令: GET_ALL_FRIENDS
2025-07-02 20:52:51,823 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:52:51,825 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:52:56,544 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 39104) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:52:56,557 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 20:52:56,558 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 20:52:56,558 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 39104) 的连接已关闭。
2025-07-02 20:53:10,414 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 39067) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 20:53:10,431 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 20:53:10,433 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 20:53:10,433 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 39067) 的连接已关闭。
2025-07-02 20:53:25,295 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的新连接。
2025-07-02 20:53:25,296 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 39397) 启动。
2025-07-02 20:53:25,297 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: LOGIN
2025-07-02 20:53:25,301 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 20:53:25,313 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:39398。
2025-07-02 20:53:25,314 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 39397) 登录。
2025-07-02 20:53:25,314 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:25,317 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:53:25,317 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:53:25,318 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:25,326 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:53:25,327 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:53:27,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:27,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:53:27,819 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:53:27,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:27,836 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:53:27,837 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:53:28,040 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:28,042 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 20:53:28,044 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 20:53:28,049 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:28,051 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:53:28,053 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:53:30,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的新连接。
2025-07-02 20:53:30,345 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 39431) 启动。
2025-07-02 20:53:30,348 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: LOGIN
2025-07-02 20:53:30,351 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 20:53:30,362 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:39432。
2025-07-02 20:53:30,363 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 39431) 登录。
2025-07-02 20:53:30,364 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:30,366 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:53:30,367 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:53:30,368 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:30,375 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:53:30,376 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:53:31,901 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:31,902 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:53:31,902 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:53:31,903 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:31,904 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:53:31,904 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:53:32,081 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:32,082 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:53:32,083 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:53:32,085 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:32,086 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:53:32,087 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:53:37,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:37,351 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:53:37,352 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:53:37,353 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:37,354 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:53:37,354 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:53:57,984 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:53:57,986 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:53:57,987 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:53:57,989 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:53:57,991 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:53:57,993 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:54:02,023 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:54:02,025 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:54:02,027 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:54:02,028 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:54:02,031 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:54:02,033 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:54:28,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:54:28,803 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:54:28,805 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:54:28,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:54:28,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:54:28,816 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:54:32,806 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:54:32,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:54:32,814 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:54:32,822 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:54:32,834 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:54:32,837 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 20:54:58,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:54:58,803 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 20:54:58,804 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 20:54:58,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39397) 的命令: GET_ALL_FRIENDS
2025-07-02 20:54:58,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 20:54:58,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 20:55:02,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ONLINE_FRIENDS
2025-07-02 20:55:02,805 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 20:55:02,807 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 20:55:02,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 39431) 的命令: GET_ALL_FRIENDS
2025-07-02 20:55:02,813 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 20:55:02,815 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:03:50,112 - __main__ - INFO - 服务器程序启动。
2025-07-02 21:03:50,113 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 21:03:50,215 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 21:03:50,227 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 21:03:50,234 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 21:03:50,241 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 21:03:50,242 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 21:03:50,242 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 21:03:50,243 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 21:04:14,975 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的新连接。
2025-07-02 21:04:14,976 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 19903) 启动。
2025-07-02 21:04:14,977 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: LOGIN
2025-07-02 21:04:14,990 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 21:04:15,001 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:19904。
2025-07-02 21:04:15,002 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 19903) 登录。
2025-07-02 21:04:15,002 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:15,005 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:04:15,006 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:04:15,007 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:15,013 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:04:15,013 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:04:16,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:16,824 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:04:16,826 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:04:16,827 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:16,829 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:04:16,832 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:04:17,058 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:17,059 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:04:17,060 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:04:17,062 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:17,063 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:04:17,064 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:04:19,220 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的新连接。
2025-07-02 21:04:19,221 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 19931) 启动。
2025-07-02 21:04:19,223 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: LOGIN
2025-07-02 21:04:19,228 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 21:04:19,230 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:19932。
2025-07-02 21:04:19,231 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 19931) 登录。
2025-07-02 21:04:19,232 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:19,233 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:04:19,234 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:04:19,234 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:19,235 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:04:19,235 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:04:20,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:20,815 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:04:20,816 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:04:20,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:20,818 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:04:20,819 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:04:20,971 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:20,973 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:04:20,973 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:04:20,976 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:20,977 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:04:20,978 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:04:46,956 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:46,959 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:04:46,960 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:04:46,961 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:46,973 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:04:46,974 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:04:51,823 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:04:51,825 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:04:51,827 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:04:51,835 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:04:51,837 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:04:51,839 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:05:01,423 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:01,424 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:05:01,425 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:05:01,429 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:01,431 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:05:01,432 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:05:01,658 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:01,659 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:05:01,660 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:05:01,662 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:01,665 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:05:01,665 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:05:02,708 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:02,709 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:05:02,710 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:05:02,710 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:02,712 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:05:02,714 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:05:02,848 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:02,850 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:05:02,850 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:05:02,852 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:02,852 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:05:02,853 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:05:31,577 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:31,581 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:05:31,581 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:05:31,582 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:31,590 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:05:31,592 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:05:33,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:05:33,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:05:33,813 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:05:33,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:05:33,830 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:05:33,832 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:06:01,591 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:06:01,594 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:06:01,595 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:06:01,597 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:06:01,598 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:06:01,600 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:06:03,794 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:06:03,796 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:06:03,797 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:06:03,800 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:06:03,801 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:06:03,801 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:06:31,594 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:06:31,610 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:06:31,612 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:06:31,613 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:06:31,629 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:06:31,632 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:06:33,796 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:06:33,799 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:06:33,800 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:06:33,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:06:33,810 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:06:33,811 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:07:01,812 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:07:01,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:07:01,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:07:01,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:07:01,833 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:07:01,834 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:07:03,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:07:03,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:07:03,808 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:07:03,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:07:03,810 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:07:03,811 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:07:31,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:07:31,815 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:07:31,816 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:07:31,820 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:07:31,833 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:07:31,835 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:07:33,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:07:33,818 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:07:33,820 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:07:33,827 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:07:33,830 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:07:33,831 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:08:01,590 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:08:01,592 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:08:01,594 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:08:01,596 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:08:01,605 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:08:01,606 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:08:03,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:08:03,809 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:08:03,810 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:08:03,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:08:03,817 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:08:03,818 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:08:31,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:08:31,809 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:08:31,811 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:08:31,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:08:31,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:08:31,818 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:09:01,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:01,809 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:09:01,812 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:09:01,835 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19903) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:01,851 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:09:01,853 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:09:13,804 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:13,805 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:09:13,806 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:09:13,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 19931) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:13,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:09:13,811 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:09:17,966 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 19903) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:09:17,972 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 21:09:17,972 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 21:09:17,973 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 19903) 的连接已关闭。
2025-07-02 21:09:20,360 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 19931) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:09:20,381 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 21:09:20,382 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 21:09:20,382 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 19931) 的连接已关闭。
2025-07-02 21:09:28,434 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的新连接。
2025-07-02 21:09:28,436 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 42542) 启动。
2025-07-02 21:09:28,437 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: LOGIN
2025-07-02 21:09:28,441 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 21:09:28,450 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:42543。
2025-07-02 21:09:28,451 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 42542) 登录。
2025-07-02 21:09:28,452 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:28,454 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:09:28,456 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:09:28,456 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:28,457 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:09:28,458 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:09:30,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:30,814 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:09:30,814 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:09:30,815 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:30,816 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:09:30,816 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:09:31,143 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:31,144 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:09:31,146 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:09:31,148 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:31,150 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:09:31,152 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:09:35,356 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的新连接。
2025-07-02 21:09:35,357 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 42586) 启动。
2025-07-02 21:09:35,358 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: LOGIN
2025-07-02 21:09:35,365 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 21:09:35,368 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:42587。
2025-07-02 21:09:35,369 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 42586) 登录。
2025-07-02 21:09:35,370 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:35,371 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:09:35,371 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:09:35,372 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:35,373 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:09:35,373 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:09:36,917 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:36,919 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:09:36,921 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:09:36,922 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:36,924 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:09:36,926 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:09:37,072 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:37,073 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:09:37,074 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:09:37,075 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:37,075 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:09:37,076 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:09:44,621 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:09:44,624 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:09:44,624 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:09:44,624 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:09:44,625 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:09:44,626 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:10:01,824 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:10:01,832 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:10:01,837 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:10:01,838 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:10:01,848 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:10:01,849 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:10:07,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:10:07,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:10:07,808 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:10:07,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:10:07,820 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:10:07,822 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:10:31,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:10:31,803 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:10:31,804 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:10:31,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:10:31,806 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:10:31,806 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:10:37,800 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:10:37,805 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:10:37,805 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:10:37,806 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:10:37,806 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:10:37,807 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:11:01,805 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:11:01,809 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:11:01,810 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:11:01,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:11:01,824 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:11:01,825 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:11:07,797 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:11:07,800 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:11:07,801 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:11:07,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:11:07,811 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:11:07,812 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:11:31,800 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:11:31,804 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:11:31,805 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:11:31,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:11:31,825 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:11:31,827 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:11:37,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:11:37,804 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:11:37,806 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:11:37,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:11:37,809 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:11:37,811 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:12:01,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:12:01,812 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:12:01,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:12:01,817 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:12:01,828 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:12:01,829 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:12:07,801 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:12:07,805 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:12:07,806 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:12:07,811 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:12:07,817 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:12:07,818 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:12:31,809 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:12:31,812 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:12:31,814 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:12:31,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:12:31,823 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:12:31,824 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:12:37,799 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:12:37,801 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:12:37,802 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:12:37,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:12:37,809 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:12:37,810 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:13:13,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:13:13,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:13:13,817 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:13:13,819 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:13:13,823 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:13:13,854 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:13:13,854 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:13:13,855 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:13:13,856 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:13:13,856 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:13:13,859 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:13:13,859 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:13:34,760 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:13:34,782 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:13:34,785 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:13:34,787 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:13:34,812 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:13:34,821 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:01,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:01,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:01,819 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:01,830 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:01,832 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:01,835 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:13,814 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:13,818 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:14:13,821 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:14:13,828 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:13,843 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:14:13,845 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:14:30,940 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:30,944 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:30,946 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:30,946 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:30,961 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:30,962 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:35,213 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:35,217 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:35,218 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:35,220 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:35,222 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:35,225 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:35,492 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:35,494 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:35,495 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:35,497 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:35,498 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:35,500 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:44,936 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:44,937 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:44,939 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:44,941 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:44,943 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:44,944 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:14:45,088 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:14:45,090 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:14:45,091 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:14:45,093 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:14:45,095 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:14:45,096 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:15:13,831 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:15:13,836 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:15:13,838 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:15:13,860 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:15:13,864 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:15:13,869 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:15:15,062 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:15:15,067 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:15:15,070 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:15:15,075 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:15:15,079 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:15:15,081 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:15:45,810 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:15:45,814 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:15:45,816 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:15:45,821 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42542) 的命令: GET_ALL_FRIENDS
2025-07-02 21:15:45,829 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:15:45,830 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:15:53,113 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 42542) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:15:53,119 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 21:15:53,120 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 21:15:53,120 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 42542) 的连接已关闭。
2025-07-02 21:16:13,833 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:16:13,862 - db - INFO - DatabaseManager: 已为用户 3053 检索到 0 个在线好友信息。
2025-07-02 21:16:13,866 - server - INFO - SecureChatServer: 向 B 提供了 0 个在线好友列表。
2025-07-02 21:16:13,867 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 42586) 的命令: GET_ALL_FRIENDS
2025-07-02 21:16:13,869 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:16:13,871 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:16:53,013 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 42586) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:16:53,019 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 21:16:53,020 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 21:16:53,021 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 42586) 的连接已关闭。
2025-07-02 21:17:02,506 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的新连接。
2025-07-02 21:17:02,506 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 41806) 启动。
2025-07-02 21:17:02,506 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: LOGIN
2025-07-02 21:17:02,509 - db - INFO - DatabaseManager: 用户 'A' 认证成功。
2025-07-02 21:17:02,521 - db - INFO - DatabaseManager: 用户 3052 在线状态更新成功: 10.21.240.25:41807。
2025-07-02 21:17:02,522 - server - INFO - SecureChatServer: 用户 A (ID: 3052) 从 ('127.0.0.1', 41806) 登录。
2025-07-02 21:17:02,522 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:02,523 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:17:02,523 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:17:02,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:02,530 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:17:02,531 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:17:04,813 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:04,814 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:17:04,816 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:17:04,816 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:04,817 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:17:04,817 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:17:04,936 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:04,938 - db - INFO - DatabaseManager: 已为用户 3052 检索到 0 个在线好友信息。
2025-07-02 21:17:04,940 - server - INFO - SecureChatServer: 向 A 提供了 0 个在线好友列表。
2025-07-02 21:17:04,940 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:04,942 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:17:04,943 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:17:09,317 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的新连接。
2025-07-02 21:17:09,317 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 41852) 启动。
2025-07-02 21:17:09,317 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: LOGIN
2025-07-02 21:17:09,318 - db - INFO - DatabaseManager: 用户 'B' 认证成功。
2025-07-02 21:17:09,319 - db - INFO - DatabaseManager: 用户 3053 在线状态更新成功: 10.21.240.25:41853。
2025-07-02 21:17:09,319 - server - INFO - SecureChatServer: 用户 B (ID: 3053) 从 ('127.0.0.1', 41852) 登录。
2025-07-02 21:17:09,320 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:09,320 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:17:09,322 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:17:09,323 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:09,324 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:17:09,324 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:17:10,853 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:10,854 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:17:10,855 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:17:10,856 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:10,856 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:17:10,857 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:17:10,991 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:10,992 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:17:10,992 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:17:10,992 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:10,993 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:17:10,994 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:17:15,941 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:15,942 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:17:15,942 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:17:15,943 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:15,944 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:17:15,945 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:17:35,150 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:35,153 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个在线好友信息。
2025-07-02 21:17:35,156 - server - INFO - SecureChatServer: 向 A 提供了 1 个在线好友列表。
2025-07-02 21:17:35,164 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41806) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:35,170 - db - INFO - DatabaseManager: 已为用户 3052 检索到 1 个所有好友信息。
2025-07-02 21:17:35,172 - server - INFO - SecureChatServer: 向 A 提供了 1 个所有好友列表。
2025-07-02 21:17:41,802 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ONLINE_FRIENDS
2025-07-02 21:17:41,807 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个在线好友信息。
2025-07-02 21:17:41,809 - server - INFO - SecureChatServer: 向 B 提供了 1 个在线好友列表。
2025-07-02 21:17:41,841 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 41852) 的命令: GET_ALL_FRIENDS
2025-07-02 21:17:41,865 - db - INFO - DatabaseManager: 已为用户 3053 检索到 1 个所有好友信息。
2025-07-02 21:17:41,867 - server - INFO - SecureChatServer: 向 B 提供了 1 个所有好友列表。
2025-07-02 21:17:56,243 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 41806) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:17:56,254 - db - INFO - DatabaseManager: 用户 3052 在线状态已清除。
2025-07-02 21:17:56,255 - server - INFO - SecureChatServer: 已清理用户 A (ID: 3052) 的会话并更新离线状态。
2025-07-02 21:17:56,257 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 41806) 的连接已关闭。
2025-07-02 21:17:57,154 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 41852) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "D:\Projects\Python\Instant_Secure_Communication\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 21:17:57,157 - db - INFO - DatabaseManager: 用户 3053 在线状态已清除。
2025-07-02 21:17:57,157 - server - INFO - SecureChatServer: 已清理用户 B (ID: 3053) 的会话并更新离线状态。
2025-07-02 21:17:57,158 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 41852) 的连接已关闭。
2025-07-02 23:24:48,606 - __main__ - INFO - 服务器程序启动。
2025-07-02 23:24:48,607 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 23:24:48,772 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 23:24:48,789 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 23:24:48,799 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 23:24:48,809 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 23:24:48,810 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 23:24:48,810 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 23:24:48,812 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 23:25:30,485 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4760) 的新连接。
2025-07-02 23:25:30,486 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4760) 启动。
2025-07-02 23:25:30,487 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4760) 的命令: REGISTER
2025-07-02 23:25:30,511 - db - INFO - DatabaseManager: 用户 '1' 注册成功。
2025-07-02 23:25:30,512 - server - INFO - SecureChatServer: 用户 1 已注册。
2025-07-02 23:25:30,514 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4760) 断开连接，用户未登录。
2025-07-02 23:25:30,514 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4760) 的连接已关闭。
2025-07-02 23:25:35,667 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的新连接。
2025-07-02 23:25:35,668 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4770) 启动。
2025-07-02 23:25:35,686 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: LOGIN
2025-07-02 23:25:35,699 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-02 23:25:35,722 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:4771。
2025-07-02 23:25:35,723 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 4770) 登录。
2025-07-02 23:25:35,723 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:35,735 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:25:35,737 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:25:35,738 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:35,744 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:25:35,745 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:25:37,352 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:37,354 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:25:37,354 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:25:37,355 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:37,355 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:25:37,356 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:25:38,712 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:38,714 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:25:38,714 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:25:38,715 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:38,715 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:25:38,716 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:25:40,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:40,340 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:25:40,341 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:25:40,341 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:40,343 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:25:40,344 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:25:43,448 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4787) 的新连接。
2025-07-02 23:25:43,450 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4787) 启动。
2025-07-02 23:25:43,450 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4787) 的命令: REGISTER
2025-07-02 23:25:43,460 - db - INFO - DatabaseManager: 用户 '2' 注册成功。
2025-07-02 23:25:43,460 - server - INFO - SecureChatServer: 用户 2 已注册。
2025-07-02 23:25:43,460 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 4787) 断开连接，用户未登录。
2025-07-02 23:25:43,460 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4787) 的连接已关闭。
2025-07-02 23:25:50,449 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的新连接。
2025-07-02 23:25:50,450 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 4802) 启动。
2025-07-02 23:25:50,474 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: LOGIN
2025-07-02 23:25:50,476 - db - INFO - DatabaseManager: 用户 '2' 认证成功。
2025-07-02 23:25:50,477 - db - INFO - DatabaseManager: 用户 1022 在线状态更新成功: 10.21.139.34:4803。
2025-07-02 23:25:50,478 - server - INFO - SecureChatServer: 用户 2 (ID: 1022) 从 ('127.0.0.1', 4802) 登录。
2025-07-02 23:25:50,479 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:50,480 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:25:50,481 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:25:50,482 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:50,482 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:25:50,483 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:25:52,016 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:52,017 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:25:52,018 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:25:52,018 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:52,019 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:25:52,019 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:25:52,279 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:52,280 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:25:52,281 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:25:52,281 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:52,282 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:25:52,284 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:25:54,140 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:25:54,142 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:25:54,143 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:25:54,144 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:25:54,146 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:25:54,147 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:26:08,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:08,350 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:26:08,351 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:26:08,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:26:08,356 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:26:08,357 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:26:22,338 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:22,340 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:26:22,340 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:26:22,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:26:22,345 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:26:22,346 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:26:38,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:38,347 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:26:38,348 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:26:38,348 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:38,349 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:26:38,350 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:26:38,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4770) 的命令: GET_ALL_FRIENDS
2025-07-02 23:26:38,357 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:26:38,358 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:26:52,135 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:52,147 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:26:52,148 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:26:52,148 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:26:52,150 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:26:52,150 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:26:52,151 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 4802) 的命令: GET_ALL_FRIENDS
2025-07-02 23:26:52,155 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:26:52,157 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:26:59,965 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5246) 的新连接。
2025-07-02 23:26:59,966 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5246) 启动。
2025-07-02 23:26:59,973 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5246) 的命令: LOGIN
2025-07-02 23:26:59,975 - db - INFO - DatabaseManager: 用户 '2' 认证成功。
2025-07-02 23:26:59,976 - server - WARNING - SecureChatServer: 用户 2 尝试重复登录。
2025-07-02 23:26:59,976 - server - INFO - SecureChatServer: 客户端 ('127.0.0.1', 5246) 断开连接，用户未登录。
2025-07-02 23:26:59,976 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5246) 的连接已关闭。
2025-07-02 23:27:07,024 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4802) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:27:07,038 - db - INFO - DatabaseManager: 用户 1022 在线状态已清除。
2025-07-02 23:27:07,039 - server - INFO - SecureChatServer: 已清理用户 2 (ID: 1022) 的会话并更新离线状态。
2025-07-02 23:27:07,039 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4802) 的连接已关闭。
2025-07-02 23:27:13,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的新连接。
2025-07-02 23:27:13,347 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5285) 启动。
2025-07-02 23:27:13,351 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: LOGIN
2025-07-02 23:27:13,361 - db - INFO - DatabaseManager: 用户 '2' 认证成功。
2025-07-02 23:27:13,377 - db - INFO - DatabaseManager: 用户 1022 在线状态更新成功: 10.21.139.34:5286。
2025-07-02 23:27:13,378 - server - INFO - SecureChatServer: 用户 2 (ID: 1022) 从 ('127.0.0.1', 5285) 登录。
2025-07-02 23:27:13,378 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:13,388 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:27:13,388 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:27:13,389 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:13,395 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:27:13,396 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:27:14,930 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:14,931 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:27:14,931 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:27:14,932 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:14,932 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:27:14,933 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:27:15,664 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:15,665 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:27:15,665 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:27:15,666 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:15,667 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:27:15,667 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:27:17,165 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:17,166 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:27:17,167 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:27:17,168 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:17,169 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:27:17,169 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:27:25,056 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 4770) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:27:25,060 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-02 23:27:25,060 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-02 23:27:25,061 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 4770) 的连接已关闭。
2025-07-02 23:27:31,509 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的新连接。
2025-07-02 23:27:31,510 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 5351) 启动。
2025-07-02 23:27:31,511 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: LOGIN
2025-07-02 23:27:31,513 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-02 23:27:31,522 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:5352。
2025-07-02 23:27:31,523 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 5351) 登录。
2025-07-02 23:27:31,523 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:31,524 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:27:31,524 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:27:31,525 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:31,526 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:27:31,527 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:27:33,051 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:33,053 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:27:33,053 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:27:33,053 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:33,054 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:27:33,054 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:27:33,498 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:33,500 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:27:33,500 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:27:33,501 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:33,501 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:27:33,502 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:27:35,279 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:35,280 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:27:35,281 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:27:35,282 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:35,283 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个所有好友信息。
2025-07-02 23:27:35,283 - server - INFO - SecureChatServer: 向 1 提供了 0 个所有好友列表。
2025-07-02 23:27:45,344 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:45,360 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个在线好友信息。
2025-07-02 23:27:45,361 - server - INFO - SecureChatServer: 向 2 提供了 0 个在线好友列表。
2025-07-02 23:27:45,362 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:45,367 - db - INFO - DatabaseManager: 已为用户 1022 检索到 0 个所有好友信息。
2025-07-02 23:27:45,369 - server - INFO - SecureChatServer: 向 2 提供了 0 个所有好友列表。
2025-07-02 23:27:46,133 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_USERS
2025-07-02 23:27:46,142 - db - INFO - DatabaseManager: 已检索到所有 2 个注册用户信息。
2025-07-02 23:27:46,143 - server - INFO - SecureChatServer: 向 1 提供了所有注册用户列表。
2025-07-02 23:27:46,777 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: ADD_FRIEND
2025-07-02 23:27:46,796 - db - INFO - DatabaseManager: 用户 1021 添加好友 1022 成功。
2025-07-02 23:27:46,797 - server - INFO - SecureChatServer: 用户 1 添加 2 (ID: 1022) 为好友成功。
2025-07-02 23:27:46,798 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:46,805 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-02 23:27:46,806 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-02 23:27:46,807 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:46,811 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:27:46,812 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:27:49,703 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:27:49,718 - db - INFO - DatabaseManager: 已为用户 1022 检索到 1 个在线好友信息。
2025-07-02 23:27:49,719 - server - INFO - SecureChatServer: 向 2 提供了 1 个在线好友列表。
2025-07-02 23:27:49,720 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5285) 的命令: GET_ALL_FRIENDS
2025-07-02 23:27:49,726 - db - INFO - DatabaseManager: 已为用户 1022 检索到 1 个所有好友信息。
2025-07-02 23:27:49,727 - server - INFO - SecureChatServer: 向 2 提供了 1 个所有好友列表。
2025-07-02 23:28:03,280 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:28:03,282 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个在线好友信息。
2025-07-02 23:28:03,283 - server - INFO - SecureChatServer: 向 1 提供了 1 个在线好友列表。
2025-07-02 23:28:03,285 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 5351) 的命令: GET_ALL_FRIENDS
2025-07-02 23:28:03,286 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:28:03,287 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:28:06,463 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 5351) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:28:06,467 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-02 23:28:06,468 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-02 23:28:06,469 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5351) 的连接已关闭。
2025-07-02 23:28:07,463 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 5285) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:28:07,486 - db - INFO - DatabaseManager: 用户 1022 在线状态已清除。
2025-07-02 23:28:07,486 - server - INFO - SecureChatServer: 已清理用户 2 (ID: 1022) 的会话并更新离线状态。
2025-07-02 23:28:07,486 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 5285) 的连接已关闭。
2025-07-02 23:36:25,922 - __main__ - INFO - 服务器程序启动。
2025-07-02 23:36:25,923 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 23:36:25,993 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 23:36:26,005 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 23:36:26,013 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 23:36:26,021 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 23:36:26,022 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 23:36:26,023 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 23:36:26,023 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 23:36:31,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的新连接。
2025-07-02 23:36:31,333 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 7034) 启动。
2025-07-02 23:36:31,334 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: LOGIN
2025-07-02 23:36:31,348 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-02 23:36:31,357 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:7035。
2025-07-02 23:36:31,358 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 7034) 登录。
2025-07-02 23:36:31,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:36:31,366 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:36:31,367 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:36:31,368 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:36:31,374 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:36:31,375 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:36:32,909 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:36:32,915 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:36:32,916 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:36:32,917 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:36:32,925 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:36:32,926 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:36:33,168 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:36:33,174 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:36:33,175 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:36:33,176 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:36:33,188 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:36:33,188 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:37:03,332 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:37:03,338 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:37:03,338 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:37:03,339 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:37:03,350 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:37:03,351 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:37:33,346 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:37:33,352 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:37:33,352 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:37:33,352 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:37:33,353 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:37:33,354 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:38:03,342 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:38:03,348 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:38:03,349 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:38:03,349 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:38:03,398 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:38:03,399 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:38:33,335 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:38:33,342 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:38:33,342 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:38:33,343 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:38:33,351 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:38:33,353 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:39:03,333 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:39:03,339 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:39:03,340 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:39:03,340 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:39:03,345 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:39:03,346 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:39:33,350 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:39:33,356 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:39:33,358 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:39:33,359 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 7034) 的命令: GET_ALL_FRIENDS
2025-07-02 23:39:33,368 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:39:33,368 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:43:45,145 - __main__ - INFO - 服务器程序启动。
2025-07-02 23:43:45,146 - db - INFO - DatabaseManager: 正在初始化并尝试连接到数据库。
2025-07-02 23:43:45,233 - db - INFO - DatabaseManager: 检查并创建 'Users' 表...
2025-07-02 23:43:45,248 - db - INFO - DatabaseManager: 检查并创建 'Friendships' 表...
2025-07-02 23:43:45,256 - db - INFO - DatabaseManager: 检查并创建 'OnlineStatus' 表...
2025-07-02 23:43:45,264 - db - INFO - DatabaseManager: 数据库表检查/创建完成。
2025-07-02 23:43:45,264 - db - INFO - DatabaseManager: 数据库管理器初始化完成。
2025-07-02 23:43:45,265 - server - INFO - SecureChatServer: 服务器初始化完成。
2025-07-02 23:43:45,265 - server - INFO - SecureChatServer: 服务器正在监听 127.0.0.1:50000
2025-07-02 23:43:52,724 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的新连接。
2025-07-02 23:43:52,725 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 8391) 启动。
2025-07-02 23:43:52,725 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: LOGIN
2025-07-02 23:43:52,736 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-02 23:43:52,747 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:8392。
2025-07-02 23:43:52,747 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 8391) 登录。
2025-07-02 23:43:52,748 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:43:52,751 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:43:52,752 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:43:52,753 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ALL_FRIENDS
2025-07-02 23:43:52,761 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:43:52,762 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:43:54,291 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:43:54,293 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:43:54,299 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:43:54,301 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ALL_FRIENDS
2025-07-02 23:43:54,302 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:43:54,302 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:43:54,560 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:43:54,561 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:43:54,562 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:43:54,563 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8391) 的命令: GET_ALL_FRIENDS
2025-07-02 23:43:54,564 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:43:54,564 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:44:14,370 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 8391) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:44:14,384 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-02 23:44:14,384 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-02 23:44:14,385 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 8391) 的连接已关闭。
2025-07-02 23:44:20,547 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的新连接。
2025-07-02 23:44:20,548 - server - INFO - SecureChatServer: 客户端处理线程为 ('127.0.0.1', 8490) 启动。
2025-07-02 23:44:20,548 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: LOGIN
2025-07-02 23:44:20,556 - db - INFO - DatabaseManager: 用户 '1' 认证成功。
2025-07-02 23:44:20,563 - db - INFO - DatabaseManager: 用户 1021 在线状态更新成功: 10.21.139.34:8491。
2025-07-02 23:44:20,564 - server - INFO - SecureChatServer: 用户 1 (ID: 1021) 从 ('127.0.0.1', 8490) 登录。
2025-07-02 23:44:20,565 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:44:20,567 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:44:20,568 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:44:20,569 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:44:20,575 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:44:20,575 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:44:22,097 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:44:22,098 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:44:22,099 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:44:22,100 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:44:22,101 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:44:22,102 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:44:22,823 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:44:22,825 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:44:22,826 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:44:22,826 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:44:22,827 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:44:22,828 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:44:52,274 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:44:52,284 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:44:52,286 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:44:52,287 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:44:52,295 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:44:52,295 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:45:22,276 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:45:22,282 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:45:22,283 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:45:22,283 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:45:22,295 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:45:22,295 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:45:52,336 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ONLINE_FRIENDS
2025-07-02 23:45:52,343 - db - INFO - DatabaseManager: 已为用户 1021 检索到 0 个在线好友信息。
2025-07-02 23:45:52,343 - server - INFO - SecureChatServer: 向 1 提供了 0 个在线好友列表。
2025-07-02 23:45:52,345 - server - INFO - SecureChatServer: 收到来自 ('127.0.0.1', 8490) 的命令: GET_ALL_FRIENDS
2025-07-02 23:45:52,351 - db - INFO - DatabaseManager: 已为用户 1021 检索到 1 个所有好友信息。
2025-07-02 23:45:52,352 - server - INFO - SecureChatServer: 向 1 提供了 1 个所有好友列表。
2025-07-02 23:45:55,286 - server - ERROR - SecureChatServer: 客户端 ('127.0.0.1', 8490) 处理程序发生错误: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
Traceback (most recent call last):
  File "c:\Users\syn\Desktop\小学期\server\server.py", line 63, in _handle_client
    data = client_socket.recv(BUFFER_SIZE).decode('utf-8')
ConnectionResetError: [WinError 10054] 远程主机强迫关闭了一个现有的连接。
2025-07-02 23:45:55,297 - db - INFO - DatabaseManager: 用户 1021 在线状态已清除。
2025-07-02 23:45:55,298 - server - INFO - SecureChatServer: 已清理用户 1 (ID: 1021) 的会话并更新离线状态。
2025-07-02 23:45:55,298 - server - INFO - SecureChatServer: 与 ('127.0.0.1', 8490) 的连接已关闭。
